<!--
    title: Dell_XPS_15_9570
    description: Migration of Dell_XPS_15_9570 from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-28T17:58:55.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">Dell XPS 15 9570</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This page is far from completed. Some not mentioned items could be the same as <a href="../wiki/Dell_XPS_15_9560.html" class="mw-redirect" title="XPS 15 9560">XPS 15 9560</a>. Most of it also applies to the Precision 5530</div>
<table  style="float: right;">
<tbody>
<tr>
<td><b>Device/Functionality</b></td>
<td>
<b>Status</b>
</td>
</tr>
<tr>
<td><a href="#Suspend">Suspend</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Hibernate">Hibernate</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Graphics">Integrated Graphics</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Graphics">Discrete Nvidia Graphics</a></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Modify
</td>
</tr>
<tr>
<td><a href="#Wifi_and_Bluetooth">Wifi</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Wifi_and_Bluetooth">Bluetooth</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Wifi_and_Bluetooth">rfkill</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Audio</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Touchpad_and_Touchscreen">Touchpad</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Touchpad_and_Touchscreen">Touchscreen</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Webcam</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Card Reader</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Function/Multimedia Keys</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#Power_Management">Power Management</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td><a href="#EFI_firmware_updates">EFI firmware updates</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>
<a href="#Fingerprint_reader">Fingerprint reader</a><sup>[<a href="../wiki/TOS Wiki:Requests.html#Broken_section_links" class="mw-redirect" title="TOS Wiki:Requests">broken link</a>: invalid section]</sup>
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Not working
</td>
</tr>
</tbody>
</table>
<p><br>
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#UEFI"><span >1</span> <span >UEFI</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Power_Management"><span >2</span> <span >Power Management</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Suspend"><span >2.1</span> <span >Suspend</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Hibernate"><span >2.2</span> <span >Hibernate</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Powertop"><span >2.3</span> <span >Powertop</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Graphics"><span >3</span> <span >Graphics</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#kernel_modules"><span >3.1</span> <span >kernel modules</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#NVIDIA_Optimus"><span >3.2</span> <span >NVIDIA Optimus</span></a></li>
<li class="toclevel-2 tocsection-9">
<a href="#Troubleshooting"><span >3.3</span> <span >Troubleshooting</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#xbacklight"><span >3.3.1</span> <span >xbacklight</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#NVRM:_Failed_to_enable_MSI;_falling_back_to_PCIe_virtual-wire_interrupts"><span >3.3.2</span> <span >NVRM: Failed to enable MSI; falling back to PCIe virtual-wire interrupts</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Built-in_screen_flickers_or_does_not_come_on_with_Linux_kernel_5.0.0_-_5.0.7"><span >3.3.3</span> <span >Built-in screen flickers or does not come on with Linux kernel 5.0.0 - 5.0.7</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Lock-ups_when_resuming_from_suspend_with_nvidia_module"><span >3.3.4</span> <span >Lock-ups when resuming from suspend with nvidia module</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-14">
<a href="#Wifi_and_Bluetooth"><span >4</span> <span >Wifi and Bluetooth</span></a>
<ul>
<li class="toclevel-2 tocsection-15">
<a href="#Troubleshooting_2"><span >4.1</span> <span >Troubleshooting</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#ath10k_module_crashes_after_suspend"><span >4.1.1</span> <span >ath10k module crashes after suspend</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#WiFi_partially_looses_network_connectivity_every_1-2_hours"><span >4.1.2</span> <span >WiFi partially looses network connectivity every 1-2 hours</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Bluetooth_disappears_(after_suspend?)"><span >4.1.3</span> <span >Bluetooth disappears (after suspend?)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Touchpad_and_Touchscreen"><span >5</span> <span >Touchpad and Touchscreen</span></a></li>
<li class="toclevel-1 tocsection-20">
<a href="#Thunderbolt_docks"><span >6</span> <span >Thunderbolt docks</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#TB16"><span >6.1</span> <span >TB16</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22">
<a href="#EFI_firmware_updates"><span >7</span> <span >EFI firmware updates</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#UEFI_2"><span >7.1</span> <span >UEFI</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24">
<a href="#Thermal_management"><span >8</span> <span >Thermal management</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Diagnosis"><span >8.1</span> <span >Diagnosis</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Undervolting"><span >8.2</span> <span >Undervolting</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Repasting_&amp;_padding"><span >8.3</span> <span >Repasting &amp; padding</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Results"><span >8.4</span> <span >Results</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="UEFI">UEFI</span></h2>
<p>Before installing it is necessary to modify some UEFI Settings. They can be accessed by pressing the F2 key repeatedly when booting.
</p>
<ul>
<li>Change the SATA Mode from the default "RAID" to "AHCI". This will allow Linux to detect the NVME SSD. If dual booting with an existing Windows installation, Windows will not boot after the change but <a rel="nofollow"  href="https://triplescomputers.com/blog/uncategorized/solution-switch-windows-10-from-raidide-to-ahci-operation/">this can be fixed without a reinstallation</a>.</li>
<li>Change Fastboot to "Thorough" in "POST Behaviour". This prevents intermittent boot failures.</li>
<li>Disable secure boot to allow Linux to boot. Alternatively, you can choose to <a href="../wiki/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">set up Secure Boot</a> so that it works with Linux and you can take advantage of its potential security benefits.</li>
</ul>
<p>Installation of TOS Linux can proceed normally. Refer to the <a href="../wiki/Installation_guide.html" title="Installation guide">Installation guide</a> for more information.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Many Dell XPS UEFI do not support passing kernel line options directly to the kernel and will result in a frozen boot. Use a bootloader or TOS-EFIBoot<a rel="nofollow"  href="https://github.com/xdever/arch-efiboot">[1]</a> instead.</div>
<h2><span class="mw-headline" id="Power_Management">Power Management</span></h2>
<h3><span class="mw-headline" id="Suspend">Suspend</span></h3>
<p>By default, the very inefficient s2idle suspend variant is selected, which consumes a large amount of power. The much more efficient deep variant can be selected instead:
</p>
<pre> $ cat /sys/power/mem_sleep 
 [s2idle] deep
 $ echo deep|sudo tee /sys/power/mem_sleep
 $ cat /sys/power/mem_sleep 
 s2idle [deep]
</pre>
<p>To make the change permanent add <code>mem_sleep_default=deep</code> to your <a href="../wiki/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<p>An easy way would be to add <code>mem_sleep_default=deep</code> to the <code>GRUB_CMDLINE_LINUX_DEFAULT</code> entry in /etc/default/grub:
</p>
<pre> GRUB_CMDLINE_LINUX_DEFAULT="mem_sleep_default=deep"
</pre>
<p>Read more regarding the sleep variants on the kernel documentation <a rel="nofollow"  href="https://www.kernel.org/doc/html/v4.18/admin-guide/pm/sleep-states.html">[2]</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Some users have reported a problem where the CPUs get stuck in a high power state after resuming from S3 (deep) suspension <a rel="nofollow"  href="https://www.reddit.com/r/Dell/comments/91313h/xps_15_9570_c_state_bug_after_s3_sleep_and_modern/">[3]</a>. Workaround is to touch the touchpad <a rel="nofollow"  href="https://www.dell.com/community/Precision-Mobile-Workstations/High-load-heating-up-fan-noise-after-S3-suspend-and-resume-on/td-p/7441933">[4]</a>. The underlying cause is spurious interrupts generated by the Synaptics SYNA2393 touchpad, and has been fixed as of Linux 5.7-rc5 <a rel="nofollow"  href="https://lwn.net/Articles/820119/">[5]</a>
</div>
<h3><span class="mw-headline" id="Hibernate">Hibernate</span></h3>
<p>Works out of the Box see <a href="../wiki/Power_management/Suspend_and_hibernate.html" title="Power management/Suspend and hibernate">Power management/Suspend and hibernate</a>
</p>
<h3><span class="mw-headline" id="Powertop">Powertop</span></h3>
<p><code>powertop</code> is very efficient to manage power consumption.
Run <code>powertop --auto-tune</code>
and compare the Watt consumption variation (battery must be unplugged). <code>powertop --auto-tune</code> can be run at every boot.
</p>
<h2><span class="mw-headline" id="Graphics">Graphics</span></h2>
<h3><span class="mw-headline" id="kernel_modules">kernel modules</span></h3>
<p>The nouveau module is known to cause kernel panics and freezes on Dell XPS 15 9570.
</p>
<p>One way to mitigate this would be by adding <code>nomodeset</code> to the kernel options. However it's better to completely disable it with the blacklist method (recommended):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/blacklist.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">blacklist nouveau
blacklist rivafb
blacklist nvidiafb
blacklist rivatv
blacklist nv</pre>
<h3><span class="mw-headline" id="NVIDIA_Optimus">NVIDIA Optimus</span></h3>
<p>See <a href="../wiki/NVIDIA_Optimus.html#Available_methods" title="NVIDIA Optimus">NVIDIA Optimus#Available methods</a>.
</p>
<h3><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h3>
<h4><span class="mw-headline" id="xbacklight">xbacklight</span></h4>
<p>To get xbacklight working and not conflicting with NVIDIA optimus:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
	Identifier  "Intel Graphics"
        Driver      "intel"
        Option      "Backlight"  "intel_backlight"
EndSection
</pre>
<h4>
<span id="NVRM:_Failed_to_enable_MSI.3B_falling_back_to_PCIe_virtual-wire_interrupts"></span><span class="mw-headline" id="NVRM:_Failed_to_enable_MSI;_falling_back_to_PCIe_virtual-wire_interrupts">NVRM: Failed to enable MSI; falling back to PCIe virtual-wire interrupts</span>
</h4>
<p>Sometimes it happens after suspend/resume. GPU could work fine without MSI. <a rel="nofollow"  href="http://us.download.nvidia.com/XFree86/Linux-x86/325.15/README/knownissues.html#msi_interrupts">[6]</a>. You could disable MSI by adding the following in <b>/etc/modprobe.d/nvidia.conf</b>:
</p>
<pre> options nvidia NVreg_EnableMSI=0
</pre>
<h4><span class="mw-headline" id="Built-in_screen_flickers_or_does_not_come_on_with_Linux_kernel_5.0.0_-_5.0.7">Built-in screen flickers or does not come on with Linux kernel 5.0.0 - 5.0.7</span></h4>
<p>Some users reported that running Linux kernel 5.0.0 to 5.0.7 can cause the screen to flicker (or stay completely black) when booting up or running an X server, making the built-in display unusable (see *<a rel="nofollow"  href="https://bugs.archlinux.org/task/61964">[7]</a>)
</p>
<p>Currently, it seems that there are three possible workarounds :
</p>
<ul>
<li>
<a href="../wiki/Downgrading_packages.html" class="mw-redirect" title="Downgrade">Downgrade</a> to Linux 4.20.13.</li>
<li>Apply <a rel="nofollow"  href="https://invent.kde.org/snippets/44">Albert Astals Cid's patch</a> on Linux kernel 5.0.x (see <a href="../wiki/Kernel/TOS_Build_System.html" title="Kernel/TOS Build System">kernel TOS Build System</a>).</li>
<li>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=linux-lts">linux-lts</a></span>
</li>
<li>upgrade to Linux 5.0.8 or higher</li>
</ul>
<h4><span class="mw-headline" id="Lock-ups_when_resuming_from_suspend_with_nvidia_module">Lock-ups when resuming from suspend with nvidia module</span></h4>
<p>If your system locks up every time you resume from suspend with the following two lines in dmesg:
</p>
<pre>   [   42.447364] pci 0000:01:00.0: Refused to change power state, currently in D3
   [   46.896493] pci 0000:01:00.0: Refused to change power state, currently in D3
</pre>
<p>you need to do the following:
</p>
<p>Into /etc/default/grub
</p>
<pre>   GRUB_CMDLINE_LINUX="nouveau.blacklist=0 acpi_osi=! acpi_osi=\"Windows 2015\" acpi_backlight=vendor mem_sleep_default=deep"
   
</pre>
<p>This solved the lock-ups for me. (internal nvidia bug number: 2589324, <a rel="nofollow"  href="https://www.dell.com/community/XPS/XPS-15-9570-with-Ubuntu-18-04-1-not-resuming-after-suspend/m-p/7305094#M28897">dell resolution</a>)
</p>
<h2><span class="mw-headline" id="Wifi_and_Bluetooth">Wifi and Bluetooth</span></h2>
<p>These work well out of the box but you might need to update the firmware for better stability.  For bluetooth, make sure you have everything installed as per the <a href="../wiki/Bluetooth.html" title="Bluetooth">Bluetooth</a> wiki page.
</p>
<pre> $ lspci | grep Network
 3b:00.0 Network controller: Qualcomm Atheros QCA6174 802.11ac Wireless Network Adapter (rev 32)
</pre>
<p>(please add a line here if you detect something different)
</p>
<h3><span class="mw-headline" id="Troubleshooting_2">Troubleshooting</span></h3>
<h4><span class="mw-headline" id="ath10k_module_crashes_after_suspend">ath10k module crashes after suspend</span></h4>
<p>You may notice driver crashes after suspend/resume, which for the most part does not seem to impact the running system, with coredumps similar to:
</p>
<pre>kernel: WARNING: CPU: 6 PID: 27936 at drivers/net/wireless/ath/ath10k/mac.c:5746 ath10k_bss_info_changed+0xf96/0x1120 [ath10k_core]
kernel: Modules linked in: uhid algif_hash cmac rfcomm fuse ccm ipt_MASQUERADE nf_conntrack_netlink nfnetlink xfrm_user xfrm_algo iptable_nat nf_nat_ipv4&gt;
kernel:  snd_hda_intel dcdbas x86_pkg_temp_thermal dell_smm_hwmon snd_hda_codec intel_powerclamp cfg80211 kvm_intel snd_hda_core input_leds snd_hwdep snd&gt;
kernel:  vfio_mdev mdev vfio_iommu_type1 vfio kvm irqbypass intel_gtt i2c_algo_bit drm_kms_helper syscopyarea sysfillrect sysimgblt fb_sys_fops drm agpga&gt;
kernel: CPU: 6 PID: 27936 Comm: kworker/u24:42 Tainted: G     U  W  OE     5.0.4-arch1-1-ARCH #1
kernel: Hardware name: Dell Inc. XPS 15 9570/0HWTMH, BIOS 1.8.1 02/01/2019
kernel: Workqueue: events_unbound async_run_entry_fn
kernel: RIP: 0010:ath10k_bss_info_changed+0xf96/0x1120 [ath10k_core]
kernel: Code: 24 8b 95 78 01 00 00 85 c0 0f 85 a7 00 00 00 89 d1 be 10 00 00 00 48 c7 c2 c0 b2 fa c0 4c 89 c7 e8 bf 68 00 00 e9 a5 f1 ff ff &lt;0f&gt; 0b 4c 89&gt;
kernel: RSP: 0000:ffffb7a45422fcd0 EFLAGS: 00010282
kernel: RAX: 00000000fffffffe RBX: ffff98f6d44815a0 RCX: 0000000000000000
kernel: RDX: ffff98f6d4481938 RSI: ffffb7a45422fcf0 RDI: ffff98f6d81df418
kernel: RBP: ffff98f6d81df418 R08: 0000000000000001 R09: 0000000000000000
kernel: R10: 000000000000001f R11: 0000000000000000 R12: 0000000000000020
kernel: R13: ffff98f6d81df420 R14: ffff98f6d4482598 R15: ffff98f6d44815a0
kernel: FS:  0000000000000000(0000) GS:ffff98f6dc380000(0000) knlGS:0000000000000000
179 94%
kernel:  process_one_work+0x1eb/0x410
kernel:  worker_thread+0x2d/0x3d0
kernel:  ? process_one_work+0x410/0x410
kernel:  kthread+0x112/0x130
kernel:  ? kthread_park+0x80/0x80
kernel:  ret_from_fork+0x35/0x40
kernel: ---[ end trace 09ae3e174c178f98 ]---
</pre>
<p>Patched in some kernels and not others (which?), relevant links:
</p>
<ul>
<li>
<a rel="nofollow"  href="https://bbs.archlinux.org/viewtopic.php?pid=1824143">BBS: Suspend issue with Dell XPS 9570</a> (related)</li>
<li><a rel="nofollow"  href="https://bugzilla.kernel.org/show_bug.cgi?id=201499">buzbilla#201499: ath10k BUG on resume</a></li>
<li class="mw-empty-elt">
</ul>
<h4><span class="mw-headline" id="WiFi_partially_looses_network_connectivity_every_1-2_hours">WiFi partially looses network connectivity every 1-2 hours</span></h4>
<p>With some WiFi routers, the network connection might get partially lost without any noticeable change in the network status. Existing connections (e.g. ssh sessions, Zoom videocalls) keep working, but loading new web pages or even pinging the gateway do not work anymore. Restarting the network fixes the problem, which however reappears after 1-2 ours.
</p>
<p>The issue can be fixed definitively by downgrading the WiFi card firmware as explained <a rel="nofollow"  href="https://bbs.archlinux.org/viewtopic.php?id=254362">in post #17 of this forum thread</a>. The downgrade must be repeated every time the linux-firmware package is upgraded.
</p>
<h4>
<span id="Bluetooth_disappears_.28after_suspend.3F.29"></span><span class="mw-headline" id="Bluetooth_disappears_(after_suspend?)">Bluetooth disappears (after suspend?)</span>
</h4>
<p>Possibly related to the previous instability issue, sometimes the adapter seems to completely disappear.  As reported <a rel="nofollow"  href="https://www.dell.com/community/XPS/XPS-15-9570-Bluetooth-disappearing/td-p/6192457">here</a> (thanks <a rel="nofollow"  href="https://www.dell.com/community/user/viewprofilepage/user-id/3517956">w.v.w.</a>, you can likely fix this by manually upgrading the firmware (to something newer than what's in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span>:
</p>
<p>1. Double check adapter (e.g. QCA6174, below)
</p>
<pre> $ lspci | grep Network
 3b:00.0 Network controller: Qualcomm Atheros QCA6174 802.11ac Wireless Network Adapter (rev 32)
</pre>
<p>2. Confirm hardware and current firmware version (e.g. hw3.2, firmware RM.4.4.1.c3-00013-QCARMSWPZ-1, below)
</p>
<pre> $ journalctl -b | grep ath10k | egrep 'firmware|qca'
 kernel: ath10k_pci 0000:3b:00.0: qca6174 hw3.2 target 0x05030000 chip_id 0x00340aff sub 1a56:1535
 kernel: ath10k_pci 0000:3b:00.0: firmware ver RM.4.4.1.c3-00013-QCARMSWPZ-1 api 6 features wowlan,ignore-otp,no-4addr-pad,raw-mode,mfp crc32 fc0096a8
</pre>
<p>3. Follow the instructions at <a rel="nofollow"  href="https://wireless.wiki.kernel.org/wiki/users/Drivers/ath10k/firmware">https://wireless.wiki.kernel.org/wiki/users/Drivers/ath10k/firmware</a>
</p>
<p>e.g. for the above adapter, download the latest firmware from <a rel="nofollow"  href="https://github.com/kvalo/ath10k-firmware/tree/master/QCA6174/hw3.0">https://github.com/kvalo/ath10k-firmware/tree/master/QCA6174/hw3.0</a> and
</p>
<pre> $ cd /lib/firmware/ath10k/QCA6174/hw3.0
 $ sudo cp firmware-6.bin firmware-6.bin.bak
 $ sudo cp ~/Downloads/firmware-6.bin_RM.4.4.1.c3-00013-QCARMSWPZ-1 firmware-6.bin
</pre>
<p>Either <code>sudo rmmod ath10k_core ath10k_pci &amp;&amp; sudo modprobe ath10k_pci</code> (may not work, check dmesg) or reboot.
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="Touchpad_and_Touchscreen">Touchpad and Touchscreen</span></h2>
<p>Wacom touchscreen and Synaptics touchpad:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ xinput</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">⎡ Virtual core pointer                          id=2    [master pointer  (3)]
⎜   ↳ Virtual core XTEST pointer                id=4    [slave  pointer  (2)]
⎜   ↳ SYNA2393:00 06CB:7A13 Touchpad            id=16   [slave  pointer  (2)]
⎜   ↳ Wacom HID 488F Finger                     id=15   [slave  pointer  (2)]
⎣ Virtual core keyboard                         id=3    [master keyboard (2)]
[truncated]</pre>
<p>Both are i2c devices:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ udevadm info /dev/input/mouse3 # touchscreen</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">P: /devices/pci0000:00/0000:00:15.0/i2c_designware.0/i2c-10/i2c-WCOM488F:00/0018:056A:488F.0006/input/input47/mouse3
N: input/mouse3
L: 0
E: DEVPATH=/devices/pci0000:00/0000:00:15.0/i2c_designware.0/i2c-10/i2c-WCOM488F:00/0018:056A:488F.0006/input/input47/mouse3
E: DEVNAME=/dev/input/mouse3
E: MAJOR=13
E: MINOR=35
E: SUBSYSTEM=input
E: USEC_INITIALIZED=5501073
E: ID_INPUT=1
E: ID_INPUT_TOUCHSCREEN=1
E: ID_PATH=pci-0000:00:15.0-platform-i2c_designware.0
E: ID_PATH_TAG=pci-0000_00_15_0-platform-i2c_designware_0</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ udevadm info /dev/input/mouse6 # touchpad</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">P: /devices/pci0000:00/0000:00:15.1/i2c_designware.1/i2c-11/i2c-SYNA2393:00/0018:06CB:7A13.0007/input/input38/mouse6
N: input/mouse6
L: 0
S: input/by-path/pci-0000:00:15.1-platform-i2c_designware.1-mouse
E: DEVPATH=/devices/pci0000:00/0000:00:15.1/i2c_designware.1/i2c-11/i2c-SYNA2393:00/0018:06CB:7A13.0007/input/input38/mouse6
E: DEVNAME=/dev/input/mouse6
E: MAJOR=13
E: MINOR=38
E: SUBSYSTEM=input
E: USEC_INITIALIZED=4683741
E: ID_INPUT=1
E: ID_INPUT_TOUCHPAD=1
E: ID_SERIAL=noserial
E: ID_PATH=pci-0000:00:15.1-platform-i2c_designware.1
E: ID_PATH_TAG=pci-0000_00_15_1-platform-i2c_designware_1
E: DEVLINKS=/dev/input/by-path/pci-0000:00:15.1-platform-i2c_designware.1-mouse</pre>
<p>If you experience problems with the touch pad it might be worth disabling psmouse
</p>
<h2><span class="mw-headline" id="Thunderbolt_docks">Thunderbolt docks</span></h2>
<h3><span class="mw-headline" id="TB16">TB16</span></h3>
<p>TB16 works fine if either Thunderbolt security is disabled in the BIOS or using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=bolt">bolt</a></span> to temporarily authorize or permanently enroll Thunderbolt devices with Thunderbolt security activated.  Various quirks are detailed on the <a href="../wiki/Dell_TB16.html" title="Dell TB16">Dell TB16</a> page.
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="EFI_firmware_updates">EFI firmware updates</span></h2>
<p>They are 2 main ways to update efi firmware:
</p>
<ul>
<li>through running linux-tossession with <a href="../wiki/Fwupd.html" title="Fwupd">Fwupd</a>
</li>
<li>through UEFI</li>
</ul>
<h3><span class="mw-headline" id="UEFI_2">UEFI</span></h3>
<p>Firmware images can be found at <a rel="nofollow"  href="https://www.dell.com/support/home/us/wiki/04/product-support/product/xps-15-9570-laptop/drivers">Dell support page</a> as <code>XPS_15_9570_X.Y.Z.exe</code> files.
In order to install:
</p>
<ul>
<li>Download the desired firmware from section "Dell XPS 15 9570 System BIOS"</li>
<li>Save it in <code>/boot/EFI/Dell/Bios/</code> (this path may vary, depending on your installation)</li>
<li>Reboot the system, and enter the boot menu by pressing repeatedly <code>F12</code> on Dell logo</li>
<li>Choose "Bios Flash Update"</li>
<li>Select the file previously saved, and start the process</li>
</ul>
<p>The process will take about five minutes, during which the system will have some reboots and push fans at maximum speed. Finally the system will reboot normally.
</p>
<h2><span class="mw-headline" id="Thermal_management">Thermal management</span></h2>
<p>Thermal design is poor in the 9570, primarily due to higher-end chips being used inside the original system design without compensating for extra heat.  This impacts numerous areas:
</p>
<ol>
<li>
<b>Performance</b>: at higher temperatures, CPU cores are throttled down to avoid damage.  At best your system will not run as fast as it can, and at worst (and quite commonly), slower than cheaper chips and with sluggish performance.</li>
<li>
<b>Battery life</b> is unnecessarily decreased.</li>
<li>
<b>System longevity</b>: running at constantly high temperatures will negatively impact equipment lifetime.</li>
<li>
<b>User discomfort</b>: uncomfortable heat and uncomfortable fan noise.</li>
</ol>
<p>Fortunately these can all be improved significantly to get your system running powerfully and quietly.
</p>
<h3><span class="mw-headline" id="Diagnosis">Diagnosis</span></h3>
<p>You probably have a lot of dmesg output like this (for all CPUs), even with fairly light usage:
</p>
<pre> kernel: CPU8: Package temperature above threshold, cpu clock throttled (total events = 8451)
 kernel: CPU8: Package temperature/speed normal
</pre>
<p>Use <a href="../wiki/Lm_sensors.html" title="Lm sensors">lm_sensors</a> and do some <a href="../wiki/Stress_testing.html" title="Stress testing">stress testing</a> (with <code>stress</code> and <code>mprime</code>) to see what's happening with CPU core temperatures and fanspeed under different loads.
</p>
<h3><span class="mw-headline" id="Undervolting">Undervolting</span></h3>
<p>See <a href="../wiki/Undervolting_CPU.html" title="Undervolting CPU">Undervolting CPU</a> on the wiki.  Reduces heat and extends battery life.
</p>
<p>Possible configurations for <code>/etc/intel-undervolt.conf</code>:
</p>
<ol><li>i9-8950HK* (last updated 2019-03-30)</li></ol>
<pre> undervolt 0 'CPU' -140
 undervolt 1 'GPU' -75
</pre>
<pre> * Tested extensively for moderate use.  Was not stress tested for &gt; 24 hours.  Anecdotal reports of up to -200.
</pre>
<p>This has a more minor impact than repasting but is significantly easier to do.
</p>
<h3>
<span id="Repasting_.26_padding"></span><span class="mw-headline" id="Repasting_&amp;_padding">Repasting &amp; padding</span>
</h3>
<p>Significant improvements are possible by replacing the thermal grease used by Dell with better options available from Amazon, and adding some extra thermal padding.  This might sound overwhelming but is well worth the effort, especially for newer CPUs. If you can't do this yourself consider finding a shop / technician who can do this for you.  See the following article as the user comments below it for more info:
</p>
<ul>
<li><a rel="nofollow"  href="https://www.ultrabookreview.com/14875-fix-throttling-xps-15/">UltraBookReview: How to Fix Throttling on the Dell XPS 15 9570 / 9560</a></li>
<li>
<a rel="nofollow"  href="https://photos.google.com/share/AF1QipMv5n4GppVgSUNEuU-Ie9VOHd0sAFAe5U57l7vsOKuAiPZpLeZn1tSBYpmrNzpFpw/photo/AF1QipPi-eGtEStq0uF4Shle0FE_OgbEDeeNtuF0KqLR?key=Y0pJUEtYTmp5SUhteGEtTGlZa0p3cVFVT2dyNmtB">Picture of 9570 VRMs</a> - from comments of the above article</li>
</ul>
<h3><span class="mw-headline" id="Results">Results</span></h3>
<p>According to the author of the UltraBookReview article above:
</p>
<p><q>Undervolting seems to reduce temps at max load by 7-10C, while repasting seems to reduce temps by between 4-10C depending on your original paste job and paste used.</q>
</p>
<p>From <a rel="nofollow"  href="https://bbs.archlinux.org/viewtopic.php?pid=1839474#p1839474">this forum post</a>, much lower/softer fan speeds were needed to maintain the same temperatures, and temperature was a few degrees lower under similar loads.  Fans were on less often and for less time when they were.  Throttling was less prevalent and less severe.
</p>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../wiki/Category:Dell.html" title="Category:Dell">Dell</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../wiki/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li></ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dell_XPS_15_9570&amp;oldid=614894">https://wiki.archlinux.org/index.php?title=Dell_XPS_15_9570&amp;oldid=614894</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 22 May 2020, at 08:27.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../wiki/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../wiki/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../wiki/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



