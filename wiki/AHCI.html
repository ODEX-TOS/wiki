<!--
    title: AHCI
    description: Migration of AHCI from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-28T17:58:55.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">AHCI</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<p><a href="https://en.wikipedia.org/wiki/AHCI"  title="wikipedia:AHCI">AHCI</a> (Advanced Host Controller Interface) is the native work mode for SATA drives. AHCI has two main benefits: support for hot pluggable SATA drives (mimicking USB drives' behavior) and <a href="https://en.wikipedia.org/wiki/Native_Command_Queuing"  title="wikipedia:Native Command Queuing">Native Command Queuing</a> (NCQ). It has been present in the Linux kernel since version 2.6.19 and will be loaded automatically in current TOS kernel.   
</p>
<h2><span class="mw-headline" id="Configure_from_BIOS">Configure from BIOS</span></h2>
<p>If your BIOS set SATA as legacy/parallel ATA, you can access BIOS setting depends on the motherboard; usually, <code>Del</code> is used to display the menu.
</p>
<p>Once the BIOS options are available, search for parameters resembling:
</p>
<pre>Enable SATA as: IDE/AHCI
</pre>
<p>or:
</p>
<pre>SATA: PATA Emulation/Native/Enhanced
</pre>
<p>Choose <code>AHCI</code> or <code>Native</code>, save the settings and exit the BIOS. Consult the motherboard's manual if it's not clear which of the modes is AHCI, since the naming can vary.
</p>
<p>After altering and saving the BIOS settings, Linux should load the AHCI driver on the next boot. <code>dmesg</code>'s output should confirm this:
</p>
<pre>SCSI subsystem initialized
libata version 3.00 loaded.
ahci 0000:00:1f.2: version 3.0
ahci 0000:00:1f.2: PCI INT B -&gt; GSI 19 (level, low) -&gt; IRQ 19
ahci 0000:00:1f.2: irq 764 for MSI/MSI-X
ahci 0000:00:1f.2: AHCI 0001.0200 32 slots 6 ports 3 Gbps 0x3f impl SATA mode
ahci 0000:00:1f.2: flags: 64bit ncq sntf stag pm led clo pmp pio slum part ems 
ahci 0000:00:1f.2: setting latency timer to 64
scsi0 : ahci
scsi1 : ahci
scsi2 : ahci
scsi3 : ahci
scsi4 : ahci
scsi5 : ahci
</pre>
<p>and for NCQ:
</p>
<pre>ata2.00: 625142448 sectors, multi 16: LBA48 NCQ (depth 31/32)
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>It is possible that the AHCI module is not loaded automatically if SATA configuration is switched from IDE to AHCI after installing TOS.
In such case, an error message will appear at early boot indicating that the root partition was not found.
</p>
<p>If that happens, the <code>failsafe</code> boot option should still work fine.
Once started in failsafe mode, you have to run <a href="../wiki/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> to re-generate initramfs images.
</p>
</div></div>
		
		<div id="catlinks"  data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../wiki/Category:Storage.html" title="Category:Storage">Storage</a></li></ul>
</div></div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=AHCI&amp;oldid=573461">https://wiki.archlinux.org/index.php?title=AHCI&amp;oldid=573461</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 18 May 2019, at 10:22.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../wiki/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../wiki/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../wiki/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



