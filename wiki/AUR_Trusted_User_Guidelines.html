<!--
    title: AUR_Trusted_User_Guidelines
    description: Migration of AUR_Trusted_User_Guidelines from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-28T17:58:55.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">AUR Trusted User Guidelines</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../wiki/TOS_User_Repository.html" title="TOS User Repository">TOS User Repository</a></li>
</ul>
</div>
<p><b>Trusted Users (TU)</b> are members of the community charged with keeping the AUR in working order. They maintain popular packages (<a rel="nofollow"  href="https://mailman.archlinux.org/pipermail/aur-general/2010-September/010649.html">communicating with and sending patches upstream as needed</a>), and vote in administrative matters. A TU is elected from active community members by current TUs in a democratic process. TUs are the only members who have a final say in the direction of the AUR.
</p>
<p>The TUs are governed using the <a rel="nofollow"  href="https://aur.archlinux.org/trusted-user/TUbylaws.html">TU bylaws</a>
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#TODO_list_for_new_Trusted_Users"><span >1</span> <span >TODO list for new Trusted Users</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#The_TU_and_the_AUR"><span >2</span> <span >The TU and the AUR</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Rewriting_git_history"><span >2.1</span> <span >Rewriting git history</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#The_TU_and_%5Bcommunity%5D,_Guidelines_for_Package_Maintenance"><span >3</span> <span >The TU and [community], Guidelines for Package Maintenance</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Rules_for_Packages_Entering_the_%5Bcommunity%5D_Repo"><span >3.1</span> <span >Rules for Packages Entering the [community] Repo</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Accessing_and_Updating_the_Repository"><span >3.2</span> <span >Accessing and Updating the Repository</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Disowning_packages"><span >3.3</span> <span >Disowning packages</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Moving_packages_from_unsupported_to_%5Bcommunity%5D"><span >3.4</span> <span >Moving packages from unsupported to [community]</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Moving_packages_from_%5Bcommunity%5D_to_unsupported"><span >3.5</span> <span >Moving packages from [community] to unsupported</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Moving_packages_from_%5Bcommunity-testing%5D_to_%5Bcommunity%5D"><span >3.6</span> <span >Moving packages from [community-testing] to [community]</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Deleting_packages_from_unsupported"><span >3.7</span> <span >Deleting packages from unsupported</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Remote_build_on_PKGBUILD.com"><span >3.8</span> <span >Remote build on PKGBUILD.com</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#TODO_list_retiring_a_Trusted_User"><span >4</span> <span >TODO list retiring a Trusted User</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#See_also"><span >5</span> <span >See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="TODO_list_for_new_Trusted_Users">TODO list for new Trusted Users</span></h2>
<ol>
<li>Read this entire wiki article.</li>
<li>Read the <a rel="nofollow"  href="https://aur.archlinux.org/trusted-user/TUbylaws.html">TU Bylaws</a>.</li>
<li>Make sure your account details on the <a href="../wiki/TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> are up-to-date.</li>
<li>Add yourself to the <a href="../wiki/Trusted_Users.html" title="Trusted Users">Trusted Users</a> page.</li>
<li>Subscribe to the public mailing list for TOS Linux development, <a rel="nofollow"  href="https://lists.archlinux.org/listinfo/arch-dev-public">arch-dev-public</a>.</li>
<li>Request subscription to the internal trusted user mailing list.</li>
<li>Remind a <a rel="nofollow"  href="https://bbs.archlinux.org/userlist.php?username=&amp;show_group=1&amp;sort_by=username&amp;sort_dir=ASC&amp;search=Submit">BBS admin</a> to change your account on forums.</li>
<li>Ask some TU for the #archlinux-tu@freenode key and hang out with us in the channel. You do not have to do this, but it would be neat since this is where most dark secrets are spilled and where many new ideas are conceived.
<ul>
<li>If you need a bouncer, ask heftig for a <a href="../wiki/Matrix.html" title="Matrix">Matrix</a> invite, or execute <code>givemequassel</code> on the <i>soyuz.archlinux.org</i> server, then login using <a href="../wiki/Quassel.html" title="Quassel">Quassel</a>.</li>
<li>Once in the channel, if you want an @archlinux/trusteduser/* cloak ask our <a rel="nofollow"  href="https://freenode.net/groupreg#two-types-of-group-contacts-exist-for-freenode">group contact</a>, ioni, to get you one.</li>
</ul>
</li>
<li>Create a PGP key for <a href="../wiki/Pacman/Package_signing.html" class="mw-redirect" title="Package signing">package signing</a> or use your existing PGP key. Make sure the key also contains an encryption subkey so you can receive encrypted verification tokens.</li>
<li>Send a signed email to Florian Pritz (bluewind@xinu.at) or Bartłomiej Piotrowski (bpiotrowski@archlinux.org):
<ul>
<li>Attach one SSH public key. If you do not have one, use <code>ssh-keygen</code> to generate one. Check the <a href="../wiki/SSH_keys.html" class="mw-redirect" title="Using SSH Keys">Using SSH Keys</a> wiki page for more information about SSH keys.</li>
<li>Ask him to whitelist you from arch-dev-public.</li>
<li>Tell him if you want an @archlinux.org email.</li>
<li>Preferred username and e-mail address which initial password should be sent to in order to access dev interface (archweb). If you already have an account, ask to be added to the Trusted Users group.</li>
</ul>
</li>
<li>Ask your sponsor:
<ul>
<li>to give you TU status on the AUR.</li>
<li>to open a new task in the "Keyring" project of the bug tracker following the instructions in <a rel="nofollow"  href="https://lists.archlinux.org/pipermail/arch-dev-public/2013-September/025456.html">this message</a> in order to have your PGP key signed by three master key holders.</li>
</ul>
</li>
<li>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=devtools">devtools</a></span> package.</li>
<li>
<a href="../wiki/AUR_submission_guidelines.html#Authentication" title="AUR submission guidelines">Configure your private ssh key</a> for <code>orion.archlinux.org</code> and <code>repos.archlinux.org</code> hosts.</li>
<li>Ssh to yourname@orion.archlinux.org (once you have permissions).</li>
<li>If you are not upgraded to a Trusted User group on bug tracker in two days, report this as a bug to arch-dev-public.</li>
<li>Start contributing!</li>
</ol>
<h2><span class="mw-headline" id="The_TU_and_the_AUR">The TU and the AUR</span></h2>
<p>The TUs should also make an effort to check package submissions in the <a href="../wiki/TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> for malicious code and good PKGBUILDing standards.  In around 80% of cases the PKGBUILDs in the UNSUPPORTED are very simple and can be quickly checked for sanity and malicious code by the TU team.
</p>
<p>TUs should also check PKGBUILDs for minor mistakes, suggest corrections and improvements.  The TU should endeavor to confirm that all pkgs follow the TOS Packaging Guidelines/Standards and in doing so share their skills with other package builders in an effort to raise the standard of package building across the distro.
</p>
<p>TUs are also in an excellent position to document recommended practices.
</p>
<h3><span class="mw-headline" id="Rewriting_git_history">Rewriting git history</span></h3>
<p>In some cases rewriting the history of an AUR repository is required, for example when a user inadvertently uses their real name in a published commit. This can be automated with <span class="plainlinks archwiki-template-man" title="$ man 1 git-filter-branch"><a rel="nofollow"  href="https://jlk.fjfi.cvut.cz/arch/manpages/man/git-filter-branch.1">git-filter-branch(1)</a></span>. 
</p>
<p>To force push the new history, forward the <code>AUR_OVERWRITE=1</code> environment variable to <span class="plainlinks archwiki-template-man" title="$ man 1 git-push"><a rel="nofollow"  href="https://jlk.fjfi.cvut.cz/arch/manpages/man/git-push.1">git-push(1)</a></span>. See <a rel="nofollow"  href="https://gitlab.archlinux.org/archlinux/aurweb/-/commit/c5302d3a33028f483cc2e01225226d4ae047dd4a">[1]</a> for details.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> It is recommended to create a backup of the repository before rewriting history.</div>
<dl><dt>Modify committer or author identity</dt></dl>
<p>Use <code>git filter-branch --env-filter</code> with the <code>GIT_AUTHOR_NAME</code>, <code>GIT_AUTHOR_EMAIL</code>, <code>GIT_COMMITTER_NAME</code> and <code>GIT_COMMITTER_EMAIL</code> <a href="../wiki/Environment_variables.html" title="Environment variables">environment variables</a>. For example:
</p>
<pre>git filter-branch --env-filter '
if test "$GIT_AUTHOR_EMAIL" = "lepetit@prince.com"; then
  GIT_AUTHOR_EMAIL=user@users.noreply.github.com
fi
if test "$GIT_AUTHOR_NAME" = "Antoine de Saint-Exupéry"; then
  GIT_AUTHOR_NAME=user
fi'</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <span class="plainlinks archwiki-template-man" title="$ man 1 git-log"><a rel="nofollow"  href="https://jlk.fjfi.cvut.cz/arch/manpages/man/git-log.1">git-log(1)</a></span> only displays the git <i>author</i> by default. Use <code>git log --pretty=fuller</code> to display the <i>author</i> and <i>committer</i>.</div>
<h2>
<span id="The_TU_and_.5Bcommunity.5D.2C_Guidelines_for_Package_Maintenance"></span><span class="mw-headline" id="The_TU_and_[community],_Guidelines_for_Package_Maintenance">The TU and [community], Guidelines for Package Maintenance</span>
</h2>
<h3>
<span id="Rules_for_Packages_Entering_the_.5Bcommunity.5D_Repo"></span><span class="mw-headline" id="Rules_for_Packages_Entering_the_[community]_Repo">Rules for Packages Entering the [community] Repo</span>
</h3>
<ul><li>A package must not already exist in any of the TOS Linux repositories. You should take necessary precautions to ensure no other packager is in the process of promoting the same package. Double-check the AUR package comments, read the latest subject headings in <a rel="nofollow"  href="https://mailman.archlinux.org/mailman/listinfo/aur-general">aur-general</a>, search <a rel="nofollow"  href="https://bugs.archlinux.org/index.php?project=0&amp;do=index&amp;switch=1">all projects in the bugtracker</a>, <a href="https://en.wikipedia.org/wiki/Grep"  title="wikipedia:Grep">grep</a> the <a rel="nofollow"  href="http://svnbook.red-bean.com/wiki/1.7/svn.ref.svn.c.log.html">Subversion log</a>, and send a quick message to the private TU <a href="../wiki/TOS_IRC_channels.html" class="mw-redirect" title="IRC channel">IRC channel</a>.</li></ul>
<ul><li>
<a href="../wiki/AUR_helpers.html#Pacman_wrappers" title="AUR helpers">Pacman wrappers</a>, as a special exception, will never be permitted. If wanting to otherwise add an <a href="../wiki/AUR_helpers.html" class="mw-redirect" title="AUR helper">AUR helper</a>, write an email to <code>arch-dev-public</code> with the proposed addition, and respect any objections provided by team members.</li></ul>
<ul><li>Only "popular" packages may enter the repo, as defined by 1% usage from <a rel="nofollow"  href="https://www.archlinux.de/?page=PackageStatistics">pkgstats</a> or 10 votes on the AUR.</li></ul>
<ul><li>Automatic exceptions to this rule are:
<ul>
<li>i18n packages</li>
<li>accessibility packages</li>
<li>drivers</li>
<li>dependencies of packages who satisfy the definition of popular, including makedeps and optdeps</li>
<li>packages that are part of a collection and are intended to be distributed together, provided a part of this collection satisfies the definition of popular</li>
</ul>
</li></ul>
<ul><li>Any additions not covered by the above criteria must first be proposed on the aur-general mailing list, explaining the reason for the exemption (e.g. renamed package, new package). The agreement of three other TUs is required for the package to be accepted into [community]. Proposed additions from TUs with large numbers of "non-popular" packages are more likely to be rejected.</li></ul>
<ul><li>TUs are strongly encouraged to move packages they currently maintain from [community] if they have low usage. No enforcement will be made, although resigning TUs packages may be filtered before adoption can occur.</li></ul>
<ul><li>It is good practice to always bump the <b>pkgrel</b> by <i>1</i> (in other words, set it to <i>n + 1</i>) when promoting a package from AUR. This is to facilitate automatic updates for those who already have the package installed, so that they may continue to receive updates from the official channel. Another positive effect of this is that users are not warned that their local copy is newer, as is the case if a packager does reset the <b>pkgrel</b> to <i>1</i>.</li></ul>
<h3><span class="mw-headline" id="Accessing_and_Updating_the_Repository">Accessing and Updating the Repository</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" ><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="../DeveloperWiki:HOWTO_Be_A_Packager.html" title="DeveloperWiki:HOWTO Be A Packager">DeveloperWiki:HOWTO Be A Packager</a>.</b><a href="../File:Merge-arrows-2.png" ><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> Duplicate with some minor differences (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:AUR_Trusted_User_Guidelines">Talk:AUR Trusted User Guidelines#</a>)</div>
</div>
<p>The [community] repository now uses <b>devtools</b> which is the same system used for uploading packages to [core] and [extra], except that it uses another server <code>orion.archlinux.org</code> instead of <code>gerolde.archlinux.org</code>. Thus most of the instructions in <a href="../DeveloperWiki:HOWTO_Be_A_Packager.html" title="DeveloperWiki:HOWTO Be A Packager">Packager Guide</a> work without any change. Information which is specific for the [community] repository (like changed URLs) have been put here. The devtools require packagers to <a href="../wiki/Makepkg.html#Packager_information" title="Makepkg">set the PACKAGER variable</a> in <code>makepkg.conf</code>.
</p>
<p>Initially you should do a <b>non-recursive checkout</b> of the [community] repository:
</p>
<pre>svn checkout -N svn+ssh://svn-community@repos.archlinux.org/srv/repos/svn-community/svn svn-community
</pre>
<p>This creates a directory named "svn-community" which contains nothing but a ".svn" folder.
</p>
<p>For <b>checking</b> out, <b>updating</b> all packages or <b>adding</b> a package see the <a href="../DeveloperWiki:HOWTO_Be_A_Packager.html" title="DeveloperWiki:HOWTO Be A Packager">Packager Guide</a>.
</p>
<p>To <b>remove</b> a package:
</p>
<pre>ssh orion.archlinux.org /community/db-repo-remove community arch pkgname
</pre>
<p>Here and in the following text, <i>arch</i> should be <i>x86_64</i> which is the only architecture supported by TOS Linux since <a rel="nofollow"  href="https://www.archlinux.org/news/the-end-of-i686-support/">i686 support has been deprecated</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you are editing packages of the <i>any</i> architecture you can simply run the x86_64 scripts which will also work.</div>
<p>When you are done with editing the PKGBUILD, etc., you should <b>commit</b> the changes (<code>svn commit</code>).
</p>
<p>Build the package with <code>mkarchroot</code> or the helper script <code>extra-x86_64-build</code>. If you want to upload to testing you also need to build with the testing script <code>testing-x86_64-build</code>.
</p>
<p>Sign the package with <code>gpg --detach-sign *.pkg.tar.xz</code>. If you are using a different PGP key for package signing you can add it to <code>~/.makepkg.conf</code> with <code>GPGKEY=&lt;identifier&gt;</code>.
</p>
<p>When you want to <b>release</b> a package, first copy the package along with its signatures  to the <i>staging/community</i> directory on <i>orion.archlinux.org</i> using <code>scp</code> and then <b>tag</b> the package by going to the <i>pkgname/trunk</i> directory and issuing <code>archrelease community-arch</code>. This makes an svn copy of the trunk entries in a directory named <i>community-x86_64</i> indicating that this package is in the community repository for that architecture. Note that the staging directory is different from the staging repository and every package needs to be uploaded to the staging directory. This process can be automated with the <code>communitypkg</code> script, see the summary below.
</p>
<p><b>Package update summary:</b>
</p>
<ul>
<li>
<b>Update</b> the package directory: <code>svn update some-package</code>.</li>
<li>
<b>Change</b> to the package trunk directory: <code>cd some-package/trunk</code>.</li>
<li>
<b>Edit</b> the PKGBUILD, make necessary changes, update hashes with <code>updpkgsums</code>.</li>
<li>
<b>Build</b> the package: <code>makechrootpkg</code> or <code>extra-x86_64-build</code>. It is <b>mandatory</b> to build in a <a href="../DeveloperWiki:Building_in_a_clean_chroot.html" title="DeveloperWiki:Building in a clean chroot">clean chroot</a>.</li>
<li>
<b><a href="../wiki/Namcap.html" title="Namcap">Namcap</a></b> the PKGBUILD and the binary <code>pkg.tar.gz</code>.</li>
<li>
<b>Commit</b>, <b>Sign</b>, <b>Copy</b> and <b>Tag</b> the package using <code>communitypkg "commit message"</code>. This automates the following:
<ul>
<li>
<b>Commit</b> the changes to trunk: <code>svn commit</code>.</li>
<li>
<b>Sign</b> the package: <code>gpg --detach-sign *.pkg.tar.xz</code>.</li>
<li>
<b>Copy</b> the package and its signature to <i>orion.archlinux.org</i>: <code>scp *.pkg.tar.xz *.pkg.tar.xz.sig orion.archlinux.org:staging/community/</code>.</li>
<li>
<b>Tag</b> the package: <code>archrelease community-x86_64</code>.</li>
</ul>
</li>
<li>
<b>Update</b> the repository: <code>ssh orion.archlinux.org /community/db-update</code>.</li>
</ul>
<p>Also see the <i>Miscellaneous</i> section in the <a href="../DeveloperWiki:HOWTO_Be_A_Packager.html" title="DeveloperWiki:HOWTO Be A Packager">Packager Guide</a> and <a href="../wiki/SSH_keys.html#ssh-agent" title="SSH keys">SSH keys#ssh-agent</a>. For the section <i>Avoid having to enter your password all the time</i> use <i>orion.archlinux.org</i> instead of <i>gerolde.archlinux.org</i>.
</p>
<h3><span class="mw-headline" id="Disowning_packages">Disowning packages</span></h3>
<p>If a TU cannot or does not want to maintain a package any longer, a notice should be posted to the AUR Mailing List, so another TU can
maintain it. A package can still be disowned even if no other TU wants to maintain it, but the TUs should try not to drop many packages (they should not take on more than they have time for). If a package has become obsolete or is not used any longer, it can be removed completely as well.
</p>
<p>If a package has been removed completely, it can be uploaded once again (fresh) to UNSUPPORTED, where a regular user can maintain the package instead of the TU.
</p>
<h3>
<span id="Moving_packages_from_unsupported_to_.5Bcommunity.5D"></span><span class="mw-headline" id="Moving_packages_from_unsupported_to_[community]">Moving packages from unsupported to [community]</span>
</h3>
<p>Follow the normal procedures for adding a package to community, but remember to delete the corresponding package from unsupported!
</p>
<h3>
<span id="Moving_packages_from_.5Bcommunity.5D_to_unsupported"></span><span class="mw-headline" id="Moving_packages_from_[community]_to_unsupported">Moving packages from [community] to unsupported</span>
</h3>
<p>Remove the package using the instructions above and upload your source to the AUR.
</p>
<h3>
<span id="Moving_packages_from_.5Bcommunity-testing.5D_to_.5Bcommunity.5D"></span><span class="mw-headline" id="Moving_packages_from_[community-testing]_to_[community]">Moving packages from [community-testing] to [community]</span>
</h3>
<pre>$ ssh repos.archlinux.org /community/db-move community-testing community &lt;package&gt;
</pre>
<h3><span class="mw-headline" id="Deleting_packages_from_unsupported">Deleting packages from unsupported</span></h3>
<p>There is no point in removing dummy packages, because they will be re-created in an attempt to track dependencies. If someone uploads a
real package then all dependents will point to the correct place.
</p>
<h3><span class="mw-headline" id="Remote_build_on_PKGBUILD.com">Remote build on PKGBUILD.com</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The following procedures defeats the Web Of Trust model: a user with root access to PKGBUILD.com could alter the package and/or the signature before it gets published.</div>
<p>Trusted users and developers can connect to <a rel="nofollow"  href="http://pkgbuild.com/">PKGBUILD.com</a> via SSH to, among others, build packages using the devtools.
This has numerous advantages over a local setup:
</p>
<ul>
<li>Builds are fast and network speed is high.</li>
<li>The environment needs setup only once.</li>
<li>Your local system need not be TOS Linux.</li>
</ul>
<p>The process is similar to that of a local setup with devtools.  Your GnuPG private is required for signing but you don't want to upload it to soyuz for obvious security reasons.  As such, you'll need to forward the GnuPG agent socket from your local machine to the server: this will allow you to sign packages on soyuz without communicating your key.  This also means that we need to disable the agent on the server before we can run anything.
</p>
<p>First, connect to soyuz and disable
</p>
<pre> $ ssh soyuz.archlinux.org
 $ systemctl --user mask gpg-agent.service
</pre>
<p>Make sure gpg-agent is not running (<code>systemctl --user stop gpg-agent.service</code>).  At this point, make sure that no sockets exist in the folder pointed by <code>gpgconf --list-dir socketdir</code>.  If they do, remove them or log out and in again.
If you have a custom $GNUPGHOME (eg. to move it to <code>~/.config/gnupg</code>), you'll need to unset that, as it is not possible in gnupg to set the homedir without setting the socketdir.
On soyuz, <i>StreamLocalBindUnlink yes</i> is set in <i>sshd_config</i>, therefore removing the sockets manually on logout is not necessary.
</p>
<p>While the PGP private keys remain on your local machine, the public keys <b>must</b> be on soyuz.  Export your public ring to soyuz, e.g. from you local machine
</p>
<pre> $ scp ~/.gnupg/pubring.gpg soyuz.archlinux.org:~/.gnupg/pubring.gpg
</pre>
<p>SSH is required to checkout and commit to the SVN repository.  You can either set up a new SSH key pair on the server (it's highly discouraged to put your local private key on soyuz for security reasons) or reuse your local keys via socket forwarding.  If you opt for the latter, make sure to disable ssh-agent on soyuz if you had enabled it previously (it's not running by default).
</p>
<p>Configure you build environment on soyuz:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.makepkg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PACKAGER="John Doe &lt;john@doe.example&gt;"
## Optional
PKGDEST="/home/johndoe/packages"
SRCDEST="/home/johndoe/sources"
SRCPKGDEST="/home/johndoe/srcpackages"
LOGDEST="/home/johndoe/logs"
## If your PGP key is not the default, specify the right fingerprint:
GPGKEY="ABCD1234..."</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Forwarding your gpg-agent socket to a remote machine makes it possible for anyone with root access to that system to use your unlocked GPG credentials.  To circumvent this issue, we need to disable passphrase caching.</div>
<p>Disable passphrase caching with the following settings:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">gpg-agent.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default-cache-ttl 0
max-cache-ttl 0
</pre>
<p>Because we will want to keep our usual GPG agent running with its current settings, we are going to run another GPG agent dedicated to the task at hand.  Create a <code>~/.gnupg-archlinux</code> folder and symlink everything from <code>~/.gnupg</code> there, except <code>~/.gnupg/gpg-agent.conf</code>. Configure the new GPG agent:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg-archlinux</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">extra-socket /home/doe/.gnupg-archlinux/S.gpg-agent.extra
default-cache-ttl 0
max-cache-ttl 0
pinentry-program /usr/bin/pinentry-gtk-2
</pre>
<p>The <code>gpg-agent-extra.socket</code> will be forwarded to PKGBUILD.com.  
</p>
<p>Start the dedicated agent with
</p>
<pre> $ gpg-agent --homedir ~/.gnupg-archlinux-tos--daemon
</pre>
<p>Connect with:
</p>
<pre> $ ssh -R $REMOTE_SSH_AUTH_SOCK:$SSH_AUTH_SOCK -R /run/user/$REMOTE_UID/gnupg/S.gpg-agent:/home/doe/.gnupg-archlinux/S.gpg-agent.extra soyuz.archlinux.org
</pre>
<p>or, if using GnuPG as your SSH agent:
</p>
<pre> $ ssh -R /run/user/$REMOTE_UID/gnupg/S.gpg-agent.ssh:/run/user/$LOCAL_UID/gnupg/S.gpg-agent.ssh -R /run/user/$REMOTE_UID/gnupg/S.gpg-agent:/home/doe/.gnupg-archlinux/S.gpg-agent.extra soyuz.archlinux.org
</pre>
<p>Replace <i>$REMOTE_UID</i> and <i>$LOCAL_UID</i> by your user identifier as returned by <code>id -u</code> on soyuz and locally, respectively.
If using ssh-agent, replace <i>$REMOTE_SSH_AUTH_SOCK</i> by the path to the SSH socket on the remote host (it can be anything).
</p>
<p>You can make the forwarding permanent for that host.  For instance with gpg-agent.ssh:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.ssh/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Host soyuz.archlinux.org
  RemoteForward /run/user/$REMOTE_UID/gnupg/S.gpg-agent /run/user/$LOCAL_UID/gnupg/S.gpg-agent.extra
  RemoteForward /run/user/$REMOTE_UID/gnupg/S.gpg-agent.ssh /run/user/$LOCAL_UID/gnupg/S.gpg-agent.ssh
</pre>
<p>Again, replace <i>$REMOTE_UID</i> and <i>$LOCAL_UID</i> with their respective values.
</p>
<p>From then on, the procedure should be exactly the same as a local build:
</p>
<pre> $ ssh soyuz.archlinux.org
 $ svn checkout -N svn+<a rel="nofollow"  href="ssh://svn-community@repos.archlinux.org/srv/repos/svn-community/svn">ssh://svn-community@repos.archlinux.org/srv/repos/svn-community/svn</a> svn-community
 $ ...
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> pinentry-curses might not work with socket forwarding.  If it fails for you, try using a different pinentry.</div>
<h2><span class="mw-headline" id="TODO_list_retiring_a_Trusted_User">TODO list retiring a Trusted User</span></h2>
<p>When a TU resigns the following list has be followed, these steps do not apply when a TU resigns but is still a Developer.
</p>
<ol>
<li>All packages packaged by the retiree should be resigned (so rebuild). Packages packaged by the retiree can be found in TOSweb <a rel="nofollow"  href="https://www.archlinux.org/packages/?sort=&amp;q=&amp;packager=%24packager&amp;flagged=">https://www.archlinux.org/packages/?sort=&amp;q=&amp;packager=$packager&amp;flagged=</a> where packager is the username on TOSweb.</li>
<li>The account of the retiree should be disabled on TOSweb and added to the 'Retired Trusted users' group. The retiree should be removed from the 'Trusted Users' and the repository permissions should be reduced to none.</li>
<li>The shell access to our servers should be disabled. (notably repos.archlinux.org, pkgbuild.com)</li>
<li>The GPG key should be removed and a new archlinux-keyring package should be pushed to the repos. Create bug reports in the keyring project to remove the keys of the retired Trusted Users.</li>
<li>Remove the TU group from their AUR account.</li>
</ol>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a href="../wiki/DeveloperWiki.html#Packaging_Guidelines" title="DeveloperWiki">DeveloperWiki#Packaging Guidelines</a></li></ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../wiki/Category:Package_development.html" title="Category:Package development">Package development</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../wiki/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=AUR_Trusted_User_Guidelines&amp;oldid=615692">https://wiki.archlinux.org/index.php?title=AUR_Trusted_User_Guidelines&amp;oldid=615692</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 25 May 2020, at 08:47.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../wiki/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../wiki/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../wiki/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



