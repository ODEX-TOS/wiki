<!--
    title: Getty
    description: Migration of Getty from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-28T17:58:55.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">getty</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<p><span></span>
</p>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="../wiki/Display_manager.html" title="Display manager">Display manager</a></li>
</ul>
</div>
<p>A <a href="https://en.wikipedia.org/wiki/getty_(Unix)"  title="w:getty (Unix)">getty</a> is the generic name for a program which manages a terminal line and its connected terminal.  Its purpose is to protect the system from unauthorized access.  Generally, each getty process is started by <a href="../wiki/Systemd.html" title="Systemd">systemd</a> and manages a single terminal line. 
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span >1</span> <span >Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Add_additional_virtual_consoles"><span >2</span> <span >Add additional virtual consoles</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Automatic_login_to_virtual_console"><span >3</span> <span >Automatic login to virtual console</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Virtual_console"><span >3.1</span> <span >Virtual console</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Serial_console"><span >3.2</span> <span >Serial console</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Nspawn_console"><span >3.3</span> <span >Nspawn console</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Prompt_only_the_password_for_a_default_user_in_virtual_console_login"><span >4</span> <span >Prompt only the password for a default user in virtual console login</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Have_boot_messages_stay_on_tty1"><span >5</span> <span >Have boot messages stay on tty1</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#See_also"><span >6</span> <span >See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" ><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../wiki/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" ><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Description of TTY settings and "staircase effect" is out of context here. The default number of TTYs can be moved to <a href="#Add_additional_virtual_consoles">#Add additional virtual consoles</a> as it does not depend on agetty. (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:Getty">Talk:Getty#</a>)</div>
</div>
<p><i>agetty</i> is the default getty in TOS Linux, as part of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=util-linux">util-linux</a></span> package. It modifies the TTY settings while waiting for a login so that the newlines are not translated to CR-LFs. This tends to cause a "staircase effect" for messages printed to the console. Agetty manages virtual consoles and six of these virtual consoles are provided by default in TOS Linux. They are usually accessible by pressing <code>Ctrl+Alt+F1</code> through <code>Ctrl+Alt+F6</code>.
</p>
<p>Alternatives include:
</p>
<ul><li>
<b>mingetty</b> — A minimal getty which allows automatic logins.</li></ul>
<dl><dd>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/mingetty/">mingetty</a></span><sup><small>AUR</small></sup> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/mingetty/">mingetty</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>fbgetty</b> — A console getty like mingetty, which supports framebuffers.</li></ul>
<dl><dd>
<a rel="nofollow"  href="http://projects.meuh.org/fbgetty/">http://projects.meuh.org/fbgetty/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/fbgetty/">fbgetty</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>mgetty</b> — A versatile program to handle all aspects of a modem under Unix.</li></ul>
<dl><dd>
<a rel="nofollow"  href="http://mgetty.greenie.net/">http://mgetty.greenie.net/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/mgetty/">mgetty</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2><span class="mw-headline" id="Add_additional_virtual_consoles">Add additional virtual consoles</span></h2>
<p>Open the file <code>/etc/systemd/logind.conf</code> and set the option <b>NAutoVTs=6</b> to the number of virtual terminals that you want at boot.
</p>
<p>If you wish to start one temporarily, you can start a getty service at the desired TTY by typing:
</p>
<pre>$ systemctl start getty@ttyN.service
</pre>
<h2><span class="mw-headline" id="Automatic_login_to_virtual_console">Automatic login to virtual console</span></h2>
<p>Configuration relies on systemd <a href="../wiki/Systemd.html#Editing_provided_units" title="Systemd">drop-in files</a> to override the default parameters passed to <i>agetty</i>.
</p>
<p>Configuration differs for virtual versus serial consoles. In most cases, you want to set up automatic login on a virtual console, (whose device name is <code>tty<i>N</i></code>, where <code><i>N</i></code> is a number). The configuration of automatic login for serial consoles will be slightly different. Device names of the serial consoles look like <code>ttyS<i>N</i></code>, where <code><i>N</i></code> is a number.
</p>
<h3><span class="mw-headline" id="Virtual_console">Virtual console</span></h3>
<p><a href="../wiki/Systemd.html#Editing_provided_units" title="Systemd">Edit the provided unit</a> either manually by creating the following drop-in snippet, or by running <code>systemctl edit getty@tty1</code> and pasting its content:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/getty@tty1.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=-/usr/bin/agetty --autologin <i>username</i> --noclear %I $TERM</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The option <code>Type=idle</code> found in the default <code>getty@.service</code> will delay the service startup until all jobs (state change requests to units) are completed in order to avoid polluting the login prompt with boot-up messages. When <a href="../wiki/Xinit.html#Autostart_X_at_login" class="mw-redirect" title="Start X at login">starting X automatically</a>, it may be useful to start <code>getty@tty1.service</code> immediately by adding <code>Type=simple</code> into the <a href="../wiki/Systemd.html#Editing_provided_units" class="mw-redirect" title="Drop-in snippet">drop-in snippet</a>. Both the init system and <i>startx</i> can be <a href="../wiki/Silent_boot.html" title="Silent boot">silenced</a> to avoid the interleaving of their messages during boot-up.</div>
<p>If you don't want full automatic login, but also don't want to type your username, you can replace <code>--autologin <i>username</i></code> with <code>--skip-login --login-options <i>username</i></code>.
</p>
<p>If you want to use a <i>tty</i> other than <i>tty1</i>, see <a href="../wiki/Systemd/FAQ.html#How_do_I_change_the_default_number_of_gettys.3F" class="mw-redirect" title="Systemd FAQ">systemd FAQ</a>.
</p>
<h3><span class="mw-headline" id="Serial_console">Serial console</span></h3>
<p>Create the following file (and leading directories):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/serial-getty@ttyS0.service.d/autologin.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=-/usr/bin/agetty --autologin <i>username</i> -s %I 115200,38400,9600 vt102</pre>
<h3><span class="mw-headline" id="Nspawn_console">Nspawn console</span></h3>
<p>To configure auto-login for a <a href="../wiki/Systemd-nspawn.html" title="Systemd-nspawn">systemd-nspawn</a> container, override <code>console-getty.service</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/console-getty.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=-/sbin/agetty --noclear --autologin <i>username</i> --keep-baud console 115200,38400,9600 $TERM</pre>
<p>If <code>machinectl login <i>my-container</i></code> method is used to access the container, also add <code>--autologin <i>username</i></code> to <code>container-getty@.service</code> template that manages <code>pts/[0-9]</code> pseudo ttys:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/container-getty@.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=-/sbin/agetty --noclear --autologin <i>username</i> --keep-baud pts/%I 115200,38400,9600 $TERM</pre>
<h2><span class="mw-headline" id="Prompt_only_the_password_for_a_default_user_in_virtual_console_login">Prompt only the password for a default user in virtual console login</span></h2>
<p>Getty can be used to login from a virtual console with a default user, typing the password but without needing to insert the username. For instance, to prompt the password for <code><i>username</i></code> on <code>tty1</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/getty@tty1.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=-/sbin/agetty -n -o <i>username</i> %I</pre>
<p>and then
</p>
<pre># systemctl enable getty@tty1
</pre>
<h2><span class="mw-headline" id="Have_boot_messages_stay_on_tty1">Have boot messages stay on tty1</span></h2>
<p>By default, TOS has the <code>getty@tty1</code> service enabled. The service file already passes <code>--noclear</code>, which stops agetty from clearing the screen. However <a href="../wiki/Systemd.html" title="Systemd">systemd</a> clears the screen before starting it. To disable this behavior, create <code>/etc/systemd/system/getty@tty1.service.d/noclear.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/getty@tty1.service.d/noclear.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
TTYVTDisallocate=no</pre>
<p>This overrides only <code>TTYVTDisallocate</code> for <i>agetty</i> on TTY1, and leaves the global service file <code>/usr/lib/systemd/system/getty@.service</code> untouched. See <a href="../wiki/Systemd.html#Editing_provided_units" title="Systemd">Systemd#Editing provided units</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Make sure to remove <code>quiet</code> from the <a href="../wiki/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameters</a>.</li>
<li>Late KMS starting may cause the first few boot messages to clear. See <a href="../wiki/Kernel_mode_setting.html#Early_KMS_start" class="mw-redirect" title="KMS">KMS#Early KMS start</a> or <a href="../wiki/Kernel_mode_setting.html#Disabling_modesetting" class="mw-redirect" title="KMS">KMS#Disabling modesetting</a>.</li>
</ul>
</div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../wiki/Systemd.html#Change_default_target_to_boot_into" title="Systemd">Systemd#Change default target to boot into</a></li>
<li><a rel="nofollow"  href="http://www.linusakesson.net/programming/tty/">The TTY demystified</a></li>
<li><a href="https://en.wikipedia.org/wiki/Tty_(unix)"  title="wikipedia:Tty (unix)">Wikipedia:Tty (unix)</a></li>
</ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../wiki/Category:Boot_process.html" title="Category:Boot process">Boot process</a></li>
<li><a href="../wiki/Category:Linux_console.html" title="Category:Linux console">Linux console</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../wiki/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Getty&amp;oldid=598744">https://wiki.archlinux.org/index.php?title=Getty&amp;oldid=598744</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 23 February 2020, at 23:13.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../wiki/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../wiki/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../wiki/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



