<!--
    title: Ruby
    description: Migration of Ruby from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-28T17:44:33.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">Ruby</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<p>Ruby is a dynamic, interpreted, open source programming language with a focus on simplicity and productivity.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installing_Ruby"><span >1</span> <span >Installing Ruby</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Multiple_versions"><span >1.1</span> <span >Multiple versions</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Documentation"><span >1.2</span> <span >Documentation</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#JRuby"><span >1.3</span> <span >JRuby</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#RubyGems"><span >2</span> <span >RubyGems</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Setup"><span >2.1</span> <span >Setup</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Usage"><span >2.2</span> <span >Usage</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Installing_gems_per-user_or_system-wide"><span >2.3</span> <span >Installing gems per-user or system-wide</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Bundler"><span >2.4</span> <span >Bundler</span></a></li>
<li class="toclevel-2 tocsection-10">
<a href="#Managing_RubyGems_using_pacman"><span >2.5</span> <span >Managing RubyGems using pacman</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Quarry"><span >2.5.1</span> <span >Quarry</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#See_also"><span >3</span> <span >See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installing_Ruby">Installing Ruby</span></h2>
<p>For the latest version of Ruby, <a href="../Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ruby">ruby</a></span> package.
</p>
<p>To install IRB, <a href="../Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ruby-irb">ruby-irb</a></span> package.
</p>
<h3><span class="mw-headline" id="Multiple_versions">Multiple versions</span></h3>
<p>If you want to run multiple versions on the same system (e.g. 2.0.0-p0 and 1.9.3-p392), the easiest way is to use <a href="../RVM.html" title="RVM">RVM</a>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/chruby/">chruby</a></span><sup><small>AUR</small></sup> or <a href="../Rbenv.html" title="Rbenv">rbenv</a>.
</p>
<h3><span class="mw-headline" id="Documentation">Documentation</span></h3>
<p>To make documentation available through the <code>ri</code> command-line tool, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ruby-rdoc">ruby-rdoc</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ruby-docs">ruby-docs</a></span> for the documentation itself.
You can then query the docs with: <code>ri Array</code>, <code>ri Array.pop</code> etc. (much like man-pages)
</p>
<h3><span class="mw-headline" id="JRuby">JRuby</span></h3>
<p>The <a href="../Java.html" title="Java">Java</a> implementation of Ruby, <a href="https://en.wikipedia.org/wiki/JRuby"  title="wikipedia:JRuby">JRuby</a> can be installed with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=jruby">jruby</a></span> package.
</p>
<h2><span class="mw-headline" id="RubyGems">RubyGems</span></h2>
<p>RubyGems is a package manager for Ruby modules (called <i>gems</i>), somewhat comparable to what <a href="../Pacman.html" title="Pacman">pacman</a> is to TOS Linux. It can be installed with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=rubygems">rubygems</a></span> package, which is a dependency of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ruby">ruby</a></span>.
</p>
<h3><span class="mw-headline" id="Setup">Setup</span></h3>
<p><a href="../Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Append">Append</a> <code>$(ruby -e 'puts Gem.user_dir')/bin</code> to the <code>PATH</code> <a href="../Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> to allow RubyGems to be executed:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.profile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PATH="$PATH:$(ruby -e 'puts Gem.user_dir')/bin"</pre>
<p>This is required for executable gems to work without typing out the full location, although libraries will work without having to modify your path.
</p>
<p>You may want to append this variable to <code>.profile</code> instead:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.profile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PATH="$PATH:$(ruby -e 'puts Gem.user_dir')/bin"</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> After saving the changes, restart the terminal for changes to apply.</div>
<p>Use <code>gem env</code> to view the current RubyGems environment:
</p>
<pre>$ gem env
</pre>
<h3><span class="mw-headline" id="Usage">Usage</span></h3>
<p>To see what gems are installed:
</p>
<pre>$ gem list
</pre>
<p>To get information about a gem:
</p>
<pre>$ gem spec <i>gem_name</i>
</pre>
<p>By default, <code>gem list</code> and <code>gem spec</code> use the <code>--local</code> option, which forces <i>gem</i> to search only the local system. This can be overridden with the <code>--remote</code> flag. Thus, to search for the mysql2 gem:
</p>
<pre>$ gem list --remote mysql2
</pre>
<p>To install a gem:
</p>
<pre>$ gem install mysql2
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If RubyGems fails with a <a rel="nofollow"  href="https://help.rubygems.org/discussions/problems/31074-timeout-error">timeout error</a>, either <a href="../IPv6.html#Disable_IPv6" title="IPv6">disable IPv6</a> or <a href="../IPv6.html#Prefer_IPv4_over_IPv6" title="IPv6">prefer IPv4 over IPv6</a>.</div>
<p>The process can be sped up somewhat if you do not need local documentation:
</p>
<pre>$ gem install mysql2 --no-document
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This can be made the default option by configuring the following <code>~/.gemrc</code> file:
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gemrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">gem: --no-document
</pre>
</div>
<p>To update all installed gems:
</p>
<pre>$ gem update
</pre>
<h3><span class="mw-headline" id="Installing_gems_per-user_or_system-wide">Installing gems per-user or system-wide</span></h3>
<p>By default in TOS Linux, when running <code>gem</code>, gems are installed per-user (into <code>~/.gem/ruby/</code>), instead of system-wide (into <code>/usr/lib/ruby/gems/</code>). This is considered the best way to manage gems on TOS, because otherwise they might interfere with gems installed by Pacman.
</p>
<p>Gems can be installed system wide by running the <code>gem</code> command as root, appended with the <code>--no-user-install</code> flag. This flag can be set as default by replacing <code>--user-install</code> by <code>--no-user-install</code> in <code>/etc/gemrc</code> (system-wide) or <code>~/.gemrc</code> (per-user, overrides system-wide).
</p>
<p><a href="#Bundler">Bundler</a> solves these problems to some extent by packaging gems into your application. See the section below on using bundler.
</p>
<h3><span class="mw-headline" id="Bundler">Bundler</span></h3>
<p><a rel="nofollow"  href="http://bundler.io">Bundler</a> allows you to specify which gems your application depends upon, and optionally which version those gems should be. Once this specification is in place, Bundler installs all required gems (including the full gem dependency tree) and logs the results for later inspection. By default, Bundler installs gems into a shared location, but they can also be installed directly into your application. When your application is run, Bundler provides the correct version of each gem, even if multiple versions of each gem have been installed. This requires a little bit of work: applications should be called with <code>bundle exec</code>, and two lines of boilerplate code must be placed in your application's main executable.
</p>
<p>To install Bundler:
</p>
<pre>$ gem install bundler
</pre>
<p>By default, Bundler installs gems system-wide, which is contrary to the behaviour of <i>gem</i> itself on TOS. To correct this, you can run the following command:
</p>
<pre>$ bundle config path ~/.gem
</pre>
<p>To start a new bundle:
</p>
<pre>$ bundle init
</pre>
<p>Then edit <code>Gemfile</code> in the current directory (created by bundle init) and list your required gems:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Gemfile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">gem "rails", "3.2.9"
gem "mysql2"
</pre>
<p>Run the following to install gems into <code>GEM_HOME</code>:
</p>
<pre>$ bundle install
</pre>
<p>Alternatively, run the following to install gems to <code>.bundle</code> in the working directory:
</p>
<pre>$ bundle install --path .bundle
</pre>
<p>Do not forget to edit your main executable:
</p>
<pre>#!/usr/bin/env ruby

# "This will automatically discover your Gemfile, and make all of the gems in
# your Gemfile available to Ruby." <a rel="nofollow"  href="http://bundler.io/rationale.html">http://bundler.io/rationale.html</a>
require 'bundler/setup'

...
</pre>
<p>Finally, run your program:
</p>
<pre>bundle exec <i>main_executable_name.rb</i>
</pre>
<h3><span class="mw-headline" id="Managing_RubyGems_using_pacman">Managing RubyGems using pacman</span></h3>
<p>Instead of managing gems with <code>gem</code>, you can use <a href="../Pacman.html" title="Pacman">pacman</a>, or an <a href="../TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> helper. Ruby packages follow the naming convention ruby-<i>gemname</i>.
</p>
<p>This option provides the following advantages:
</p>
<ul>
<li>Gems are updated along with the rest of your system.</li>
<li>Installed gems are available system-wide, instead of being available only to the user who installed them.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> There are also tools integrating <i>gem</i> with <i>pacman</i> by automatically generating PKGBUILDs for specified gems: see <a href="../Creating_packages.html#PKGBUILD_generators" title="Creating packages">Creating packages#PKGBUILD generators</a>.</div>
<h4><span class="mw-headline" id="Quarry">Quarry</span></h4>
<p>Quarry is an opensource tool (GPL3 license) that allows to maintain <a rel="nofollow"  href="http://rubygems.org">rubygems</a> binary repository for TOS Linux, as an easier alternative to building packages manually from the AUR. The source is hosted at <a rel="nofollow"  href="https://github.com/anatol/quarry">github</a>.
</p>
<p>The repository is maintained by TOS developer anatolik at <a rel="nofollow"  href="http://pkgbuild.com/~anatolik/quarry/">http://pkgbuild.com/~anatolik/quarry/</a>, and is currently for the x86_64 architecture only. It contains many popular gems and new gems can be added upon request.
</p>
<p>See <a href="../Unofficial_user_repositories.html#quarry" title="Unofficial user repositories">Unofficial user repositories#quarry</a> to enable it.
</p>
<p>Then install required gem <code>pacman -S ruby-$gemname</code> (as the root user).
</p>
<p>If you have general questions - send it at the project announcement <a rel="nofollow"  href="https://bbs.archlinux.org/viewtopic.php?id=182729">https://bbs.archlinux.org/viewtopic.php?id=182729</a><br>
If you have bugreports or code improvements - file at github <a rel="nofollow"  href="https://github.com/anatol/quarry">https://github.com/anatol/quarry</a>
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../Ruby_on_Rails.html" title="Ruby on Rails">Ruby on Rails</a></li>
<li>Ruby - <a rel="nofollow"  href="https://www.ruby-lang.org/">https://www.ruby-lang.org/</a>
</li>
<li>Bundler - <a rel="nofollow"  href="http://bundler.io/">http://bundler.io/</a>
</li>
<li><a href="https://en.wikipedia.org/wiki/Why%27s_(poignant)_Guide_to_Ruby"  title="wikipedia:Why's (poignant) Guide to Ruby">why's (poignant) Guide to Ruby</a></li>
<li>
<a rel="nofollow"  href="http://ruby.learncodethehardway.org/">Learn Ruby The Hard Way</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot"  title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-04-02 ⓘ]</sup>
</li>
<li><a rel="nofollow"  href="http://blog.hyfather.com/blog/2011/10/18/bundler/">Comparison of Bundler and RVM workflows</a></li>
</ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../Category:Programming_languages.html" title="Category:Programming languages">Programming languages</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Ruby&amp;oldid=607758">https://wiki.archlinux.org/index.php?title=Ruby&amp;oldid=607758</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 25 April 2020, at 01:50.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



