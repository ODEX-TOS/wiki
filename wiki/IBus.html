<!--
    title: IBus
    description: Migration of IBus from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-28T17:58:55.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">IBus</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<p><a href="https://en.wikipedia.org/wiki/Intelligent_Input_Bus"  title="wikipedia:Intelligent Input Bus">IBus</a> (<i>Intelligent Input Bus</i>) is an <a href="../wiki/Localization.html#Input_methods" class="mw-redirect" title="Input method">input method</a> framework, a system for entering non-Latin characters.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installation"><span >1</span> <span >Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2">
<a href="#Input_method_engines"><span >1.1</span> <span >Input method engines</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Chinese"><span >1.1.1</span> <span >Chinese</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="#Japanese"><span >1.1.2</span> <span >Japanese</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Vietnamese"><span >1.1.3</span> <span >Vietnamese</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Others"><span >1.1.4</span> <span >Others</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#Initial_setup"><span >1.2</span> <span >Initial setup</span></a></li>
<li class="toclevel-2 tocsection-8">
<a href="#Integration"><span >1.3</span> <span >Integration</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#GNOME"><span >1.3.1</span> <span >GNOME</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#KDE"><span >1.3.2</span> <span >KDE</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-11">
<a href="#Configuration"><span >2</span> <span >Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#IBus"><span >2.1</span> <span >IBus</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Ibus-rime"><span >2.2</span> <span >Ibus-rime</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Entering_Special_Characters%E2%80%94The_Compose_Input_Method"><span >2.3</span> <span >Entering Special Characters—The Compose Input Method</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15">
<a href="#Tips_and_tricks"><span >3</span> <span >Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Pinyin_usage"><span >3.1</span> <span >Pinyin usage</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Systray_language_icon_color"><span >3.2</span> <span >Systray language icon color</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#Troubleshooting"><span >4</span> <span >Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Plasma_5"><span >4.1</span> <span >Plasma 5</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Kimpanel"><span >4.2</span> <span >Kimpanel</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#rxvt-unicode"><span >4.3</span> <span >rxvt-unicode</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#GTK_applications"><span >4.4</span> <span >GTK applications</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Chinese_input"><span >4.5</span> <span >Chinese input</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#LibreOffice"><span >4.6</span> <span >LibreOffice</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Non_US_keyboards"><span >4.7</span> <span >Non US keyboards</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Use_xinitrc_to_export"><span >4.8</span> <span >Use xinitrc to export</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Rescue_from_an_iBus_crash"><span >4.9</span> <span >Rescue from an iBus crash</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Firejail"><span >4.10</span> <span >Firejail</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29">
<a href="#ibus-m17n"><span >5</span> <span >ibus-m17n</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#English_international_AltGr"><span >5.1</span> <span >English international AltGr</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Trouble_with_Japanese"><span >5.2</span> <span >Trouble with Japanese</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-32"><a href="#See_also"><span >6</span> <span >See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus">ibus</a></span> package.
</p>
<h3><span class="mw-headline" id="Input_method_engines">Input method engines</span></h3>
<p>At least one input method is required, corresponding to the language desired. Available input methods include:
</p>
<h4><span class="mw-headline" id="Chinese">Chinese</span></h4>
<ul>
<li>
<strike><span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-pinyin">ibus-pinyin</a></span> - Intelligent Chinese Phonetic IME for Hanyu pinyin and Zhuyin (Bopomofo) users. Designed by IBus main author and has many advance features such as English spell checking.</strike> Package currently not maintained and partly broken with latest ibus base. Use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-libpinyin">ibus-libpinyin</a></span> instead.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-rime">ibus-rime</a></span> - Powerful and smart input method for a wide range of Chinese input methods, based on the <a href="../wiki/Rime.html" class="mw-redirect" title="Rime IME">Rime IME</a> project.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-chewing">ibus-chewing</a></span> - Intelligent Chinese Phonetic IME for Zhuyin (Bopomofo) users, based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libchewing">libchewing</a></span>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ibus-cangjie/">ibus-cangjie</a></span><sup><small>AUR</small></sup> - Chinese IME for Cangjie3, Cangjie3, and Quick based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/libcangjie/">libcangjie</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/python-pycangjie/">python-pycangjie</a></span><sup><small>AUR</small></sup>.</li>
</ul>
<h4><span class="mw-headline" id="Japanese">Japanese</span></h4>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-anthy">ibus-anthy</a></span> - Japanese IME, based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=anthy">anthy</a></span>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ibus-mozc/">ibus-mozc</a></span><sup><small>AUR</small></sup> - Japanese IME, based on <a href="../wiki/Mozc.html" title="Mozc">Mozc</a>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-kkc">ibus-kkc</a></span> - Japanese IME, based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libkkc">libkkc</a></span>.</li>
</ul>
<h4><span class="mw-headline" id="Vietnamese">Vietnamese</span></h4>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ibus-bamboo/">ibus-bamboo</a></span><sup><small>AUR</small></sup> - Vietnamese IME, based on Bamboo engine.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ibus-bogo/">ibus-bogo</a></span><sup><small>AUR</small></sup> - Vietnamese IME, based on Bogo. (discontinued)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-unikey">ibus-unikey</a></span> - IME for typing Vietnamese characters. (discontinued)</li>
</ul>
<p>There are several other vietnamese IME with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-m17n">ibus-m17n</a></span> and Viqr with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-table">ibus-table</a></span>, support VIQR, VNI, VPS, VISCII, BK HCM1, BK HCM2.
</p>
<h4><span class="mw-headline" id="Others">Others</span></h4>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-hangul">ibus-hangul</a></span> - Korean IME, based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libhangul">libhangul</a></span>. Manage several dubeolsik and sebeolsik keyboards variants and ahnmatae keyboard. Can be switched in hanja mode both with hanja key and F9 by default.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-table">ibus-table</a></span> - IME that accommodates table-based IMs.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-m17n">ibus-m17n</a></span> - M17n IME which allows input of many languages using the input methods from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=m17n-db">m17n-db</a></span>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ibus-kmfl/">ibus-kmfl</a></span><sup><small>AUR</small></sup> - Linux port of <a rel="nofollow"  href="https://keyman.com/">Keyman</a> input method for Windows which supports over 1,000 languages, such as complex scripts, languages of minorities, and IPA symbols. Only part of them is available in KMFL as it can work with uncompiled layout description only (*.kmn files).</li>
</ul>
<p>To see all available input methods:
</p>
<pre>$ pacman -Ss '^ibus-*'
</pre>
<p>Others packages are also available in the <a href="../wiki/TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>.
</p>
<h3><span class="mw-headline" id="Initial_setup">Initial setup</span></h3>
<p>Now, run <code> $ ibus-setup</code>.
The daemon will be initialized and provide the following message:
</p>
<pre>IBus has been started! If you cannot use IBus, please add below lines in <code>~/.bashrc</code>, and relogin your desktop.
export GTK_IM_MODULE=ibus
export XMODIFIERS=@im=ibus
export QT_IM_MODULE=ibus
</pre>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Suggested values might be wrong (chromium and firefox do not work with them for me). Using
<pre>export GTK_IM_MODULE=xim
export XMODIFIERS=@im=ibus
export QT_IM_MODULE=xim
</pre>
works for me. <a rel="nofollow"  href="https://github.com/ibus/ibus/issues/2020">Upstream ticket</a> (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:IBus">Talk:IBus#</a>)</div>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Another suggestion from a <a href="../wiki/LXDM.html" title="LXDM">LXDM</a> user. Adding these lines to /etc/profile
<pre>export GTK_IM_MODULE=ibus
export QT4_IM_MODULE=xim
export QT_IM_MODULE=xim
export XMODIFIERS=@im=ibus
</pre>
worked for me. (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:IBus">Talk:IBus#</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Although IBus uses a daemon, it is not the sort of daemon managed by <i>systemd</i>: it runs as an ordinary user and will be started upon login.</li>
<li>If, however, IBus is <b>not</b> autostarted upon login, then move the “export …” lines above to either
<ul>
<li>
<code>~/.xprofile</code> instead and append this line to the same file: <code>ibus-daemon -drx</code>, <b>or</b>
</li>
<li>
<code>~/.xinitrc</code> and append this line to the same file: <code>ibus-daemon -drx</code>.</li>
</ul>
</li>
</ul>
<dl><dd><dl><dd>The most viable option depends on the active <a href="../wiki/Window_manager.html" title="Window manager">Window manager</a>, see also <a href="../wiki/Xprofile.html" title="Xprofile">xprofile</a> and <a href="../wiki/Xinit.html#xinitrc" class="mw-redirect" title="Xinitrc">xinitrc</a>.</dd></dl></dd></dl>
<ul><li>Another potential option is adding <code>ibus-daemon -drx</code> after the <code>export ...</code> lines in <code>~/.bashrc</code>.</li></ul>
</div>
<p>Next, a configuration screen will appear. It can be accessed whenever IBus is running by right-clicking the icon in the system tray and choosing <i>Preferences</i>. See <a href="#Configuration">Configuration</a>.
</p>
<h3><span class="mw-headline" id="Integration">Integration</span></h3>
<p>If you want IBus to show an indicator for desktop environments who don’t provide an applet, launch it with this command:
</p>
<pre> ibus-daemon -drx --panel /usr/lib/ibus/ibus-ui-gtk3
</pre>
<h4><span class="mw-headline" id="GNOME">GNOME</span></h4>
<p><a href="../wiki/GNOME.html" title="GNOME">GNOME</a> integrates with IBus<a rel="nofollow"  href="https://help.gnome.org/misc/release-notes/3.6/i18n-ibus.html.en">[1]</a>, so it should only be necessary to install the package specific to the language being utilized. To enable input, add it to the <i>Input Sources</i> section of the <i>Region &amp; Language</i> settings. After you add your input sources (at least 2), GNOME will show the input switcher icon in the tray. If you do not find your appropriate input source when trying to add your input sources, most likely you have not done locale-gen for that locale. The default keyboard shortcut to switch to the next input method in GNOME is <code>Super+space</code>; disregard the <i>next input method</i> shortcut set in <i>ibus-setup</i>.
Some users, especially those using TOS derivatives, may be required to manually start ibus-daemon. This can be manually done via the terminal or by creating a .desktop file in the autostart folder, which will start ibus daemon whenever the user logs in.
</p>
<h4><span class="mw-headline" id="KDE">KDE</span></h4>
<p><a href="../wiki/KDE.html" title="KDE">KDE</a>'s Kimpanel can integrate with IBus (with additional functionality provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=kimtoy">kimtoy</a></span> if desired) by launching it as follows:
</p>
<pre> ibus-daemon -drx --panel=/usr/lib/kimpanel-ibus-panel
</pre>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="IBus">IBus</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You need to have <a href="../wiki/Fonts.html#Chinese.2C_Japanese.2C_Korean.2C_Vietnamese" class="mw-redirect" title="Fonts FAQ">east Asian fonts</a> installed if you want to enter Chinese, Japanese, Korean or Vietnamese characters.</div>
<p>The default <i>General</i> settings should be fine, but go to <i>Input Methods</i> and select your input method(s) in the drop down box, then press <i>Add</i>. You can use multiple input methods if you wish.
Once IBus is set up, you can press <code>Super+space</code> to use it (multiple times to cycle through available input methods). IBus will remember which input method you are using in each window, so you will have to reactivate it for each new window. You can override this behavior by right clicking the system tray icon, selecting <i>Preferences</i>, and going to the <i>Advanced</i> tab.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> By default, IBus overrides your <a href="../wiki/Xmodmap.html" title="Xmodmap">Xmodmap</a> setting. You can disable this feature by enabling "Use system keyboard layout" option in Preference -&gt; Advanced.</div>
<h3><span class="mw-headline" id="Ibus-rime">Ibus-rime</span></h3>
<p>If you have decided to use the great <i>ibus-rime</i> IME, check out <a href="../wiki/Rime.html" class="mw-redirect" title="Rime IME">Rime IME</a> for some help to configure it.
</p>
<h3>
<span id="Entering_Special_Characters.E2.80.94The_Compose_Input_Method"></span><span class="mw-headline" id="Entering_Special_Characters—The_Compose_Input_Method">Entering Special Characters—The Compose Input Method</span>
</h3>
<p>To type special characters, XKB supports compose key sequences. To fulfil this function, IBus supports an input method that is permanently in Compose mode. Instead of hitting a compose key, then typing out the compose sequence, the user switches to the Compose input method (by default using super-space (a.k.a. win-space)), types the compose sequence, then switches back to the previous method. In TOSlinux, the Compose input method is not installed by default. To use it, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ibus-table-others/">ibus-table-others</a></span><sup><small>AUR</small></sup> from the AUR, restart IBus, then look for it in the list of input methods under 'other' at the bottom.
</p>
<p>For entering mathematical symbols, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ibus-table-others/">ibus-table-others</a></span><sup><small>AUR</small></sup> also contains a LaTeX Input Method (which maps LaTeX commands such as <code>\infty</code> to the equivalent Unicode characters <code>∞</code>) and a mathwriter Input Method.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Pinyin_usage">Pinyin usage</span></h3>
<p>When using <i>ibus-pinyin</i>,
</p>
<ul>
<li>First type the pinyin (sans tones) for the characters you wish to enter.</li>
<li>Press <code>Up</code> and <code>Down</code> repeatedly to select a character (going on to the next page if necessary).</li>
<li>Press <code>Space</code> to use a character.</li>
<li>You can also use <code>PageUp</code> or <code>PageDown</code> to scroll pages, and use the number keys 1-5 to select the character you need.</li>
<li>You can enter multiple characters that form a word or phrase at a time (such as "zhongwen" to enter "中文"). ibus-pinyin will remember which characters you type most frequently and over time make suggestions that are more tuned to your typing profile.</li>
</ul>
<h3><span class="mw-headline" id="Systray_language_icon_color">Systray language icon color</span></h3>
<p>By default, IBus own panel (i.e. doesn’t apply for GNOME or Kimpanel) use a dark blue color to display the two letters code of an entry method.
</p>
<p>You change that, either by using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=dconf-editor">dconf-editor</a></span>, or with command line:
</p>
<pre> gsettings set org.freedesktop.ibus.panel xkb-icon-rgba 'COLOR'
</pre>
<p>To get more information about this value:
</p>
<pre> gsettings describe org.freedesktop.ibus.panel xkb-icon-rgba
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Plasma_5">Plasma 5</span></h3>
<p>Some applications may not accept non-"direct input" text (e.g. Japanese and Chinese) from Mozc using IBus. In order to resolve this problem add
</p>
<pre>export QT_IM_MODULE=ibus
</pre>
<p>to <code>~/.xprofile</code> and restart your X user session.
</p>
<h3><span class="mw-headline" id="Kimpanel">Kimpanel</span></h3>
<p>IBus main interface is currently only available in GTK, but Kimpanel provides a native Qt/KDE input interface. Kimpanel is bundled with Plasma 5, but IBus needs to be launched as following to be able to communicate with the panel
</p>
<pre>$ ibus-daemon --panel=/usr/lib/kimpanel-ibus-panel
</pre>
<p>To get a menu entry for launching ibus this way, save the following file to <code>~/.local/share/applications/ibus-kimpanel.desktop</code>:
</p>
<pre>[Desktop Entry]
Encoding=UTF-8
Name=IBus (KIMPanel)
GenericName=Input Method Framework
Comment=Start IBus Input Method Framework
Exec=ibus-daemon --panel=/usr/lib/kimpanel-ibus-panel
Icon=ibus
Terminal=false
Type=Application
Categories=System;Utility;
X-GNOME-Autostart-Phase=Applications
X-GNOME-AutoRestart=false
X-GNOME-Autostart-Notify=true
X-KDE-autostart-after=panel
</pre>
<p>Then you can either let KDE autostart ibus, or set it as the input method application in Kimpanel, and manually click on the kimpanel icon to start it. In either case, choose Utility/Ibus (Kimpanel) in the Choose Application dialog.
</p>
<p>Finally, add the input panel widget to show the panel.
</p>
<h3><span class="mw-headline" id="rxvt-unicode">rxvt-unicode</span></h3>
<p>If anyone has any issues with IBus and <i>rxvt-unicode</i>, the following steps should solve it.
</p>
<p>Add the following to your <code>~/.Xresources</code> (possibly not required, first try without):
</p>
<pre>URxvt.inputMethod: ibus
URxvt.preeditType: OverTheSpot
</pre>
<p>And start IBus with:
</p>
<pre>$ ibus-daemon --xim
</pre>
<p>If you start <i>ibus-daemon</i> automatically (e.g. in <code>~/.xinitrc</code> or <code>~/.xsession</code>) but used to use <code>ibus-daemon &amp;</code> without the <code>--xim</code> option, make sure to kill the existing process before testing the new command.
</p>
<h3><span class="mw-headline" id="GTK_applications">GTK applications</span></h3>
<p>Some users have had problems using Input Methods with GTK applications, because it seems that the gtk.immodules file cannot be found. Adding:
</p>
<pre>export GTK_IM_MODULE_FILE=/etc/gtk-2.0/gtk.immodules
</pre>
<p>for GTK 2, or:
</p>
<pre>export GTK_IM_MODULE_FILE=/usr/lib/gtk-3.0/3.0.0/immodules.cache
</pre>
<p>for GTK 3, in addition to the three lines above in your <code>$HOME/.bashrc</code> seems to fix the problem.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you set it to GTK 2, then you cannot use GTK 3 applications like <i>gedit</i>, if you set it to GTK 3, then you cannot use GTK 2 applications like Xfce.</div>
<h3><span class="mw-headline" id="Chinese_input">Chinese input</span></h3>
<p>If you encounter problems when using Chinese input, check your locale setting. For example in Hong Kong, export LANG=zh_HK.utf8.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> There are large revisions after IBus 1.4, you might not be able to input Chinese words with <i>ibus-pinyin</i> or <i>ibus-sunpinyin</i>, which are written in C. So the solution is to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ibus-libpinyin">ibus-libpinyin</a></span>.
</div>
<p>To start ibus with GNOME, add this in <code>~/.profile</code> and restart the GNOME.
</p>
<pre>export GTK_IM_MODULE=ibus
export XMODIFIERS=@im=ibus
export QT_IM_MODULE=ibus
ibus-daemon -d -x
</pre>
<p>Chinese users can refer to this <a rel="nofollow"  href="http://forum.ubuntu.org.cn/viewtopic.php?f=155&amp;t=346639">page</a> for detailed solution concerning this bug.
</p>
<h3><span class="mw-headline" id="LibreOffice">LibreOffice</span></h3>
<p>If IBus does load but does not see LibreOffice as an input window, add this line to <code>~/.bashrc</code>:
</p>
<pre>export XMODIFIERS=@im=ibus
</pre>
<p>And then, you need to start ibus with <code>--xim -d</code>, for example, add this line to <code>~/.xinitrc</code>:
</p>
<pre>ibus-daemon --xim -d
</pre>
<p>But the horrible thing is that you need to start LibreOffice in terminal.
</p>
<p>If you are using KDE and the above does not work, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libreoffice-still">libreoffice-still</a></span> and add this line to <code>~/.xprofile</code> if you do not mind running LibreOffice in GTK 2 mode:
</p>
<pre>export OOO_FORCE_DESKTOP="gnome"
</pre>
<p>That will make IBus work with LibreOffice, and you can start LibreOffice from anywhere, not just the terminal.
</p>
<h3><span class="mw-headline" id="Non_US_keyboards">Non US keyboards</span></h3>
<p>If <a rel="nofollow"  href="https://code.google.com/p/ibus/issues/detail?id=155">Ibus does not let you write in a given language</a>, let's say Chinese, with a different keyboard layout other than US, then you need to tell it which one to use.
</p>
<p>Each input method specifies its desired input layout in an XML configuration file in <code>/usr/share/ibus/component/&lt;method_name&gt;.xml</code>. Setting the <code>&lt;layout&gt;</code> tag to the desired value will make the ibus use that layout. With the special value <code>default</code>, ibus will use whatever is the default layout configured on the system.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Undone on package upgrades (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:IBus">Talk:IBus#</a>)</div>
</div>
<p><br>
You need to change <code>/usr/share/ibus/component/&lt;method_name&gt;.xml</code> and change the <code>&lt;layout&gt;</code> tag to the expected keyboard layout.
</p>
<h3><span class="mw-headline" id="Use_xinitrc_to_export">Use xinitrc to export</span></h3>
<p>If you still can't get it to work, try to place these lines in <a href="../wiki/Xinit.html" class="mw-redirect" title="~/.xinitrc">~/.xinitrc</a>.
</p>
<pre> export GTK_IM_MODULE=ibus
 export XMODIFIERS=@im=ibus
 export QT_IM_MODULE=ibus
</pre>
<p>This was tested in <a href="../wiki/Awesome.html" title="Awesome">Awesome</a>, without login manager.
</p>
<h3><span class="mw-headline" id="Rescue_from_an_iBus_crash">Rescue from an iBus crash</span></h3>
<p>Since around fall 2018, iBus is less stable and sometimes crash. To relaunch it without killing the session:
</p>
<ul>
<li>If the keyboard is not in latin input method, go to a terminal (ctrl+alt+F2), login with the same user and type</li>
<li>ibus-daemon -r &amp;</li>
</ul>
<p>Go back in the X11 session (ctrl+alt+f7), and type the exact same sentence in a terminal.
</p>
<ul><li>If the keyboard is in a latin input method, launch a terminal and type :</li></ul>
<pre>ibus-terminal -r &amp;
</pre>
<p><b>The ending '&amp;' is very important, else it will brake input when you stop it.</b>
</p>
<h3><span class="mw-headline" id="Firejail">Firejail</span></h3>
<p>Sandboxed programs may not work with some IBus input methods due to the input socket being invisible to the sandbox<a rel="nofollow"  href="https://github.com/netblue30/firejail/issues/116">[2]</a><a rel="nofollow"  href="https://github.com/ibus/ibus/issues/2020">[3]</a><a rel="nofollow"  href="https://github.com/netblue30/firejail/issues/1302">[4]</a>. For example, Firefox sandboxed with Firejail may not register inputs given by IBus Anthy. 
</p>
<p>A workaround is to make IBus use <a href="https://en.wikipedia.org/wiki/X_Input_Method"  title="wikipedia:X Input Method">XIM</a> by exporting the following environment variables
</p>
<pre>export GTK_IM_MODULE=xim
export XMODIFIERS=@im=ibus
export QT_IM_MODULE=xim
</pre>
<p>and launching the IBus daemon with 
</p>
<pre>ibus-daemon -drx
</pre>
<p>at login.
</p>
<h2><span class="mw-headline" id="ibus-m17n">ibus-m17n</span></h2>
<p>In the specific case of <code>ibus-m17n</code>, a helper, <code>/usr/lib/ibus/ibus-engine-m17n</code>, generates the necessary XML at runtime. With version 
<a rel="nofollow"  href="https://www.archlinux.org/packages/community/x86_64/ibus-m17n/">1.3.4-4 of the package</a>, this unfortunately uses <code>us</code> as the <code>layout</code> without a possibility of override. Fortunately, this was changed to <code>default</code> <a rel="nofollow"  href="https://github.com/ibus/ibus-m17n/commit/2b915cb54122e2010db1182f4f1007b9f7cda5aa">a few commits later in Git</a>, but no new release was made since then. To remediate the issue, a <a rel="nofollow"  href="https://aur.archlinux.org/packages/ibus-m17n-git/">Git-master version of the package is available from AUR</a>, which works nicely.
</p>
<h3><span class="mw-headline" id="English_international_AltGr">English international AltGr</span></h3>
<p>If you want to use AltGr as compose key for the english keyboard, choose <code>English international AltGr</code> in the ibus-setup instead of 'English'.
</p>
<h3><span class="mw-headline" id="Trouble_with_Japanese">Trouble with Japanese</span></h3>
<p>If you have trouble with Japanese input try to generate the locales with uncommenting <code>ja_JP.UTF-8 UTF-8</code> in the <code>/etc/locale.gen</code> file and then run <code>locale-gen</code>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a rel="nofollow"  href="https://github.com/ibus/ibus">GitHub repository</a></li></ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../wiki/Category:Input_methods.html" title="Category:Input methods">Input methods</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../wiki/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=IBus&amp;oldid=605141">https://wiki.archlinux.org/index.php?title=IBus&amp;oldid=605141</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 9 April 2020, at 12:04.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../wiki/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../wiki/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../wiki/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



