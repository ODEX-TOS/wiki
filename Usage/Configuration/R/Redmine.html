<!--
    title: Redmine
    description: Migration of Redmine from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-29T19:25:31.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">Redmine</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" ><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" ><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> largely out of date installation for old Redmine and Apache 2.2 (amongst other things) (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:Redmine">Talk:Redmine#</a>)</div>
</div>
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="/Usage/Configuration/R/Ruby_on_Rails.html" title="Ruby on Rails">Ruby on Rails</a></li>
<li><a href="/Usage/Configuration/R/RVM.html" title="RVM">RVM</a></li>
<li><a href="/Usage/Configuration/R/MariaDB.html" title="MariaDB">MariaDB</a></li>
<li><a href="/Usage/Configuration/R/Apache_HTTP_Server.html" title="Apache HTTP Server">Apache HTTP Server</a></li>
<li><a href="/Usage/Configuration/R/Nginx.html" title="Nginx">Nginx</a></li>
</ul>
</div>
<p><a rel="nofollow"  href="https://www.redmine.org/">Redmine</a> is a <a href="https://en.wikipedia.org/wiki/free_and_open_source_software"  title="wikipedia:free and open source software">free and open source</a>, web-based <a href="https://en.wikipedia.org/wiki/project_management"  title="wikipedia:project management">project management</a> and <a href="https://en.wikipedia.org/wiki/Issue_tracking_system"  title="wikipedia:Issue tracking system">issue tracking</a> tool. It handles multiple projects and subprojects.  It <a rel="nofollow"  href="http://www.redmine.org/projects/redmine/wiki/Features">features</a> per project wikis and forums, time tracking, and flexible role based access control. It includes a <a href="https://en.wikipedia.org/wiki/calendar"  title="wikipedia:calendar">calendar</a> and <a href="https://en.wikipedia.org/wiki/Gantt_chart"  title="wikipedia:Gantt chart">Gantt charts</a> to aid visual representation of projects and their <a href="https://en.wikipedia.org/wiki/time_limit"  title="wikipedia:time limit">deadlines</a>. Redmine integrates with various <a href="https://en.wikipedia.org/wiki/version_control"  title="wikipedia:version control">version control</a> systems and includes a repository browser and diff viewer.
</p>
<p>Redmine is written using the <a href="/Usage/Configuration/R/Ruby_on_Rails.html" title="Ruby on Rails">Ruby on Rails</a> framework. It is cross-platform and cross-<a href="https://en.wikipedia.org/wiki/database"  title="wikipedia:database">database</a> and supports 34 languages.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Prerequisites"><span >1</span> <span >Prerequisites</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Ruby"><span >1.1</span> <span >Ruby</span></a></li>
<li class="toclevel-2 tocsection-3">
<a href="#Database"><span >1.2</span> <span >Database</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#MariaDB_5.0_or_higher_(recommended)"><span >1.2.1</span> <span >MariaDB 5.0 or higher (recommended)</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#MySQL_5.5_-_5.7"><span >1.2.2</span> <span >MySQL 5.5 - 5.7</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#PostgreSQL_9.2_or_higher"><span >1.2.3</span> <span >PostgreSQL 9.2 or higher</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Microsoft_SQL_Server_2012_or_higher"><span >1.2.4</span> <span >Microsoft SQL Server 2012 or higher</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#SQLite_3"><span >1.2.5</span> <span >SQLite 3</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9">
<a href="#Web_Server"><span >1.3</span> <span >Web Server</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Apache"><span >1.3.1</span> <span >Apache</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Unicorn"><span >1.3.2</span> <span >Unicorn</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Nginx"><span >1.3.3</span> <span >Nginx</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Apache_Tomcat"><span >1.3.4</span> <span >Apache Tomcat</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-14">
<a href="#Optional_Prerequisites"><span >2</span> <span >Optional Prerequisites</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#SCM_(Source_Code_Management)"><span >2.1</span> <span >SCM (Source Code Management)</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#ImageMagick_(recommended)"><span >2.2</span> <span >ImageMagick (recommended)</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Ruby_OpenID_Library"><span >2.3</span> <span >Ruby OpenID Library</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18">
<a href="#Installation"><span >3</span> <span >Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Build_and_Installation"><span >3.1</span> <span >Build and Installation</span></a></li>
<li class="toclevel-2 tocsection-20">
<a href="#Database_Configuration"><span >3.2</span> <span >Database Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#Database_Creation"><span >3.2.1</span> <span >Database Creation</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Database_Access_Configuration"><span >3.2.2</span> <span >Database Access Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23">
<a href="#Ruby_gems"><span >3.3</span> <span >Ruby gems</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Adding_Additional_Gems_(Optional)"><span >3.3.1</span> <span >Adding Additional Gems (Optional)</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Check_previously_installed_gems"><span >3.3.2</span> <span >Check previously installed gems</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Gems_Installation"><span >3.3.3</span> <span >Gems Installation</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27"><a href="#Session_Store_Secret_Generation"><span >3.4</span> <span >Session Store Secret Generation</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Database_Structure_Creation"><span >3.5</span> <span >Database Structure Creation</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Database_Population_with_Default_Data"><span >3.6</span> <span >Database Population with Default Data</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#File_System_Permissions"><span >3.7</span> <span >File System Permissions</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Test_the_installation"><span >3.8</span> <span >Test the installation</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Configure_the_production_server"><span >3.9</span> <span >Configure the production server</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33"><a href="#Updating"><span >4</span> <span >Updating</span></a></li>
<li class="toclevel-1 tocsection-34">
<a href="#Troubleshooting"><span >5</span> <span >Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-35"><a href="#RMagick_gem_without_support_for_High_Dynamic_Range_in_ImageMagick"><span >5.1</span> <span >RMagick gem without support for High Dynamic Range in ImageMagick</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Runtime_error_complaining_that_RMagick_was_configured_with_older_version"><span >5.2</span> <span >Runtime error complaining that RMagick was configured with older version</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#OpenSSL_error_about_%22SSLv3_client%22"><span >5.3</span> <span >OpenSSL error about "SSLv3_client"</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Error_when_installing_gems:_Cannot_load_such_file_--_mysql2/mysql2"><span >5.4</span> <span >Error when installing gems: Cannot load such file -- mysql2/mysql2</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#Apache_2.4_Updating"><span >5.5</span> <span >Apache 2.4 Updating</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Checkout_SVN_Source"><span >5.6</span> <span >Checkout SVN Source</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Automating_The_Update_Process"><span >5.7</span> <span >Automating The Update Process</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#Creating_a_Systemd_Unit"><span >5.8</span> <span >Creating a Systemd Unit</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#Complaints_about_psych"><span >5.9</span> <span >Complaints about psych</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-44"><a href="#See_also"><span >6</span> <span >See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Prerequisites">Prerequisites</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" ><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" ><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Redmine package is now in community and has its own dependencies. The installation process is a little different. (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:Redmine">Talk:Redmine#</a>)</div>
</div>
<p>This document will guide you through the installation process of Redmine and all of its prerequisites, including the optional ones. If desired, however, you may install Redmine and its prerequisites separately, simply referring to the relevant sections below.
</p>
<p>Although this guide will go through the entire installation process, this is not a one way path. Redmine can use different versions of the requisite software.  For example the database requirement can be provided by mariaDB, mySQL, postgreSQL, etc.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This guide is a default suggestion, feel free to substitute any of the prerequisites mentioned on this page.</div>
<h3><span class="mw-headline" id="Ruby">Ruby</span></h3>
<table border="1"  style="text-align:center;">
<tbody>
<tr>
<th>Redmine version
</th>
<th>Supported Ruby Versions
</th>
<th>Rails version used
</th>
</tr>
<tr>
<th>3.0.2
</th>
<td style="text-align:left;">
<b>ruby</b> 1.9.3<sup>3</sup>, 2.0.0<sup>2</sup>, 2.1, 2.2<sup>1</sup>
</td>
<td>
<b>Rails</b> 4.2<sup>0</sup>
</td>
</tr>
<tr>
<th>3.4
</th>
<td style="text-align:left;">
<b>ruby</b> 1.9.3<sup>3</sup>, 2.0.0, 2.1, 2.2, 2.3, 2.4
</td>
<td>
<b>Rails</b> 4.2
</td>
</tr>

<tr>
<th>4.0
</th>
<td style="text-align:left;">
<b>ruby</b> 2.2<sup>4</sup>, 2.3, 2.4, 2.5, 2.6
</td>
<td>
<b>Rails</b> 5.2
</td>
</tr>
<tr>
<th>4.1
</th>
<td style="text-align:left;">
<b>ruby</b> 2.3, 2.4, 2.5, 2.6
</td>
<td>
<b>Rails</b> 5.2
</td>
</tr>
</tbody>
</table>
<p>There are two simple ways to install Ruby: installing the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=ruby">ruby</a></span> package as described in <a href="/Usage/Configuration/R/Ruby.html" title="Ruby">ruby</a> or installing RVM as described in <a href="/Usage/Configuration/R/RVM.html" title="RVM">RVM</a> <b>(recommended)</b>.
</p>
<p><br>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  <sup>0</sup> Rails 4.2.1 has non ASCII URL issue on MinGW Ruby (<a rel="nofollow"  href="http://rubyinstaller.org/">Windows-based installer</a>) thin and puma (<a rel="nofollow"  href="http://www.redmine.org/issues/19321">#19321</a>, <a rel="nofollow"  href="http://www.redmine.org/issues/19374">#19374</a>) </div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  <sup>1</sup> MinGW Ruby 2.2 has nokogiri issue (<a rel="nofollow"  href="http://www.redmine.org/issues/19419">#19419</a>).</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  <sup>2</sup> As of 2013-03-19, SQL Server support is reported broken with <b>ruby 2.0.0 under Windows</b> because of a <a rel="nofollow"  href="https://github.com/rails-sqlserver/tiny_tds/issues/110">database adapter gem incompatibility</a>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  <sup>3</sup> MRI 1.9.3p327 contains a <a rel="nofollow"  href="http://bugs.ruby-lang.org/issues/7374">bug</a> breaking plugin loading under Windows which 1.9.3p194 or 1.9.3p392 haven't.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong>  If you use RVM, pay attention to the single and multiple user differences! If you are not creating a hosting service, the multiple user (available for all users on the machine) should be the choice for simpler debuging.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  <sup>4</sup> Redmine prior to 4.0.6 supports Ruby  &gt;=  2.2.2. Redmine 4.0.6 and later don't support Ruby 2.2 (<a rel="nofollow"  href="https://redmine.org/projects/redmine/wiki/RedmineInstall">see Redmine installation page</a>)</div>
<h3><span class="mw-headline" id="Database">Database</span></h3>
<p>Redmine <a rel="nofollow"  href="http://www.redmine.org/projects/redmine/wiki/RedmineInstall#Database">supports many different databases</a>.
</p>
<h4>
<span id="MariaDB_5.0_or_higher_.28recommended.29"></span><span class="mw-headline" id="MariaDB_5.0_or_higher_(recommended)">MariaDB 5.0 or higher (recommended)</span>
</h4>
<ul>
<li>MariaDB is a drop-in replacement for MySQL, in fact it was a fork of it and maintain binary compatibility. It is also <a rel="nofollow"  href="https://www.archlinux.org/news/mariadb-replaces-mysql-in-repositories/">TOS Linux's default implementation of MySQL</a>.</li>
<li>MariaDB has known issues (<a rel="nofollow"  href="https://www.redmine.org/issues/19344">#19344</a>, <a rel="nofollow"  href="https://www.redmine.org/issues/19395">#19395</a>, <a rel="nofollow"  href="https://www.redmine.org/issues/17460">#17460</a>).</li>
</ul>
<p>To install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=mariadb">mariadb</a></span> simply refer to <a href="/Usage/Configuration/R/MySQL.html" title="MySQL">MySQL</a>.
</p>
<h4><span class="mw-headline" id="MySQL_5.5_-_5.7">MySQL 5.5 - 5.7</span></h4>
<ul>
<li>
<a rel="nofollow"  href="https://www.archlinux.org/news/mariadb-replaces-mysql-in-repositories/">Oracle MySQL was dropped</a> to the <a href="/Usage/Configuration/R/TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/mysql/">mysql</a></span><sup><small>AUR</small></sup> in the <a href="/Usage/Configuration/R/TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>.</li>
<li>MySQL 5.6 or higher has known issues (<a rel="nofollow"  href="https://www.redmine.org/issues/19344">#19344</a>, <a rel="nofollow"  href="https://www.redmine.org/issues/19395">#19395</a>, <a rel="nofollow"  href="https://www.redmine.org/issues/17460">#17460</a>).</li>
<li>Redmine 3.x also supports MySQL 5.0 and 5.1</li>
</ul>
<h4><span class="mw-headline" id="PostgreSQL_9.2_or_higher">PostgreSQL 9.2 or higher</span></h4>
<ul><li>To install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=postgresql">postgresql</a></span> simply refer to <a href="/Usage/Configuration/R/PostgreSQL.html" title="PostgreSQL">PostgreSQL</a>.</li></ul>
<ul><li>Make sure your database datestyle is set to ISO (Postgresql default setting). You can set it using:</li></ul>
<pre>ALTER DATABASE "redmine_db" SET datestyle="ISO,MDY";</pre>
<ul><li>Redmine 3.x also supports PostgreSQL 8.3 - 9.1.</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some bugs in PostgreSQL 8.4.0 and 8.4.1 affect Redmine behavior (<a rel="nofollow"  href="http://www.redmine.org/issues/4259">#4259</a>, <a rel="nofollow"  href="http://www.redmine.org/issues/4314">#4314</a>), they are fixed in PostgreSQL 8.4.2</div>
<h4><span class="mw-headline" id="Microsoft_SQL_Server_2012_or_higher">Microsoft SQL Server <a rel="nofollow"  href="https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/blob/v4.2.3/README.md#activerecord-sql-server-adapter-for-sql-server-2012-and-higher">2012 or higher</a></span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Support is temporarily broken (with ruby 2.0.0 under Windows because of <a rel="nofollow"  href="https://github.com/rails-sqlserver/tiny_tds/issues/110">database adapter gem incompatibility</a>).</div>
<h4><span class="mw-headline" id="SQLite_3">SQLite 3</span></h4>
<p>Not supported for multi-user production use. So, it will not be detailed how to install and configure it for use with Redmine. See <a rel="nofollow"  href="http://www.redmine.org/projects/redmine/wiki/RedmineInstall#Supported-database-back-ends">upstream document</a> for more info.
</p>
<h3><span class="mw-headline" id="Web_Server">Web Server</span></h3>
<h4><span class="mw-headline" id="Apache">Apache</span></h4>
<p>To install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=apache">apache</a></span> simply refer to <a href="/Usage/Configuration/R/Apache_HTTP_Server.html" title="Apache HTTP Server">Apache HTTP Server</a>.
</p>
<h4><span class="mw-headline" id="Unicorn">Unicorn</span></h4>
<p>To install Unicorn server (ruby gem) simply refer to <a href="/Usage/Configuration/R/Ruby_on_Rails.html#Unicorn" title="Ruby on Rails">Ruby on Rails#Unicorn</a>.
</p>
<h4><span class="mw-headline" id="Nginx">Nginx</span></h4>
<p>To install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=nginx">nginx</a></span> simply refer to <a href="/Usage/Configuration/R/Nginx.html" title="Nginx">Nginx</a>.
</p>
<h4><span class="mw-headline" id="Apache_Tomcat">Apache Tomcat</span></h4>
<p>To install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=tomcat8">tomcat8</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=tomcat7">tomcat7</a></span> simply refer to <a href="/Usage/Configuration/R/Tomcat.html" title="Tomcat">Tomcat</a>.
</p>
<h2><span class="mw-headline" id="Optional_Prerequisites">Optional Prerequisites</span></h2>
<h3>
<span id="SCM_.28Source_Code_Management.29"></span><span class="mw-headline" id="SCM_(Source_Code_Management)">SCM (Source Code Management)</span>
</h3>
<table border="1">
	<tbody>
<tr>
		<th>SCM</th>
		<th>Supported versions</th>
		<th>Comments</th>
	</tr>
	<tr>
		<td><a rel="nofollow"  href="http://git-scm.com">Git</a></td>
		<td>1.5.4.2 to 2.11.0</td>
		<td></td>
	</tr>
	<tr>
		<td><a rel="nofollow"  href="http://subversion.apache.org">Subversion</a></td>
		<td>1.3 to 1.9.7</td>
		<td>1.3 or higher required.<br>
<p>Does not support Ruby Bindings for Subversion.<br>
</p>
Subversion 1.7.0 and 1.7.1 contains bugs <a rel="nofollow"  href="http://www.redmine.org/issues/9541">#9541</a>
</td>
	</tr>
	<tr>
		<td><a rel="nofollow"  href="http://www.selenic.com/mercurial">Mercurial</a></td>
		<td>1.2 to 4.3.1</td>
		<td>Support bellow version 1.6 is droped as seen in <a rel="nofollow"  href="http://www.redmine.org/issues/9465">#9465</a>.</td>
	</tr>
	<tr>
		<td><a rel="nofollow"  href="http://bazaar-vcs.org">Bazaar</a></td>
		<td>1.0.0.candidate.1 to 2.7.0</td>
		<td></td>
	</tr>
	<tr>
		<td><a rel="nofollow"  href="http://darcs.net">Darcs</a></td>
		<td>&gt;=1.0.7</td>
		<td></td>
	</tr>
	<tr>
		<td><a rel="nofollow"  href="http://www.nongnu.org/cvs">CVS</a></td>
		<td>1.12.12, 1.12.13</td>
		<td>1.12 required.<br>
Will not work with CVSNT.</td>
	</tr>
</tbody>
</table>
<p>More information can be read at <a rel="nofollow"  href="http://www.redmine.org/projects/redmine/wiki/RedmineRepositories">Redmine Repositories Wiki</a>.
</p>
<h3>
<span id="ImageMagick_.28recommended.29"></span><span class="mw-headline" id="ImageMagick_(recommended)">ImageMagick (recommended)</span>
</h3>
<p><a rel="nofollow"  href="http://www.imagemagick.org">ImageMagick</a> is necessary to enable Gantt export to a <a href="https://en.wikipedia.org/wiki/Portable_Network_Graphics"  title="wikipedia:Portable Network Graphics">PNG</a> file and thumbnails generation.
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=imagemagick">imagemagick</a></span>.
</p>
<h3><span class="mw-headline" id="Ruby_OpenID_Library">Ruby OpenID Library</span></h3>
<p>To enable <a rel="nofollow"  href="http://janrain.com/openid-enabled">OpenID</a><sup title="Last check status: domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot"  title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-04-02 ⓘ]</sup> support, is required a version &gt;= 2 of the library.
</p>
<p>The current version (as of 14th January 2020) is 0.9.4, which supports Redmine 4.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" ><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" ><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Redmine package is now in community and has its own dependencies. The installation process is a little different. (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:Redmine">Talk:Redmine#</a>)</div>
</div>
<h3><span class="mw-headline" id="Build_and_Installation">Build and Installation</span></h3>
<p>Download, build and install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=redmine">redmine</a></span> package.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Detailed build instructions are in <a href="/Usage/Configuration/R/TOS_User_Repository.html#Build_and_install_the_package" title="TOS User Repository">TOS User Repository#Build and install the package</a>. It is <b>HIGHLY</b> recommended to read the <a href="/Usage/Configuration/R/TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> page to understand what are you doing. </div>
<h3><span class="mw-headline" id="Database_Configuration">Database Configuration</span></h3>
<p>Now, we will need to create the database that the Redmine will use to store your data. For now on, the database and its user will be named <code>redmine</code>. But this names can be changed to anything else.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The configuration for <a href="/Usage/Configuration/R/MariaDB.html" title="MariaDB">MariaDB</a> and <a href="/Usage/Configuration/R/MySQL.html" title="MySQL">MySQL</a> will be the same since both are binary compatible.</div>
<h4><span class="mw-headline" id="Database_Creation">Database Creation</span></h4>
<p>To create the database, the user and set privileges (MariaDB and MySQL &gt;= 5.0.2):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># mysql -u root -p</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CREATE DATABASE redmine CHARACTER SET UTF8;
CREATE USER 'redmine'@'localhost' IDENTIFIED BY 'my_password';
GRANT ALL PRIVILEGES ON redmine.* TO 'redmine'@'localhost';</pre>
<p>For versions of MariaDB and MySQL prior to 5.0.2:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># mysql -u root -p</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CREATE DATABASE redmine CHARACTER SET UTF8;
GRANT ALL PRIVILEGES ON redmine.* TO'redmine'@'localhost' IDENTIFIED BY 'my_password';</pre>
<p>For PostgreSQL:
</p>
<pre>CREATE ROLE redmine LOGIN ENCRYPTED PASSWORD 'my_password' NOINHERIT VALID UNTIL 'infinity';
CREATE DATABASE redmine WITH ENCODING='UTF8' OWNER=redmine;</pre>
<p>For SQLServer:
</p>
<p>Although the database, login and user can be created within SQL Server Management Studio with a few clicks, you can always use the command line with <code>SQLCMD</code>:
</p>
<pre>USE [master]
GO
-- Very basic DB creation
CREATE DATABASE [REDMINE]
GO
-- Creation of a login with SQL Server login/password authentication and no password expiration policy
CREATE LOGIN [REDMINE] WITH PASSWORD=N'redminepassword', DEFAULT_DATABASE=[REDMINE], CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF
GO
-- User creation using previously created login authentication
USE [REDMINE]
GO
CREATE USER [REDMINE] FOR LOGIN [REDMINE]
GO
-- User permissions set via roles
EXEC sp_addrolemember N'db_datareader', N'REDMINE'
GO
EXEC sp_addrolemember N'db_datawriter', N'REDMINE'
GO</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you want to use additional environments, you must create separate databases for each one (for example: <i>development</i> and <i>test</i>).</div>
<h4><span class="mw-headline" id="Database_Access_Configuration">Database Access Configuration</span></h4>
<p>Now you need to configure Redmine to access the database we just created. To do that you have to copy <code>/usr/share/webapps/redmine/config/database.yml.example</code> to <code>database.yml</code>:
</p>
<pre># cd /usr/share/webapps/redmine/config
# cp database.yml.example database.yml
</pre>
<p>And then edit this file in order to configure your database settings for "production" environment (you can configure for the "development" and "test" environments too, just change the appropriate sections).
</p>
<p>Example for MariaDB and MySQL database:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nano database.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">production:
  adapter: mysql2
  database: redmine
  host: localhost
  port: 3307   <b>#If your server is not running on the standard port (3306), set it here, otherwise this line is unnecessary.</b>
  username: redmine
  password: my_password</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> For ruby1.9 the "adapter" value must be set to <code>mysql2</code>, and for ruby1.8 or jruby, it must be set to <code>mysql</code>.</div>
<p>Example for PostgreSQL database:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nano database.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">production:
  adapter: postgresql
  database: redmine
  host: localhost
  username: redmine
  password: my_password
  encoding: utf8
  schema_search_path: &lt;database_schema&gt; (default - public)</pre>
<p>Example for a SQL Server database:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nano database.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">production:
  adapter: sqlserver
  database: redmine
  host: localhost <b>#Set not default host (localhost) here, otherwise this line is unnecessary.</b>
  port: 1433 <b>#Set not standard port (1433) here, otherwise this line is unnecessary.</b>
  username: redmine
  password: my_password
</pre>
<h3><span class="mw-headline" id="Ruby_gems">Ruby gems</span></h3>
<p>Redmine requires some <a href="/Usage/Configuration/R/Ruby.html#RubyGems" class="mw-redirect" title="RubyGems">RubyGems</a> to be installed and there are multiple ways of installing them (as listed on the referenced page).
</p>
<ul>
<li>prototype-rails</li>
<li>unicorn (an application-server)</li>
<li>mysql2 (high-performance Ruby bindings for MySQL)</li>
<li>coderay</li>
<li>erubis</li>
<li>fastercsv</li>
<li>rdoc</li>
<li>net-ldap</li>
<li>rack-openid</li>
</ul>
<p>Obviously, if you choose a different database-server, or want to use a different application-server you should replace <i>mysql2</i> and <i>unicorn</i> to your liking.
</p>
<h4>
<span id="Adding_Additional_Gems_.28Optional.29"></span><span class="mw-headline" id="Adding_Additional_Gems_(Optional)">Adding Additional Gems (Optional)</span>
</h4>
<p>If you need to load gems that are not required by Redmine core (eg. Puma, fcgi), create a file named <code>Gemfile.local</code> at the root of your redmine directory. It will be loaded automatically when running <code>bundle install</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># nano Gemfile.local</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">gem 'puma'</pre>
<h4><span class="mw-headline" id="Check_previously_installed_gems">Check previously installed gems</span></h4>
<p>The Redmine devs included Bundler in Redmine, which can manage Gems just like pacman manages packages. Run the following command to assure that all Redmine dependencies are met:
</p>
<pre># bundle install --without development test
</pre>
<p>This should output a list of gems Redmine needs.
</p>
<h4><span class="mw-headline" id="Gems_Installation">Gems Installation</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you prefer, you can install all the gems as pacman packages. You have only to search for the gem package and install them as usual. As of using Ruby gem is much simpler to manage and maintain up to date gems, this will be preferable and used as default bellow.</div>
<p>Redmine uses Bundler to manage gems dependencies. So, you need to install Bundler first:
</p>
<pre># gem install bundler
</pre>
<p>Then you can install all the gems required by Redmine using the following command:
</p>
<pre># cd /usr/share/webapps/redmine
# bundle install
</pre>
<p>To install without the ruby <i>development</i> and <i>test</i> environments use this instead of the last command:
</p>
<pre># bundle install --without development test
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You can include/exclude environments using the above syntax.</div>
<p>Although <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=imagemagick">imagemagick</a></span> is highly <a href="#ImageMagick_.28recommended.29">recommended</a>, if you do not use it, you should skip the installation of the <code>rmagick</code> gem using:
</p>
<pre># bundle install --without rmagick
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Only the gems that are needed by the adapters you have specified in your database configuration file are actually installed (eg. if your <code>config/database.yml</code> uses the <i>mysql2</i> adapter, then only the mysql2 gem will be installed). Do not forget to re-run <code>bundle install</code> when you change or add adapters in this file.</div>
<h3><span class="mw-headline" id="Session_Store_Secret_Generation">Session Store Secret Generation</span></h3>
<p>Now you must generate a random key that will be used by Rails to encode cookies that stores session data thus preventing their tampering:
</p>
<pre># bundle exec rake generate_secret_token
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> For Redmine prior to 2.x this step is done by executing <code>bundle exec rake generate_session_store</code> (as the root user).</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Generating a new secret token invalidates all existing sessions after restart.</div>
<h3><span class="mw-headline" id="Database_Structure_Creation">Database Structure Creation</span></h3>
<p>With the database created and the access configured for Redmine, now it is time to create the database structure. This is done by running the following command under the application root directory:
</p>
<pre># cd /usr/share/webapps/redmine
# RAILS_ENV=production bundle exec rake db:migrate
</pre>
<p>These command will create tables by running all migrations one by one then create the set of the permissions and the application administrator account, named admin.
</p>
<h3><span class="mw-headline" id="Database_Population_with_Default_Data">Database Population with Default Data</span></h3>
<p>Now you may want to insert the default configuration data in database, like basic types of  task, task states, groups, etc. To do so execute the following:
</p>
<pre># RAILS_ENV=production bundle exec rake redmine:load_default_data
</pre>
<p>Redmine will prompt for the data set language that should be loaded; you can also define the REDMINE_LANG environment variable before running the command to a value which will be automatically and silently picked up by the task:
</p>
<pre># RAILS_ENV=production REDMINE_LANG=pt-BR bundle exec rake redmine:load_default_data
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This step is not mandatory, but it certainly will save you a lot of work to start using Redmine. And for a first time it can be very instructive.</div>
<h3><span class="mw-headline" id="File_System_Permissions">File System Permissions</span></h3>
<p>The user account running the application <b>must</b> have write permission on the following subdirectories:
</p>
<pre><b>files</b>: storage of attachments.
<b>log</b>: application log file production.log.
<b>tmp</b> and <b>tmp/pdf</b>: used to generate PDF documents among other things (create these ones if not present).
</pre>
<p>Assuming you run the application with a the default Apache user <code>http</code> account:
</p>
<pre># mkdir tmp tmp/pdf public/plugin_assets
# chown -R http:http files log tmp public/plugin_assets
# chmod -R 755 files log tmp tmp/pdf public/plugin_assets
</pre>
<h3><span class="mw-headline" id="Test_the_installation">Test the installation</span></h3>
<p>To test your new installation using WEBrick web server run the following in the Redmine folder:
</p>
<pre># ruby bin/rails server webrick -e production
</pre>
<p>Once WEBrick has started, point your browser to <b><a rel="nofollow"  href="http://localhost:3000/">http://localhost:3000/</a></b>. You should now see the application welcome page. Use default administrator account to log in: <i><b>admin</b></i>/<i><b>admin</b></i>. You can go to Administration menu and choose Settings to modify most of the application settings.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Webrick is not suitable for production use, please only use webrick for testing that the installation up to this point is functional. Use one of the many other guides in this wiki to setup redmine to use either Passenger (aka mod_rails), FCGI or a Rack server (Unicorn, Thin, Puma or hellip) to serve up your redmine.</div>
<h3><span class="mw-headline" id="Configure_the_production_server">Configure the production server</span></h3>
<p>For Apache and Nginx, it is recommended to use Phusion Passenger. <a rel="nofollow"  href="http://www.modrails.com/">Passenger</a>, also known as <code>mod_rails</code>, is a module available for <a href="/Usage/Configuration/R/Nginx.html" title="Nginx">Nginx</a> and <a href="/Usage/Configuration/R/Apache_HTTP_Server.html" title="Apache HTTP Server">Apache HTTP Server</a>.
</p>
<p>Start by installing the 'passenger' gem:
</p>
<pre># gem install passenger
</pre>
<p>Now you have to look at your passenger gem installation directory to continue. If you do not known where it is, type:
</p>
<pre># gem env
</pre>
<p>And look at the <code>GEM PATHS</code> to find where the gems are installed. If you followed this guide and installed <a href="/Usage/Configuration/R/RVM.html" title="RVM">RVM</a>, you can have more than one path, look at the one you are using.
</p>
<p>For this guide so far, the gem path is <code>/usr/local/rvm/gems/ruby-2.0.0-p247@global</code>.
</p>
<pre># cd /usr/local/rvm/gems/ruby-2.0.0-p247@global/gems/passenger-4.0.23
</pre>
<p>If you are aiming to use <a href="/Usage/Configuration/R/Apache_HTTP_Server.html" title="Apache HTTP Server">Apache HTTP Server</a>, run:
</p>
<pre># passenger-install-apache2-module
</pre>
<p>In case a rails application is deployed with a sub-URI, like <a rel="nofollow"  href="http://example.com/yourapplication">http://example.com/yourapplication</a>, some additional configuration is required, see <a rel="nofollow"  href="http://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rails_to_sub_uri">the modrails documentation</a>
</p>
<p>For <a href="/Usage/Configuration/R/Nginx.html" title="Nginx">Nginx</a>:
</p>
<pre># passenger-install-nginx-module
</pre>
<p>And finally, the installer will provide you with further information regarding the installation (such as installing additional libraries). So, to setup your server, simply follow the output from the passenger installer.
</p>
<h2><span class="mw-headline" id="Updating">Updating</span></h2>
<p>Backup the files used in Redmine:
</p>
<pre># tar czvf ~/redmine_files.tar.gz -C /usr/share/webapps/redmine/ files
</pre>
<p>Backup the plugins installed in Redmine:
</p>
<pre># tar czvf ~/redmine_plugins.tar.gz -C /usr/share/webapps/redmine/ plugins
</pre>
<p>Backup the database:
</p>
<pre># mysqldump -u root -p &lt;redmine_database&gt; | gzip &gt; ~/redmine_db.sql.gz
</pre>
<p>Update the package as normal (through <a href="/Usage/Configuration/R/TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>):
</p>
<pre># wget <a rel="nofollow"  href="https://aur.archlinux.org/packages/re/redmine/redmine.tar.gz">https://aur.archlinux.org/packages/re/redmine/redmine.tar.gz</a>
# tar -zxpvf redmine.tar.gz
# cd redmine
</pre>
<p>Inspect the downloaded files, mainly the <a href="/Usage/Configuration/R/PKGBUILD.html" title="PKGBUILD">PKGBUILD</a>, and then build:
</p>
<pre># makepkg -s
# pacman -U redmine-2.3.0-2-any.pkg.tar.gz
</pre>
<p>Update the gems requirements:
</p>
<pre>#  bundle update
</pre>
<p>For a clean gems environment, you may want to remove all the gems and reinstall them. To go through this, do:
</p>
<pre># for x in `gem list --no-versions`; do gem uninstall $x -a -x -I; done
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The command above will delete ALL the gems in your system or user, depending of what type of Ruby installation you did in the prerequisites step. You must take care or you can stop working another applications that rely on Ruby gems.</div>
<p>If you did the last step and removed all the gems, now you will need to reinstall them all:
</p>
<pre># gem install bundler
# bundle install --without development test
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you removed ALL the gems as above, and used a server that uses a gem, remember to reinstall the server gem: passenger (for Apache and Nginx), Mongrel or Unicorn. To do this, just follow the steps in the installation tutorial above.</div>
<p>Copy the saved files:
</p>
<pre># tar xzvf ~/redmine_files.tar.gz -C /usr/share/webapps/redmine/
</pre>
<p>Copy the installed plugins:
</p>
<pre># tar xzvf ~/redmine_plugins.tar.gz -C /usr/share/webapps/redmine/
</pre>
<p>Regenerate the secret token:
</p>
<pre># cd /usr/share/webapps/redmine
# bundle exec rake generate_secret_token
</pre>
<p>Check for any themes that you may have installed in the <code>public/themes</code> directory. You can copy them over but checking for updated version is ideal.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Do NOT overwrite config/settings.yml with the old one.</div>
<p>Update the database. This step is the one that could change the contents of your database. Go to your new redmine directory, then migrate your database:
</p>
<pre># RAILS_ENV=production REDMINE_LANG=pt-BR bundle exec rake db:migrate
</pre>
<p>If you have installed any plugins, you should also run their database migrations:
</p>
<pre># RAILS_ENV=production REDMINE_LANG=pt-BR bundle exec rake redmine:plugins:migrate
</pre>
<p>Now, it is time to clean the cache and the existing sessions:
</p>
<pre># RAILS_ENV=production bundle exec rake tmp:cache:clear tmp:sessions:clear
</pre>
<p>Restart the application server (e.g. puma, thin, passenger, etc). And finally go to "Admin -&gt; Roles &amp; permissions" to check/set permissions for the new features, if any.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="RMagick_gem_without_support_for_High_Dynamic_Range_in_ImageMagick">RMagick gem without support for High Dynamic Range in ImageMagick</span></h3>
<p>As of ImageMagick 6.8.6.8-1, it is built with HDRI (High Dynamic Range Image) support, and this breaks the RMagick gem as seen in <a rel="nofollow"  href="https://bugs.archlinux.org/task/36518">FS#36518</a>.
</p>
<p>The github <a rel="nofollow"  href="https://github.com/rmagick/rmagick">rmagick</a> is already patched, but the mantainer did not packed it for rubygems yet.
</p>
<p>To install this patched version download the git repository:
</p>
<pre># git clone <a rel="nofollow"  href="https://github.com/rmagick/rmagick.git">https://github.com/rmagick/rmagick.git</a>
</pre>
<p>Then, you need to build the gem:
</p>
<pre># cd rmagick
# gem build rmagick.gemspec
</pre>
<p>And finally install it:
</p>
<pre># gem install rmagick-2.13.2.gem
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It will show some complains like <code>unable to convert "\xE0" from ASCII-8BIT to UTF-8 for ext/RMagick/RMagick2.so, skipping</code>, but you can safelly ignore it.</div>
<h3><span class="mw-headline" id="Runtime_error_complaining_that_RMagick_was_configured_with_older_version">Runtime error complaining that RMagick was configured with older version</span></h3>
<p>If you get the following runtime error after upgrading ImageMagick <code>This installation of RMagick was configured with ImageMagick 6.8.7 but ImageMagick 6.8.8-1 is in use.</code> then you only need to reinstall (or rebuild as shown above if is the case).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This is due to that when you install the RMagick gem it compiles some native extensions and they may need to be rebuilt after some ImageMagick upgrades.</div>
<h3>
<span id="OpenSSL_error_about_.22SSLv3_client.22"></span><span class="mw-headline" id='OpenSSL_error_about_"SSLv3_client"'>OpenSSL error about "SSLv3_client"</span>
</h3>
<p>After thel latest OpenSSL release (version 1.0.2.g-3) the ruby stop to work and you cannot build some ruby versions. You have two way to fix it:
</p>
<p>1. Use ruby-head (if using RVM) or 2.3.0or above (if using TOS package).
</p>
<p>2. Use this patch as noted in <a rel="nofollow"  href="https://github.com/rvm/rvm/issues/3529#issuecomment-157205030">Issue 3529</a> and <a rel="nofollow"  href="https://github.com/rvm/rvm/issues/3548">Issue 3548</a>
</p>
<pre># curl <a rel="nofollow"  href="https://github.com/ruby/ruby/commit/801e1fe46d83c856844ba18ae4751478c59af0d1.diff">https://github.com/ruby/ruby/commit/801e1fe46d83c856844ba18ae4751478c59af0d1.diff</a> &gt; openssl.patch
# rvm install --patch ./openssl.patch 2.0.0 /*or another ruby version*/
</pre>
<h3>
<span id="Error_when_installing_gems:_Cannot_load_such_file_--_mysql2.2Fmysql2"></span><span class="mw-headline" id="Error_when_installing_gems:_Cannot_load_such_file_--_mysql2/mysql2">Error when installing gems: Cannot load such file -- mysql2/mysql2</span>
</h3>
<p>If you see an error like <code> cannot load such file -- mysql2/mysql2</code>, you are having a problem with the installation of the database gem. Probably a misconfiguration in the <a href="#Database_Access_Configuration">Database Access Configuration</a> step.
In this case you should verify the <code>database.yml</code> file.
</p>
<p>If no success, you can manually install the database gem by:
</p>
<pre># gem install mysql2
</pre>
<p>In last case, as suggested by <a href="/index.php?title=User:Bobdog&amp;action=edit&amp;redlink=1"  title="User:Bobdog (page does not exist)">Bobdog</a>, you can try to comment the line of the database gem and add a new one as bellow:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">&lt;path-to-mysql2-gem-directory&gt;/lib/mysql2/mysql2.rb</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

 # require 'mysql2/mysql2'
 require '&lt;path-to-mysql2-gem-directory&gt;/lib/mysql2/mysql2.so'</pre>
<h3><span class="mw-headline" id="Apache_2.4_Updating">Apache 2.4 Updating</span></h3>
<p>When updating to Apache 2.4 will be necessary to remove and install all your gems to make sure all of them that need to build native extensions will be rebuilt against the new Apache server.
</p>
<p>So, for a clean gems environment, remove all the gems:
</p>
<pre># for x in `gem list --no-versions`; do gem uninstall $x -a -x -I; done
</pre>
<p>To reinstall the gems:
</p>
<pre># cd /usr/share/webapps/redmine
# gem install bundler
# bundle install --without development test
</pre>
<p>Remember to reinstall the RMagick gem as describe above in <a href="#RMagick_gem_without_support_for_High_Dynamic_Range_in_ImageMagick">RMagick gem without support for High Dynamic Range in ImageMagick</a>.
</p>
<p>And if you are using Passenger to serve your apps through Apache you will need to reinstall it as described above in <a href="#Configure_the_production_server">Configure the production server</a>.
</p>
<h3><span class="mw-headline" id="Checkout_SVN_Source">Checkout SVN Source</span></h3>
<p>Get the Redmine source (<a rel="nofollow"  href="http://www.redmine.org/projects/redmine/wiki/Download">Download instructions</a>). Here is method of installing Redmine directly from subversion in /srv/http/redmine/
</p>
<pre># useradd -d /srv/http/redmine -s /bin/false redmine
# mkdir -p /srv/http/redmine
# svn checkout <a rel="nofollow"  href="http://svn.redmine.org/redmine/branches/2.1-stable">http://svn.redmine.org/redmine/branches/2.1-stable</a> /srv/http/redmine
# chown -R redmine: /srv/http/redmine
</pre>
<h3><span class="mw-headline" id="Automating_The_Update_Process">Automating The Update Process</span></h3>
<p>Example of an after-update script:
</p>
<pre>#!/usr/bin/bash
export RAILS_ENV=production
grep -E "^gem 'thin'" Gemfile || echo "gem 'thin'" &gt;&gt; Gemfile
bundle update &amp;&amp; bundle exec rake generate_secret_token db:migrate redmine:plugins:migrate tmp:cache:clear tmp:sessions:clear
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  Note that this script uses Thin as application server, so you must change it to your needs.</div>
<h3><span class="mw-headline" id="Creating_a_Systemd_Unit">Creating a Systemd Unit</span></h3>
<p>If you want to automatic run you application server when system starts, you need to create a systemd unit file.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  This is not needed if you use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=apache">apache</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=nginx">nginx</a></span> with Passenger gem. Those servers already have their own unit file, so you have only to enable it.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/redmine.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Redmine server
After=syslog.target
After=network.target

[Service]
Type=simple
User=redmine2
Group=redmine2
Environment=GEM_HOME=/home/redmine2/.gem/
ExecStart=/usr/bin/ruby /usr/share/webapps/redmine/bin/rails server webrick -e production

# Give a reasonable amount of time for the server to start up/shut down
TimeoutSec=300

[Install]
WantedBy=multi-user.target

</pre>
<h3><span class="mw-headline" id="Complaints_about_psych">Complaints about psych</span></h3>
<p>Like that:
</p>
<pre>/usr/lib/ruby/2.1.0/psych/parser.rb:33:in `&lt;class:Parser&gt;': superclass mismatch for class Mark (TypeError)
from /usr/lib/ruby/2.1.0/psych/parser.rb:32:in `&lt;module:Psych&gt;'
from /usr/lib/ruby/2.1.0/psych/parser.rb:1:in `&lt;top (required)&gt;'
from /usr/lib/ruby/2.1.0/psych.rb:7:in `require'
</pre>
<p><a rel="nofollow"  href="http://www.redmine.org/boards/2/topics/36728">according to that</a> that is a bundler issue, and you have to add
</p>
<pre>gem 'psych'
</pre>
<p>to your Gemfile.local
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow"  href="http://www.redmine.org/">Redmine Official Site</a></li>
<li><a rel="nofollow"  href="http://www.redmine.org/projects/redmine/wiki/Features">Redmine Features</a></li>
<li><a rel="nofollow"  href="http://www.redmine.org/projects/redmine/wiki/RedmineInstall">Official install guide from Redmine Wiki</a></li>
</ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="/Usage/Configuration/R/Category:Issue_tracking_systems.html" title="Category:Issue tracking systems">Issue tracking systems</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="/Usage/Configuration/R/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="/Usage/Configuration/R/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Redmine&amp;oldid=615031">https://wiki.archlinux.org/index.php?title=Redmine&amp;oldid=615031</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 22 May 2020, at 15:31.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="/Usage/Configuration/R/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="/Usage/Configuration/R/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="/Usage/Configuration/R/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



