<!--
    title: Fcitx
    description: Migration of Fcitx from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-29T19:25:31.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">Fcitx</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<p><a href="https://en.wikipedia.org/wiki/Fcitx"  title="wikipedia:Fcitx">Fcitx</a> is a lightweight <a href="/Usage/Configuration/F/Localization.html#Input_methods" class="mw-redirect" title="Input method">input method</a> framework aimed at providing environment independent language support for Linux. It supports a lot of different languages and also provides many useful non-CJK features.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Installation"><span >1</span> <span >Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2">
<a href="#Input_method_engines"><span >1.1</span> <span >Input method engines</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Chinese"><span >1.1.1</span> <span >Chinese</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="#Japanese"><span >1.1.2</span> <span >Japanese</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Other_languages"><span >1.1.3</span> <span >Other languages</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="#Input_method_module"><span >1.2</span> <span >Input method module</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Others"><span >1.3</span> <span >Others</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8">
<a href="#Usage"><span >2</span> <span >Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Desktop_Environment_Autostart"><span >2.1</span> <span >Desktop Environment Autostart</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Set_environment_variables_for_IM_modules"><span >2.2</span> <span >Set environment variables for IM modules</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#XIM"><span >2.3</span> <span >XIM</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12">
<a href="#Configuration"><span >3</span> <span >Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#GUI_configuration_tools"><span >3.1</span> <span >GUI configuration tools</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Input_methods_configuration"><span >3.2</span> <span >Input methods configuration</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Change_default_UI"><span >3.3</span> <span >Change default UI</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Extend_pinyin_dictionary"><span >3.4</span> <span >Extend pinyin dictionary</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Skins"><span >3.5</span> <span >Skins</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Cloud_Pinyin_configuration"><span >3.6</span> <span >Cloud Pinyin configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19">
<a href="#Tips_and_tricks"><span >4</span> <span >Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Clipboard_Access"><span >4.1</span> <span >Clipboard Access</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#fcitx-remote"><span >4.2</span> <span >fcitx-remote</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22">
<a href="#Troubleshooting"><span >5</span> <span >Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Disable_or_change_Extra_key_for_trigger_input_method_%5Bsic%5D"><span >5.1</span> <span >Disable or change <i>Extra key for trigger input method</i> [sic]</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Diagnose_the_problem"><span >5.2</span> <span >Diagnose the problem</span></a></li>
<li class="toclevel-2 tocsection-25">
<a href="#Emacs"><span >5.3</span> <span >Emacs</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#Emacs_Daemon"><span >5.3.1</span> <span >Emacs Daemon</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27"><a href="#Ctrl+Space_fail_to_work_in_GTK_programs"><span >5.4</span> <span >Ctrl+Space fail to work in GTK programs</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Buildin_Chinese_Pinyin_Default_NOT_ACTIVE"><span >5.5</span> <span >Buildin Chinese Pinyin Default NOT ACTIVE</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#fcitx_and_KDE"><span >5.6</span> <span >fcitx and KDE</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Input_method_switched_to_English_unintentionally"><span >5.7</span> <span >Input method switched to English unintentionally</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#xmodmap_settings_being_overwritten"><span >5.8</span> <span >xmodmap settings being overwritten</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-32"><a href="#See_also"><span >6</span> <span >See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="/Usage/Configuration/F/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx">fcitx</a></span> package.
</p>
<h3><span class="mw-headline" id="Input_method_engines">Input method engines</span></h3>
<p>Fcitx provides built-in input methods for Chinese <a href="https://en.wikipedia.org/wiki/Pinyin"  title="wikipedia:Pinyin">Pinyin</a> and table-based input (for example <a href="https://en.wikipedia.org/wiki/Wubi_method"  title="wikipedia:Wubi method">Wubi</a>).
</p>
<p>Depending on the language you wish to type, other input method engines are available:
</p>
<h4><span class="mw-headline" id="Chinese">Chinese</span></h4>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-sunpinyin">fcitx-sunpinyin</a></span>, based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=sunpinyin">sunpinyin</a></span>. It strikes a good balance between speed and accuracy.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-libpinyin">fcitx-libpinyin</a></span>, based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libpinyin">libpinyin</a></span>. It has a better algorithm than <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-sunpinyin">fcitx-sunpinyin</a></span>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-rime">fcitx-rime</a></span>, based on schemas from the <a href="/Usage/Configuration/F/Rime.html" class="mw-redirect" title="Rime IME">Rime IME</a> project.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-googlepinyin">fcitx-googlepinyin</a></span>, the Google pinyin IME for Android.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/fcitx-sogoupinyin/">fcitx-sogoupinyin</a></span><sup><small>AUR</small></sup>, <a rel="nofollow"  href="http://pinyin.sogou.com/linux/">Sogou input method</a> supporting Jianpin, fuzzy sound, cloud input, English input, and mixed skin.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-cloudpinyin">fcitx-cloudpinyin</a></span> uses internet sources to provide input candidates. The selected cloud result will be added to local dictionary. It support all fcitx pinyin input method except <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-rime">fcitx-rime</a></span>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-chewing">fcitx-chewing</a></span> is a popular Zhuyin input engine for Traditional Chinese based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libchewing">libchewing</a></span>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-table-extra">fcitx-table-extra</a></span>  adds <a href="https://en.wikipedia.org/wiki/Cangjie_input_method"  title="wikipedia:Cangjie input method">Cangjie</a>, <a href="https://en.wikipedia.org/wiki/Zhengma_method"  title="wikipedia:Zhengma method">Zhengma</a>, <a href="https://en.wikipedia.org/wiki/Boshiamy_method"  title="wikipedia:Boshiamy method">Boshiamy</a> support.</li>
</ul>
<h4><span class="mw-headline" id="Japanese">Japanese</span></h4>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-mozc">fcitx-mozc</a></span>, based on <a href="/Usage/Configuration/F/Mozc.html" title="Mozc">Mozc</a>, the Open Source Edition of Google Japanese Input.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-kkc">fcitx-kkc</a></span>, a Japanese Kana Kanji input engine, based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libkkc">libkkc</a></span>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-anthy">fcitx-anthy</a></span>, a popular Japanese input engine. However, it is not actively developed anymore.</li>
</ul>
<h4><span class="mw-headline" id="Other_languages">Other languages</span></h4>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-hangul">fcitx-hangul</a></span>, for typing Korean hangul, based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libhangul">libhangul</a></span>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-unikey">fcitx-unikey</a></span>, for typing Vietnamese characters.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-sayura">fcitx-sayura</a></span>, for typing Sinhalese.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-m17n">fcitx-m17n</a></span>, for other languages provided by <a rel="nofollow"  href="http://www.nongnu.org/m17n/">M17n</a>.</li>
</ul>
<h3><span class="mw-headline" id="Input_method_module">Input method module</span></h3>
<p>To obtain a better experience in Qt programs, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/fcitx-qt4/">fcitx-qt4</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-qt5">fcitx-qt5</a></span> input method modules as your need, or the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/groups/x86_64/fcitx-im/">fcitx-im</a></span> group to install all of them. Without those modules, the input method may work on most applications but you may experience input method hang up, preview window screen location error or no preview error. 
</p>
<p>Applications below do not use GTK/Qt input module: 
</p>
<ul>
<li>Applications use Tk, motif or xlib</li>
<li>Emacs, Opera, OpenOffice, LibreOffice, Skype, Wine, Java, Xterm, urxvt, WPS</li>
</ul>
<h3><span class="mw-headline" id="Others">Others</span></h3>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-ui-light">fcitx-ui-light</a></span>, light UI for fcitx.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-table-extra">fcitx-table-extra</a></span>, extra table.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-table-other">fcitx-table-other</a></span>, tables for Latex, Emoji and others.</li>
<li><a href="#GUI_configuration_tools">#GUI configuration tools</a></li>
</ul>
<p>Others packages (including git version) are also available in the <a href="/Usage/Configuration/F/TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>. All components of fcitx will requires fcitx to restart after install.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You need to have <a href="/Usage/Configuration/F/Fonts.html#Chinese,_Japanese,_Korean,_Vietnamese" title="Fonts">Chinese, Japanese, Korean or Vietnamese font</a> installed to be able to enter the corresponding characters.</div>
<h3><span class="mw-headline" id="Desktop_Environment_Autostart">Desktop Environment Autostart</span></h3>
<p>If you are using any XDG compatible desktop environment such as <a href="/Usage/Configuration/F/KDE.html" title="KDE">KDE</a>, <a href="/Usage/Configuration/F/GNOME.html" title="GNOME">GNOME</a>, <a href="/Usage/Configuration/F/Xfce.html" title="Xfce">Xfce</a>, <a href="/Usage/Configuration/F/LXDE.html" title="LXDE">LXDE</a>, after you re-login, the autostart should work out of box. If not run the <i>fcitx</i> executable. To see if fcitx is working correctly, open an application and press <code>Ctrl+Space</code> (the default shortcut for switching the input method) to invoke fcitx and input some words.
</p>
<p>If fcitx failed to start with your desktop automatically or if you want to change the parameters to start fcitx, configure <a href="/Usage/Configuration/F/Autostarting.html#On_Xorg_startup" title="Autostarting">autostart</a> or edit the <code>fcitx-autostart.desktop</code> file in your <code>~/.config/autostart/</code> directory (copy it from <code>/etc/xdg/autostart/</code> if it doesn't exist yet).
</p>
<p>When other input methods with xim support are also running, fcitx may fail to start due to an xim error. Ensure that no other input methods are running before you start fcitx.
</p>
<p>Also please set the following environment variables to prefer IM modules for GTK/Qt applications.
</p>
<h3><span class="mw-headline" id="Set_environment_variables_for_IM_modules">Set environment variables for IM modules</span></h3>
<p><a href="/Usage/Configuration/F/Environment_variables.html#Defining_variables" class="mw-redirect" title="Define">Define</a> the environment variables to register the input method modules. Without these variables, applications may fallback to XIM protocol, except for qt5 applications which don't have XIM support and require a IM module in place.
</p>
<p>As a general recommendation, please define the following environment variables in <code>~/.pam_environment</code> , it will be read by <a href="/Usage/Configuration/F/PAM.html" title="PAM">pam-env</a> module for all logins, including both the X11 sessions and Wayland sessions. See <code>man 8 pam-env</code> for details of its syntax and usage.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.pam_environment</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">GTK_IM_MODULE=fcitx
QT_IM_MODULE=fcitx
XMODIFIERS=@im=fcitx
</pre>
<p>In case you don't want to define the above variables in <code>~/.pam_environment</code> for all your login sessions, please consider adding them to one of the start files for your X11 session.
Most <a href="/Usage/Configuration/F/Display_manager.html" title="Display manager">Display manager</a> such as <a href="/Usage/Configuration/F/GDM.html" title="GDM">GDM</a> and <a href="/Usage/Configuration/F/SDDM.html" title="SDDM">SDDM</a> will source <code>~/.xprofile</code> file for X11 sessions (but not for Wayland sessions).
The syntax of <code>~/.xprofile</code> file may depend on the specific <a href="/Usage/Configuration/F/Display_manager.html" title="Display manager">Display manager</a> and your login shell, consider the following example and modify it to suit your shell syntax:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xprofile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS=@im=fcitx
</pre>
<p><br>
For <a href="/Usage/Configuration/F/SLiM.html" title="SLiM">SLiM</a> or <a href="/Usage/Configuration/F/Xinit.html" class="mw-redirect" title="Startx">startx</a> users, they do NOT source <code>~/.xprofile</code>, but instead run <code>~/.xinitrc</code> to start your X11 session. Add the export lines to your <code>~/.xinitrc</code> before the <code>exec YOUR_WM</code> line:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xinitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS=@im=fcitx
...
exec YOUR_WM
</pre>
<p><br>
Re-login or reboot to make these environment changes effective.
</p>
<p>If <i>fcitx</i> process does not start automatically, you might need to add <code>fcitx &amp;</code> in your <code>~/.xinitrc</code>.
If <code>fcitx &amp;</code> doesn't start, type <code>sleep 2</code> after it
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Avoid <code>.bashrc</code> for this, see <a href="https://mywiki.wooledge.org/DotFiles"  title="gregswiki:DotFiles">GregsWiki:DotFiles</a>.</li>
<li>If all Qt apps have problem with fcitx, run <i>qtconfig</i> (<i>qtconfig-qt4</i>), and go to the third tab, make sure <i>fcitx</i> is in the <i>Default Input Method</i> combo-box.</li>
</ul>
</div>
<h3><span class="mw-headline" id="XIM">XIM</span></h3>
<p>Optionally, you can use the <a href="https://en.wikipedia.org/wiki/X_Input_Method"  title="wikipedia:X Input Method">X Input Method</a> (XIM) in your GTK and/or Qt programs without installing the above modules in which case you need to change the corresponding lines above as following:
</p>
<pre>GTK_IM_MODULE=xim
QT_IM_MODULE=xim
</pre>
<p>If you change it in <code>~/.xprofile</code> or <code>~/.xinitrc</code>, add <code>export</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong>  Using XIM can sometimes cause problems including not being able to input, no cursor following, word selection window issue, application freeze on input method restart. For these XIM related problems, Fcitx cannot provide any fix or support. This is the same with any other input method framework, so please use the GTK and Qt input method modules instead of xim whenever possible</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Gtk2 uses <code>/usr/lib/gtk-2.0/2.10.0/immodules.cache</code> as immodule cache file since 2.24.20. If you have set <code>GTM_IM_MODULE_FILE</code> environment variable or do not use install script of official packages to update the cache, please change/clear the environment variable and use <code>/usr/bin/gtk-query-immodules-2.0 --update-cache</code> to update immodule cache.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  Qt5 applications no longer support XIM protocol as Qt4 did, and rely on IM modules entirely for communicating with fcitx.</div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="GUI_configuration_tools">GUI configuration tools</span></h3>
<p>fcitx provides a <a href="/Usage/Configuration/F/KDE.html" title="KDE">KDE</a> configuration module (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=kcm-fcitx">kcm-fcitx</a></span>) and a GTK3 configuration tool (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-configtool">fcitx-configtool</a></span>).
</p>
<p>Run <i>fcitx-config-gtk3</i> after <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-configtool">fcitx-configtool</a></span> is installed. Unset <i>Only Show Current Language</i> if you want to enable an input method for a different language.
</p>
<p>Stop fcitx manually before changing configuration, or the change may be lost.  
</p>
<p>In order to enable spell checking, press <code>Ctrl+Alt+h</code> when fcitx is on an input method provided by fcitx-keyboard.
</p>
<h3><span class="mw-headline" id="Input_methods_configuration">Input methods configuration</span></h3>
<p>You can add/remove input methods in the GUI tools. Note that the search is case sensitive.
</p>
<p>The first set input method is the inactive state, while all the rest will be active states. You generally want the inactive state to be one of the <i>Keyboard</i> options (e.g. "Keyboard - English (US)"). These options just input based on the keyboard layout in the name.
</p>
<p>Under <i>Global Config</i>, the <i>Trigger Input Method</i> shortcut will only switch between the inactive and last used active state. The <i>Scroll between Input Methods</i> will by default only scroll between different active states, but can also be set to include the inactive state in the advanced settings. Furthermore, the <i>Scroll between Input Methods</i> shortcut has to be pressed in order, e.g. <code>ALT_SHIFT</code> will only activate if <code>alt</code> is pressed before <code>shift</code>.
</p>
<p>Configuration settings for IME's can be found by by setting the keyboard to the desired IME and right-clicking the tray icon.
</p>
<h3><span class="mw-headline" id="Change_default_UI">Change default UI</span></h3>
<p>Fcitx support kimpanel protocol to provide better desktop integration.
</p>
<ul>
<li>Gnome-Shell: You can install kimpanel from extensions.gnome.org or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/gnome-shell-extension-kimpanel-git/">gnome-shell-extension-kimpanel-git</a></span><sup><small>AUR</small></sup>, which provides a similar user experience as ibus-gjs.</li>
<li>KDE: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=kimtoy">kimtoy</a></span> could use skin from Sogou and fcitx.</li>
</ul>
<h3><span class="mw-headline" id="Extend_pinyin_dictionary">Extend pinyin dictionary</span></h3>
<p>Pinyin dictionary is located at <code>~/.config/fcitx/pinyin</code>. File <code>pybase.mb</code> is for single characters and file <code>pyphrase.mb</code> defines pinyin phrases. To extend them, put your file into <code>/usr/share/fcitx/pinyin</code> and restart fcitx.
</p>
<h3><span class="mw-headline" id="Skins">Skins</span></h3>
<p>You can download skins and extract them to one of the following directories, you can create the directory if it doesn't exist:
</p>
<pre>/usr/share/fcitx/skin   #Global settings
~/.config/fcitx/skin    #User settings
</pre>
<h3><span class="mw-headline" id="Cloud_Pinyin_configuration">Cloud Pinyin configuration</span></h3>
<p>After installing the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-cloudpinyin">fcitx-cloudpinyin</a></span> input method, restart fcitx. If you could not find it in configuration GUI, enable advanced settings. The cloud query result will be added to current input method dictionary automatically. 
</p>
<p>If your network prevents you from accessing Google, change Cloud Pinyin source to Baidu.
</p>
<p>The query result from cloud will list as secondary candidate by default and it is configurable. If the result already exists, only one item is shown. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Set query result as first candidate is not recommend because the dictionary order will be changed if query returns an empty result</div>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Clipboard_Access">Clipboard Access</span></h3>
<p>You can use fcitx to input text in you clipboard (as well as a short clipboard history and primary selection). The default trigger key is <code>Ctrl-;</code>. You can change the trigger key as well as other options in the Clipboard addon configure page.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This is NOT a clipboard manager, it doesn't hold the selection or change its content as what a clipboard manager is supposed to do. It can only be used to input from the clipboard.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong>  Some clients do not support multi-line input, so you may see the multi-line clipboard content pasted as a single line using fcitx-clipboard. This is either a bug or feature of the program being used and it is not something fcitx is able to help with.</div>
<h3><span class="mw-headline" id="fcitx-remote">fcitx-remote</span></h3>
<p><i>fcitx-remote</i> is a commandline tool that can be used to control the fcitx state. It is installed with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx">fcitx</a></span> package.
</p>
<p>One option worth elaborating upon here is <code>fcitx-remote -s <i>imname</i></code>, which switches to the input method identified by <code><i>imname</i></code>. The correct <code><i>imname</i></code> for an in use input method can be found by executing <i>fcitx-diagnose</i>, and looking under the "## Input Methods:" section.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id="Disable_or_change_Extra_key_for_trigger_input_method_.5Bsic.5D"></span><span class="mw-headline" id="Disable_or_change_Extra_key_for_trigger_input_method_[sic]">Disable or change <i>Extra key for trigger input method</i> [sic]</span>
</h3>
<p>This setting is under the <i>Global Config</i> tab and defaults to <i>SHIFT Both</i>, meaning that pressing <i>either</i> shift key will immediately change input methods. Although it should only apply when a shift key is pressed individually, it tends to randomly interrupt typing capital letters, selecting text with the keyboard, etc. while using standard keyboard input.
</p>
<p>In addition, this setting may revert to default without warning at any time. To ensure fcitx's config cannot be modified, you must make fcitx's config file immutable: <code>chattr +i ~/.config/fcitx/config</code> (as the root user).
</p>
<h3><span class="mw-headline" id="Diagnose_the_problem">Diagnose the problem</span></h3>
<p>If you have problems using fcitx, eg. Ctrl+Space fail to work in all applications, then the first thing you should try is to diagnose using <code>fcitx-diagnose</code>.
The output of <code>fcitx-diagnose</code> should contain the clue to most common problems.
Providing the output of it will also help when you consult other people(eg. in IRC or forums).
</p>
<h3><span class="mw-headline" id="Emacs">Emacs</span></h3>
<p>If your <code>LC_CTYPE</code> is English, you may not be able to use input method in emacs due to an old emacs bug. You can set your <code>LC_CTYPE</code> to something else such as <code>zh_CN.UTF-8</code> before emacs starts to get rid of this problem. 
</p>
<p>Note that the corresponding <a href="/Usage/Configuration/F/Locale.html" title="Locale">locale</a> should be <a href="/Usage/Configuration/F/Locale.html#Generating_locales" title="Locale">generated</a> on your your system.
</p>
<p>The default fontset will use `-*-*-*-r-normal--14-*-*-*-*-*-*-*' as basefont (in <code>src/xfns.c</code>), if you do not have one matched (like terminus or 75dpi things, you can look the output of `xlsfonts'), XIM can not be activated.
</p>
<h4><span class="mw-headline" id="Emacs_Daemon">Emacs Daemon</span></h4>
<p>If you are using <a href="/Usage/Configuration/F/Emacs.html#As_a_daemon" title="Emacs">emacs daemon/client mode</a>, <code>LC_CTYPE</code> should be set when starting the daemon. For example, by running emacs daemon with <code>LC_CTYPE=zh_CN.UTF-8 emacs --daemon</code>.
</p>
<p>If starting emacs daemon from <a href="/Usage/Configuration/F/Systemd.html" title="Systemd">systemd</a>, <a href="/Usage/Configuration/F/Systemd.html#Editing_provided_units" title="Systemd">set</a> <code>Environment="LC_CTYPE=zh_CN.UTF-8" "XMODIFIERS=@im=fcitx"</code> in the unit file.
</p>
<p>(<code>XMODIFIERS</code> may need to be set explicitly here as systemd doesn't load <code>.xprofile</code>. Check the <code>initial-environment</code> variable in emacs to verify both variables are set correctly.)
</p>
<h3>
<span id="Ctrl.2BSpace_fail_to_work_in_GTK_programs"></span><span class="mw-headline" id="Ctrl+Space_fail_to_work_in_GTK_programs">Ctrl+Space fail to work in GTK programs</span>
</h3>
<p>This problem sometimes happens especially when the locale is set as English. Please make sure your <code>GTK_IM_MODULE</code> is set correctly.
</p>
<p>See also <a rel="nofollow"  href="http://fcitx-im.org/wiki/FAQ#When_use_Ctrl_.2B_Space.2C_Fcitx_cannot_be_triggered_on">FAQ</a>
</p>
<p>If you have set the <code>*_IM_MODULE</code> environment variables to fcitx but cannot activate fcitx, please check if you have installed the corresponding input method modules.
</p>
<p>Some programs can only use xim, if you are using these programs, please make sure your <code>XMODIFIERS</code> is set properly and be aware of the problems you may have. These programs include all programs that are not using GTK or Qt (e.g. programs that use tk, motif, or xlib directly), emacs, opera, openoffice, libreoffice, skype.
</p>
<p>If you cannot enable fcitx in <i>gnome-terminal</i> under Gnome and the above way doesn't work, try:
</p>
<pre>$ gsettings set org.gnome.settings-daemon.plugins.xsettings overrides "{'Gtk/IMModule':&lt;'fcitx'&gt;}"
</pre>
<h3><span class="mw-headline" id="Buildin_Chinese_Pinyin_Default_NOT_ACTIVE">Buildin Chinese Pinyin Default NOT ACTIVE</span></h3>
<p>If your locale is <code>en_US.UTF-8</code>, fcitx did NOT enable the buildin Chinese Pinyin input method by default. There is only <code>fcitx-keyboard-us</code> input method enabled. You can get a notice by <code>fcitx-diagnose</code> command like this:
</p>
<pre>   ## Input Methods:
       1.  Found 1 enabled input methods:
               fcitx-keyboard-us
       2.  Default input methods:
           **You only have one input method enabled, please add a keyboard input method as the first one and your main input method as the second one.**
</pre>
<p>Then you should add <code>Pinyin</code> or <code>Shuangpin</code> input method to actived input methods by the GUI configure tool.
</p>
<h3><span class="mw-headline" id="fcitx_and_KDE">fcitx and KDE</span></h3>
<p>For some reasons, <a href="/Usage/Configuration/F/KDE.html" title="KDE">KDE</a> doesn't handle keyboard layouts properly. For example, if you switch from US (English) to LT (Lithuanian), all numbers on the keyboard should produce Lithuanian letters, but they still produce numbers as the output. This can be fixed by these steps:
</p>
<ol>
<li>Turn off <i>fcitx</i> if it is running in the background.</li>
<li>Disable stuff related to KDE:
<ol>
<li>At <i>System settings &gt; Input devices &gt; Layouts (tab)</i> make sure that <i>Configure layouts</i> is unchecked.</li>
<li>At <i>System settings &gt; Input devices &gt; Advanced (tab)</i> make sure that <i>Configure keyboard options</i> is unchecked.</li>
</ol>
</li>
<li>Start <i>fcitx</i> to start it. You can close the terminal - <i>fcitx</i> will still be running in the background.</li>
<li>Set up your needed layouts (right click on the system tray icon, then <i>Configure</i>).</li>
<li>Right click on the system tray icon, then <i>Exit</i>
</li>
</ol>
<p>At this point you should have working layouts, native KDE layouts switch icon should appear and you can switch them by mouse scroll or click on it.
</p>
<h3><span class="mw-headline" id="Input_method_switched_to_English_unintentionally">Input method switched to English unintentionally</span></h3>
<p>For instance, in XMind, when the user presses <code>Enter</code> to create a node, input method is always switched to English, and has to be switched back to Chinese manually.
</p>
<p>To fix this issue, open the <i>fcitx</i> GUI configuration tool (provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=fcitx-configtool">fcitx-configtool</a></span>), switch to tab <i>Global Config</i>, in dropdown menu <i>Share State Among Window</i>, select <i>PerProgram</i> or <i>All</i>.
</p>
<h3><span class="mw-headline" id="xmodmap_settings_being_overwritten">xmodmap settings being overwritten</span></h3>
<p>fcitx controls keyboard layout, so your <a href="/Usage/Configuration/F/Xmodmap.html" title="Xmodmap">xmodmap</a> settings will be overwritten.
Since 4.2.7, Fcitx will try to load <code>~/.Xmodmap</code> if it exists.
</p>
<p>For more details on how you can save your xmodmap changes see <a rel="nofollow"  href="http://fcitx-im.org/wiki/FAQ#xmodmap_settings_being_overwritten">FAQ</a>
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow"  href="https://gitlab.com/fcitx/fcitx">Fcitx GitLab</a></li>
<li><a rel="nofollow"  href="http://fcitx-im.org/">Fcitx Wiki</a></li>
</ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="/Usage/Configuration/F/Category:Input_methods.html" title="Category:Input methods">Input methods</a></li></ul>
</div></div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Fcitx&amp;oldid=608582">https://wiki.archlinux.org/index.php?title=Fcitx&amp;oldid=608582</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 28 April 2020, at 02:42.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="/Usage/Configuration/F/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="/Usage/Configuration/F/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="/Usage/Configuration/F/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



