<!--
    title: ImageMagick
    description: Migration of ImageMagick from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-29T19:25:31.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">ImageMagick</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" ><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" ><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> If these formats are disabled for libmagick by default, shouldn't they also be disabled for graphicsmagick by default? (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:ImageMagick">Talk:ImageMagick#</a>)</div>
</div>
<p>According to <a href="https://en.wikipedia.org/wiki/ImageMagick"  title="wikipedia:ImageMagick">Wikipedia</a>:
</p>
<dl><dd>ImageMagick is a free and open-source software suite for displaying, converting, and editing raster image and vector image files. It can read and write over 200 image file formats.</dd></dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=imagemagick">imagemagick</a></span> uses <a href="/Usage/Configuration/I/PDF,_PS_and_DjVu.html#Engines" class="mw-redirect" title="Ghostscript">Ghostscript</a> for PDF, EPS, PS and XPS parsing. Because there have been multiple vulnerabilities with Ghostscript<a rel="nofollow"  href="https://security.archlinux.org/package/ghostscript">[1]</a>, it is compiled without Ghostscript library. It would fall back to <code>gs</code> command instead, but that is, by default, disabled in <code>/etc/ImageMagick-7/policy.xml</code> with the following line
<pre>&lt;policy domain="delegate" rights="none" pattern="gs" /&gt;
</pre> See also <a rel="nofollow"  href="https://bugs.archlinux.org/task/59778">FS#59778</a>, <a rel="nofollow"  href="https://bugs.archlinux.org/task/62171">FS#62171</a>.
</div>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span >1</span> <span >Installation</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Usage"><span >2</span> <span >Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Screenshot_taking"><span >2.1</span> <span >Screenshot taking</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Screenshot_of_multiple_X_screens"><span >2.1.1</span> <span >Screenshot of multiple X screens</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Screenshot_of_individual_Xinerama_heads"><span >2.1.2</span> <span >Screenshot of individual Xinerama heads</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Screenshot_of_the_active/focused_window"><span >2.1.3</span> <span >Screenshot of the active/focused window</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#See_also"><span >3</span> <span >See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="/Usage/Configuration/I/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=imagemagick">imagemagick</a></span> package. Alternatively install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=graphicsmagick">graphicsmagick</a></span> for <a href="https://en.wikipedia.org/wiki/GraphicsMagick"  title="wikipedia:GraphicsMagick">GraphicsMagick</a>, a fork of ImageMagick, emphasizing stability of the API and command-line interface.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 1 ImageMagick"><a rel="nofollow"  href="https://jlk.fjfi.cvut.cz/arch/manpages/man/ImageMagick.1">ImageMagick(1)</a></span>, or <span class="plainlinks archwiki-template-man" title="$ man 1 gm"><a rel="nofollow"  href="https://jlk.fjfi.cvut.cz/arch/manpages/man/gm.1">gm(1)</a></span> for GraphicsMagick.
</p>
<p>Popular operations include <code>-append</code>, <code>-resize</code>, <code>-rotate</code>, <code>-quality</code> and many more. For example, to combine multiple pictures into one:
</p>
<pre>$ convert -append <i>input.pngs</i> <i>output.png</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The sign before an option is important. Opposite operations can be performed by using a <i>plus</i> instead of a <i>minus</i>.</div>
<p>To crop part of multiple images and convert them to another format:
</p>
<pre>$ mogrify -crop <i>WIDTH</i>x<i>HEIGHT</i>+<i>X</i>+<i>Y</i> -format jpg *.png
</pre>
<p>Where <i>WIDTH</i> and <i>HEIGHT</i> is the cropped output image size, and <i>X</i> and <i>Y</i> is the offset from the input image size.
</p>
<h3><span class="mw-headline" id="Screenshot_taking">Screenshot taking</span></h3>
<p>An easy way to take a screenshot of your current system is using the <span class="plainlinks archwiki-template-man" title="$ man 1 import"><a rel="nofollow"  href="https://jlk.fjfi.cvut.cz/arch/manpages/man/import.1">import(1)</a></span> command:
</p>
<pre>$ import -window root screenshot.jpg
</pre>
<p><code>import</code> is part of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=imagemagick">imagemagick</a></span> package.
</p>
<p>Running <code>import</code> without the <code>-window</code> option allows selecting a window or an arbitrary region interactively.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you prefer <b>graphicsmagick</b> alternative, just prepend "gm", e.g. <code>$ gm import -window root screenshot.jpg</code>.</div>
<h4><span class="mw-headline" id="Screenshot_of_multiple_X_screens">Screenshot of multiple X screens</span></h4>
<p>If you run twinview or dualhead, simply take the screenshot twice and use <code>imagemagick</code> to paste them together:
</p>
<pre>import -window root -display :0.0 -screen /tmp/0.png
import -window root -display :0.1 -screen /tmp/1.png
convert +append /tmp/0.png /tmp/1.png screenshot.png
rm /tmp/{0,1}.png
</pre>
<h4><span class="mw-headline" id="Screenshot_of_individual_Xinerama_heads">Screenshot of individual Xinerama heads</span></h4>
<p>Xinerama-based multi-head setups have only one virtual screen. If the physical screens are different in height, you will find dead space in the screenshot. In this case, you may want to take screenshot of each physical screen individually. As long as Xinerama information is available from the X server, the following will work:
</p>
<pre>#!/bin/sh
xdpyinfo -ext XINERAMA | sed '/^  head #/!d;s///' |
while IFS=' :x@,' read i w h x y; do
        import -window root -crop ${w}x$h+$x+$y head_$i.png
done
</pre>
<h4>
<span id="Screenshot_of_the_active.2Ffocused_window"></span><span class="mw-headline" id="Screenshot_of_the_active/focused_window">Screenshot of the active/focused window</span>
</h4>
<p>The following script takes a screenshot of the currently focused window. It works with EWMH/NetWM compatible X Window Managers. To avoid overwriting previous screenshots, the current date is used as the filename.
</p>
<pre>#!/bin/sh
activeWinLine=$(xprop -root | grep "_NET_ACTIVE_WINDOW(WINDOW)")
activeWinId=${activeWinLine:40}
import -window "$activeWinId" /tmp/$(date +%F_%H%M%S_%N).png
</pre>
<p>Alternatively, the following should work regardless of EWMH support:
</p>
<pre>$ import -window "$(xdotool getwindowfocus -f)" /tmp/$(date +%F_%H%M%S_%N).png
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If screenshots of some programs (dwb and zathura) appear blank, try appending <code>-frame</code> or removing <code>-f</code> from the <code>xdotool</code> command.</div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow"  href="http://www.imagemagick.org/">ImageMagick website</a> for an extensive list of options and examples.</li>
<li><a href="/Usage/Configuration/I/List_of_applications/Multimedia.html#Image_processing" title="List of applications/Multimedia">List of applications/Multimedia#Image processing</a></li>
</ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="/Usage/Configuration/I/Category:Multimedia.html" title="Category:Multimedia">Multimedia</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/Usage/Configuration/I/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=ImageMagick&amp;oldid=589220">https://wiki.archlinux.org/index.php?title=ImageMagick&amp;oldid=589220</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 17 November 2019, at 19:20.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="/Usage/Configuration/I/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="/Usage/Configuration/I/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="/Usage/Configuration/I/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



