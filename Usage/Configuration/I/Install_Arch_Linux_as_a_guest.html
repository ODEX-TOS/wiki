<!--
    title: Install_TOS_Linux_as_a_guest
    description: Migration of Install_TOS_Linux_as_a_guest from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-29T19:40:39.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">VMware/Install TOS Linux as a guest</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"><span >&lt; <a href="..//Usage/Configuration/V/VMware.html" title="VMware">VMware</a></span></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="..//Usage/Configuration/V/VMware.html" title="VMware">VMware</a></li>
<li><a href="..//Usage/Configuration/I/Installing_VMWare_vCLI.html" title="Installing VMWare vCLI">Installing VMWare vCLI</a></li>
</ul>
</div>
<p>This article is about installing TOS Linux in a <a href="..//Usage/Configuration/V/VMware.html" title="VMware">VMware</a> product, such as <a rel="nofollow"  href="http://www.vmware.com/products/player/">Player (Plus)</a>, <a rel="nofollow"  href="http://www.vmware.com/products/fusion/">Fusion</a> or <a rel="nofollow"  href="http://www.vmware.com/products/workstation/">Workstation</a>.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#In-kernel_drivers"><span >1</span> <span >In-kernel drivers</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#VMware_Tools_versus_Open-VM-Tools"><span >2</span> <span >VMware Tools versus Open-VM-Tools</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Open-VM-Tools"><span >3</span> <span >Open-VM-Tools</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Utilities"><span >3.1</span> <span >Utilities</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Modules"><span >3.2</span> <span >Modules</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Installation"><span >3.3</span> <span >Installation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Official_VMware_Tools"><span >4</span> <span >Official VMware Tools</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Modules_2"><span >4.1</span> <span >Modules</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Installation_(from_guest)"><span >4.2</span> <span >Installation (from guest)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Xorg_configuration"><span >5</span> <span >Xorg configuration</span></a></li>
<li class="toclevel-1 tocsection-11">
<a href="#Tips_and_tricks"><span >6</span> <span >Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-12">
<a href="#Shared_Folders_with_vmhgfs-fuse_utility"><span >6.1</span> <span >Shared Folders with vmhgfs-fuse utility</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#fstab"><span >6.1.1</span> <span >fstab</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Systemd"><span >6.1.2</span> <span >Systemd</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15">
<a href="#Legacy_Shared_Folders_with_vmhgfs_module"><span >6.2</span> <span >Legacy Shared Folders with vmhgfs module</span></a>
<ul>
<li class="toclevel-3 tocsection-16">
<a href="#Enable_at_boot"><span >6.2.1</span> <span >Enable at boot</span></a>
<ul>
<li class="toclevel-4 tocsection-17"><a href="#fstab_2"><span >6.2.1.1</span> <span >fstab</span></a></li>
<li class="toclevel-4 tocsection-18"><a href="#Systemd_2"><span >6.2.1.2</span> <span >Systemd</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-19"><a href="#Prune_mlocate_DB"><span >6.2.2</span> <span >Prune mlocate DB</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20">
<a href="#3D_Acceleration"><span >6.3</span> <span >3D Acceleration</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#OpenGL_and_GLSL_support"><span >6.3.1</span> <span >OpenGL and GLSL support</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-22">
<a href="#Time_synchronization"><span >6.4</span> <span >Time synchronization</span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="#Host_machine_as_time_source"><span >6.4.1</span> <span >Host machine as time source</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#External_server_as_time_source"><span >6.4.2</span> <span >External server as time source</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-25">
<a href="#Performance_Tips"><span >6.5</span> <span >Performance Tips</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#Paravirtual_SCSI_adapter"><span >6.5.1</span> <span >Paravirtual SCSI adapter</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#Paravirtual_Network_Adapter"><span >6.5.2</span> <span >Paravirtual Network Adapter</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Virtual_Machine_Settings"><span >6.5.3</span> <span >Virtual Machine Settings</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-29">
<a href="#Troubleshooting"><span >7</span> <span >Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#Network_slow_on_guest"><span >7.1</span> <span >Network slow on guest</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#File_share_problems_with_legacy_vmhgfs_module_and_newer_kernels"><span >7.2</span> <span >File share problems with legacy vmhgfs module and newer kernels</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Sound_problems"><span >7.3</span> <span >Sound problems</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Mouse_problems"><span >7.4</span> <span >Mouse problems</span></a></li>
<li class="toclevel-2 tocsection-34">
<a href="#Boot_problems"><span >7.5</span> <span >Boot problems</span></a>
<ul>
<li class="toclevel-3 tocsection-35"><a href="#Slow_boot_time"><span >7.5.1</span> <span >Slow boot time</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#Shutdown/Reboot_hangs"><span >7.5.2</span> <span >Shutdown/Reboot hangs</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-37">
<a href="#Window_resolution_autofit_problems"><span >7.6</span> <span >Window resolution autofit problems</span></a>
<ul>
<li class="toclevel-3 tocsection-38"><a href="#Potential_solution_1"><span >7.6.1</span> <span >Potential solution 1</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Potential_solution_2"><span >7.6.2</span> <span >Potential solution 2</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Potential_solution_3"><span >7.6.3</span> <span >Potential solution 3</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Potential_solution_4"><span >7.6.4</span> <span >Potential solution 4</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="#Potential_solution_5"><span >7.6.5</span> <span >Potential solution 5</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-43"><a href="#Drag_and_drop,_copy/paste"><span >7.7</span> <span >Drag and drop, copy/paste</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#Problems_when_running_as_a_shared_VM_on_Workstation_11"><span >7.8</span> <span >Problems when running as a shared VM on Workstation 11</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#Shared_folder_not_mounted_after_system_upgrade"><span >7.9</span> <span >Shared folder not mounted after system upgrade</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="In-kernel_drivers">In-kernel drivers</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> TOS's <a href="..//Usage/Configuration/U/Udev.html" title="Udev">Udev</a> auto-detects and enables some of these modules.  If any of them is not auto-detected (check by running <code>lsmod | grep <i>modulename</i></code> ) and if it is required, the module can be added to <a href="..//Usage/Configuration/M/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a>'s <code>MODULES</code> array.  For example:
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
MODULES=(... vmw_balloon vmw_pvscsi vsock vmw_vsock_vmci_transport ...)</pre>
<p>Make sure to <a href="..//Usage/Configuration/M/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
</div>
<ul>
<li>
<code>vmw_balloon</code> - The physical memory management driver. It acts like a "balloon" that can be inflated to reclaim physical pages by reserving them in the guest and invalidating them in the monitor, freeing up the underlying machine pages so they can be allocated to other guests. It can also be deflated to allow the guest to use more physical memory. Deallocated Virtual Machine memory can be reused in the host without terminating the guest.</li>
<li>
<code>vmw_pvscsi</code> - For VMware's Paravirtual SCSI (PVSCSI) HBA.</li>
<li>
<code>vmw_vmci</code> - The Virtual Machine Communication Interface. It enables high-speed communication between host and guest in a virtual environment via the VMCI virtual device.</li>
<li>
<code>vmwgfx</code> - For 3D acceleration. This is a KMS enabled DRM driver for the VMware SVGA2 virtual hardware.</li>
<li>
<code>vmxnet3</code> - For VMware's vmxnet3 virtual ethernet NIC.</li>
<li>a fuse-based hgfs implementation has been added to <code>open-vm-tools</code> 10.0+ and is supported from kernel version 4.0+.</li>
</ul>
<p>The following drivers are only needed if you are running TOS Linux on a hypervisor like <a rel="nofollow"  href="http://www.vmware.com/products/vsphere-hypervisor">VMware vSphere Hypervisor</a>. Client-server applications can write to the VMCI Sock (vsock) interface to make use of the VMCI virtual device, when communicating between virtual machines.
</p>
<ul>
<li>
<code>vsock</code> - The Virtual Socket Protocol. It is similar to the TCP/IP socket protocol, allowing communication between Virtual Machines and hypervisor or host.</li>
<li>
<code>vmw_vsock_vmci_transport</code> - Implements a VMCI transport for Virtual Sockets.</li>
</ul>
<p>Some modules, such as the legacy <code>vmhgfs</code> shared folder module, will require additional work to manually <code>compile</code> and systemd <code>enable</code> in order to function properly.
</p>
<h2><span class="mw-headline" id="VMware_Tools_versus_Open-VM-Tools">VMware Tools versus Open-VM-Tools</span></h2>
<p>In 2007, VMware released large partitions of the <a rel="nofollow"  href="http://kb.vmware.com/kb/340">VMware Tools</a> under the LGPL as <a rel="nofollow"  href="http://sourceforge.net/projects/open-vm-tools/">Open-VM-Tools</a>. The official Tools are not available <a rel="nofollow"  href="http://packages.vmware.com/tools/esx/latest/repos/index.html">separately</a> for TOS Linux.
</p>
<p>Originally, VMware Tools provided the best drivers for network and storage, combined with the functionality for other features such as time synchronization. However, now the drivers for the network/SCSI adapter are part of the Linux kernel.
</p>
<p>The official VMware Tools also had the advantage of being able to use the Unity mode feature, but as of VMWare Workstation 12, Unity mode for Linux guests has been removed due to lack of use and developer difficulties in maintaining the feature. See <a rel="nofollow"  href="https://communities.vmware.com/thread/518735">this thread</a>.
</p>
<h2><span class="mw-headline" id="Open-VM-Tools">Open-VM-Tools</span></h2>
<h3><span class="mw-headline" id="Utilities">Utilities</span></h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=open-vm-tools">open-vm-tools</a></span> package comes with the following utilities:
</p>
<ul>
<li>
<code>vmtoolsd</code> - Service responsible for the Virtual Machine status report.</li>
<li>
<code>vmware-checkvm</code> - Tool to check whether a program is running in the guest.</li>
<li>
<code>vmware-toolbox-cmd</code> - Tool to obtain Virtual Machine information of the host.</li>
<li>
<code>vmware-user</code> - Tool to enable clipboard sharing (copy/paste) between host and guest.</li>
<li>
<code>vmware-vmblock-fuse</code> - Filesystem utility. Enables drag &amp; drop functionality between host and guest through <a href="https://en.wikipedia.org/wiki/Filesystem_in_Userspace"  title="wikipedia:Filesystem in Userspace">FUSE</a> (Filesystem in Userspace).</li>
<li>
<code>vmware-xferlogs</code> - Dumps logging/debugging information to the Virtual Machine logfile.</li>
<li>
<code>vmhgfs-fuse</code> - Utility for mounting vmhgfs shared folders.</li>
</ul>
<h3><span class="mw-headline" id="Modules">Modules</span></h3>
<ul>
<li>
<code>vmhgfs</code> - Legacy filesystem driver. Enables legacy sharing implementation between host and guest.</li>
<li>
<code>vmxnet</code> - for the old VMXNET network adapter.</li>
</ul>
<h3><span class="mw-headline" id="Installation">Installation</span></h3>
<p><a href="..//Usage/Configuration/H/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=open-vm-tools">open-vm-tools</a></span>. If the legacy <code>vmhgfs</code> shared folder module is desired, the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/open-vm-tools-dkms/">open-vm-tools-dkms</a></span><sup><small>AUR</small></sup> package must be installed (the new <code>vmhgfs-fuse</code> driver is included in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=open-vm-tools">open-vm-tools</a></span>). <a href="..//Usage/Configuration/S/Systemd.html#Using_units" class="mw-redirect" title="Start">Start</a> and/or <a href="..//Usage/Configuration/S/Systemd.html#Using_units" class="mw-redirect" title="Enable">enable</a> <code>vmtoolsd.service</code> and <code>vmware-vmblock-fuse.service</code>.
</p>
<p>Try to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=gtkmm3">gtkmm3</a></span> manually if it does not work properly. To enable copy and paste between host and guest <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=gtkmm3">gtkmm3</a></span> is required.
</p>
<h2><span class="mw-headline" id="Official_VMware_Tools">Official VMware Tools</span></h2>
<h3><span class="mw-headline" id="Modules_2">Modules</span></h3>
<ul>
<li>
<code>vmblock</code> - Filesystem driver. Enables drag &amp; drop functionality between host and guest (<a rel="nofollow"  href="https://www.mail-archive.com/open-vm-tools-devel@lists.sourceforge.net/msg00213.html">superseded</a> by the <code>vmware-vmblock-fuse</code> utility).</li>
<li>
<code>vmci</code> - High performance communication interface between host and guest.</li>
<li>
<code>vmmon</code> - Virtual Machine Monitor.</li>
<li>
<code>vmnet</code> - Networking driver.</li>
<li>
<code>vsock</code> - VMCI sockets.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> There is no module for <code>vmware-vmblock-fuse</code>, and <code>vmblock</code> has been removed from the kernel unless you disable <code>fuse</code>.  Instead, systemd services need to be <code>enabled</code> to allow these functions.  See instructions below.
</div>
<h3>
<span id="Installation_.28from_guest.29"></span><span class="mw-headline" id="Installation_(from_guest)">Installation (from guest)</span>
</h3>
<p>Install the dependencies: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/groups/x86_64/base-devel/">base-devel</a></span> (for building), <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=net-tools">net-tools</a></span> (for <code>ifconfig</code>, used by the installer) and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=linux-headers">linux-headers</a></span> (for kernel headers). A make dependency for checking out <code>open-vm-tools</code> is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=asp">asp</a></span>.
</p>
<p>Then, create bogus init directories for the installer:
</p>
<pre># for x in {0..6}; do mkdir -p /etc/init.d/rc${x}.d; done
</pre>
<p>The installer can then be mounted:
</p>
<pre># mount /dev/cdrom /mnt
</pre>
<p>Extracted (e.g. to <code>/root</code>):
</p>
<pre># tar xf /mnt/VMwareTools*.tar.gz -C /root
</pre>
<p>And started:
</p>
<pre># perl /root/vmware-tools-distrib/vmware-install.pl
</pre>
<p>The following build failures can safely be ignored:
</p>
<ul>
<li>VMNEXT 3 virtual network card</li>
<li>"Warning: This script could not find mkinitrd or update-initramfs and cannot remake the initrd file!"</li>
<li>Fuse components not found on the system.</li>
</ul>
<p><br>
Enable <code>vmware-vmblock-fuse</code> systemd services (make sure the dependencies are manually installed, or that the <code>-s</code> flag) used. The <code>open-vm-tools</code> source code should be checked out using the <a href="..//Usage/Configuration/T/TOS_Build_System.html" title="TOS Build System">TOS Build System</a>.
</p>
<pre> $ asp checkout open-vm-tools
 $ cd open-vm-tools/repos/community-x86_64/
 $ makepkg -s --asdeps
 # cp vm* /usr/lib/systemd/system
 # systemctl enable vmware-vmblock-fuse
 # systemctl enable vmtoolsd
</pre>
<p>Reboot the Virtual Machine:
</p>
<pre># systemctl reboot
</pre>
<p>Log in and start the VMware Tools:
</p>
<pre># /etc/init.d/rc6.d/K99vmware-tools start
</pre>
<p>Additionally, to auto start <code>vmware-tools</code> on boot, create a new file <code>/etc/systemd/system/vmwaretools.service</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/vmwaretools.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=VMWare Tools daemon

[Service]
ExecStart=/etc/init.d/vmware-tools start
ExecStop=/etc/init.d/vmware-tools stop
PIDFile=/var/lock/subsys/vmware
TimeoutSec=0
RemainAfterExit=yes
 
[Install]
WantedBy=multi-user.target</pre>
<p>And enable the new systemd service:
</p>
<pre> # systemctl enable vmwaretools.service  
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> There is also a <a rel="nofollow"  href="https://github.com/rasa/vmware-tools-patches">project</a> in GitHub trying to automate these steps.</div>
<h2><span class="mw-headline" id="Xorg_configuration">Xorg configuration</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> To use Xorg in a Virtual Machine, a minimum of 32MB VGA memory is needed.</div>
<p>Install the dependencies: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-input-vmmouse">xf86-input-vmmouse</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-video-vmware">xf86-video-vmware</a></span>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=mesa">mesa</a></span>.
</p>
<p>These packages should be all that are required to get started with booting into a <code>graphical target</code>: . <code>/etc/xdg/autostart/vmware-user.desktop</code> will get started which will set up most of what is needed to work with the Virtual Machine.
</p>
<p>However, if booting into <code>multi-user.target</code> or using an uncommon setup (e.g. multiple monitors), then <code>vmtoolsd.service</code> needs to be <a href="..//Usage/Configuration/S/Systemd.html#Using_units" class="mw-redirect" title="Enable">enabled</a>. In addition to this, edit:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/Xwrapper.config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">needs_root_rights=yes</pre>
<p>to give permission for loading drivers.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Shared_Folders_with_vmhgfs-fuse_utility">Shared Folders with <code>vmhgfs-fuse</code> utility</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This functionality is only available with <code>open-vm-tools</code> v.10.x and kernel 4.x onwards and with VMware Workstation and Fusion.</div>
<p>Share a folder by selecting <i>Edit virtual machine settings &gt; Options &gt; Shared Folders &gt; Always enabled</i>, and creating a new share.
</p>
<p>The shared folders should be visible with:
</p>
<pre>$ vmware-hgfsclient
</pre>
<p>Now the folder can be mounted:
</p>
<pre># mkdir &lt;shared folders root directory&gt;
# vmhgfs-fuse -o allow_other -o auto_unmount .host:/<i>&lt;shared_folder&gt;</i> <i>&lt;shared folders root directory&gt;</i>
</pre>
<p>If the error message <code>fusermount: option allow_other only allowed if 'user_allow_other' is set in /etc/fuse.conf</code> is displayed, uncomment the following line in <code>/etc/fuse.conf</code>:
</p>
<pre>user_allow_other
</pre>
<p><br>
Other <code>vmhgfs-fuse</code> mount options can be viewed by using the <code>-h</code> input flag:
</p>
<pre># vmhgfs-fuse -h
</pre>
<h5><span class="mw-headline" id="fstab">fstab</span></h5>
<p>Add a rule for each share:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">.host:/<i>&lt;shared_folder&gt;</i> <i>&lt;shared folders root directory&gt;</i> fuse.vmhgfs-fuse nofail,allow_other 0 0
</pre>
<p>Create and mount the Shared Folders (if not done so already):
</p>
<pre># mkdir <i>&lt;shared folders root directory&gt;</i>
# mount <i>&lt;shared folders root directory&gt;</i>
</pre>
<h5><span class="mw-headline" id="Systemd">Systemd</span></h5>
<p>Create the following <code>.service</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>&lt;shared folders root directory&gt;</i>-<i>&lt;shared_folder&gt;</i>.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Load VMware shared folders
Requires=vmware-vmblock-fuse.service
After=vmware-vmblock-fuse.service
ConditionPathExists=.host:/<i>&lt;shared_folder&gt;</i>
ConditionVirtualization=vmware

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/usr/bin/vmhgfs-fuse -o allow_other -o auto_unmount .host:/<i>&lt;shared_folder&gt;</i> <i>&lt;shared folders root directory&gt;</i>


[Install]
WantedBy=multi-user.target</pre>
<p>Ensure the <code><i>&lt;shared folders root directory&gt;</i></code> folder exists on the system. If this folder does not exist then it must be created, as the systemd service depends on it:
</p>
<pre># mkdir -p <i>&lt;shared folders root directory&gt;</i>
</pre>
<p><a href="..//Usage/Configuration/S/Systemd.html#Using_units" class="mw-redirect" title="Enable">Enable</a> the <code>&lt;shared folders root directory&gt;-&lt;shared_folder&gt;.service</code> mount target.
</p>
<p>If all shared folders should be mounted automatically then omit <i>&lt;shared_folder&gt;</i>.
</p>
<h3><span class="mw-headline" id="Legacy_Shared_Folders_with_vmhgfs_module">Legacy Shared Folders with vmhgfs module</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This functionality is only available in VMware Workstation and Fusion</div>
<p>Share a folder by selecting <i>Edit virtual machine settings &gt; Options &gt; Shared Folders &gt; Always enabled</i>, and creating a new share.
</p>
<p>Ensure the <code>vmhgfs</code> driver is loaded:
</p>
<pre># modprobe vmhgfs
</pre>
<p>The shared folders should be viewable with:
</p>
<pre>$ vmware-hgfsclient
</pre>
<p>Now the folder can be mounted:
</p>
<pre># mkdir /home/user1/shares
# mount -n -t vmhgfs .host:/<i>&lt;shared_folder&gt;</i> /home/user1/shares
</pre>
<h4><span class="mw-headline" id="Enable_at_boot">Enable at boot</span></h4>
<p>Edit <code>mkinitcpio.conf</code> thusly:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
MODULES=(... vmhgfs)
...</pre>
<p>and then <a href="..//Usage/Configuration/M/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h5><span class="mw-headline" id="fstab_2">fstab</span></h5>
<p>Add a rule for each share:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">.host:/<i>&lt;shared_folder&gt;</i> <i>/home/user1/shares</i> vmhgfs defaults 0 0
</pre>
<p>Create and mount the Shared Folders:
</p>
<pre># mkdir /home/user1/shares
# mount /home/user1/shares
</pre>
<h5><span class="mw-headline" id="Systemd_2">Systemd</span></h5>
<p>For shared folders to work the <code>vmhgfs</code> driver must be loaded. Create the following <code>.service</code>s:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>&lt;shared folders root directory&gt;</i>-<i>&lt;shared_folder&gt;</i>.mount</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Load VMware shared folders
ConditionPathExists=.host:/<i>&lt;shared_folder&gt;</i>
ConditionVirtualization=vmware

[Mount]
What=.host:/<i>&lt;shared_folder&gt;</i>
Where=<i>&lt;shared folders root directory&gt;</i>/<i>&lt;shared_folder&gt;</i>
Type=vmhgfs
Options=defaults,noatime

[Install]
WantedBy=multi-user.target</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>&lt;shared folders root directory&gt;</i>-<i>&lt;shared_folder&gt;</i>.automount</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Load VMware shared folders
ConditionPathExists=.host:/<i>&lt;shared_folder&gt;</i>
ConditionVirtualization=vmware

[Automount]
Where=<i>&lt;shared folders root directory&gt;</i>/<i>&lt;shared_folder&gt;</i>

[Install]
WantedBy=multi-user.target</pre>
<p>Ensure the <code><i>&lt;shared folders root directory&gt;</i></code> folder exists on the system. If this folder does not exist then it must be created, as the systemd scripts depend on it:
</p>
<pre># mkdir -p <i>&lt;shared folders root directory&gt;</i>
</pre>
<p><a href="..//Usage/Configuration/S/Systemd.html#Using_units" class="mw-redirect" title="Enable">Enable</a> the <code>mnt-hgfs.automount</code> mount target.
</p>
<p>If all shared folders should be mounted automatically then omit <i>&lt;shared_folder&gt;</i>.
</p>
<h4><span class="mw-headline" id="Prune_mlocate_DB">Prune mlocate DB</span></h4>
<p>When using <a href="..//Usage/Configuration/M/Mlocate.html" title="Mlocate">mlocate</a>, it is pointless to index the shared directories in the <code>locate DB</code>. Therefore, add the directories to <code>PRUNEPATHS</code> in <code>/etc/updatedb</code>.
</p>
<h3><span class="mw-headline" id="3D_Acceleration">3D Acceleration</span></h3>
<p>If not selected at guest creation time, 3D Acceleration can be enabled in: <i>Edit virtual machine settings &gt; Hardware &gt; Display &gt; Accelerate 3D graphics</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Xorg can be very slow with 3D Acceleration enabled. It some cases, llvmpipe software rendering is much faster.</div>
<h4><span class="mw-headline" id="OpenGL_and_GLSL_support">OpenGL and GLSL support</span></h4>
<p>It is possible to update OpenGL and GLSL with new kernel modules, overriding TOS-controlled versions.  
</p>
<p>Currently, OpenGL 3.3 and GLSL 3.30 can be supported.  See <a rel="nofollow"  href="https://bbs.archlinux.org/viewtopic.php?id=202713">https://bbs.archlinux.org/viewtopic.php?id=202713</a> for more details.
</p>
<h3><span class="mw-headline" id="Time_synchronization">Time synchronization</span></h3>
<p>Configuring time synchronization in a Virtual Machine is important; fluctuations are bound to occur more easily in a guest VM. This is mostly due to the CPU being shared by more than one guest.
</p>
<p>There are 2 options to set up time synchronization: the host or an external source.
</p>
<h4><span class="mw-headline" id="Host_machine_as_time_source">Host machine as time source</span></h4>
<p>To use the host as a time source, ensure <code>vmtoolsd.service</code> is <a href="..//Usage/Configuration/S/Systemd.html#Using_units" class="mw-redirect" title="Start">started</a>. Then enable the time synchronization:
</p>
<pre># vmware-toolbox-cmd timesync enable
</pre>
<p>To synchronize the guest after suspending the host:
</p>
<pre># hwclock --hctosys --localtime
</pre>
<h4><span class="mw-headline" id="External_server_as_time_source">External server as time source</span></h4>
<p>See <a href="..//Usage/Configuration/C/Category:Network_Time_Protocol.html" class="mw-redirect" title="NTP">NTP</a>.
</p>
<h3><span class="mw-headline" id="Performance_Tips">Performance Tips</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Merge-arrows-2.png" ><img alt="Merge-arrows-2.png" src="../../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="..//Usage/Configuration/V/VMware.html" title="VMware">VMware</a>.</b><a href="../../File:Merge-arrows-2.png" ><img alt="Merge-arrows-2.png" src="../../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> Applies to all sort of VMs, particularly the last section (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:VMware/Install_TOS_Linux_as_a_guest">Talk:VMware/Install TOS Linux as a guest#</a>)</div>
</div>
<p>To improve the performance of your virtual machine, try the following tips:
</p>
<h4><span class="mw-headline" id="Paravirtual_SCSI_adapter">Paravirtual SCSI adapter</span></h4>
<p><a rel="nofollow"  href="http://kb.vmware.com/kb/1010398">VMware Paravirtual SCSI (PVSCSI) adapters</a> are high-performance storage adapters for VMware ESXi that can result in greater throughput and lower CPU utilization. PVSCSI adapters are best suited for environments, where hardware or applications drive a very high amount of I/O throughput.
</p>
<p>The SCSI adapter type <code>VMware Paravirtual</code> is available in the Virtual Machine settings.
</p>
<p>If these settings are not in the virtual machine's configuration, the paravirtual SCSI adapter can still be enabled. Ensure that the paravirtual SCSI adapter is included in the kernel image by modifying the <code>mkinitcpio.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
MODULES=(... vmw_pvscsi)
...</pre>
<p><a href="..//Usage/Configuration/M/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">Regenerate the initramfs</a>.
</p>
<p>Shut down the virtual machine and change the SCSI adapter: set the <code>.vmx</code> to the following:
</p>
<pre>scsi0.virtualDev = "pvscsi"
</pre>
<h4><span class="mw-headline" id="Paravirtual_Network_Adapter">Paravirtual Network Adapter</span></h4>
<p>VMware offers <a rel="nofollow"  href="http://kb.vmware.com/kb/1001805">multiple network adapters</a> for the guest OS.  The default adapter used is usually the <code>e1000</code> adapter, which emulates an Intel 82545EM Gigabit Ethernet NIC.  This Intel adapter is generally compatible with the built-in drivers across most operating systems, including TOS.
</p>
<p>For <a rel="nofollow"  href="http://rickardnobel.se/vmxnet3-vs-e1000e-and-e1000-part-1/">more performance and additional features</a> (such as multiqueue support), the VMware native <code>vmxnet3</code> network adapter can be used.
</p>
<p>TOS has the <code>vmxnet3</code> kernel module available with a default install.  Once enabled in <a href="..//Usage/Configuration/M/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> (or if it is auto-detected; check by running <code>lsmod | grep vmxnet3</code> to see if it is loaded), shut down and change the network adapter type in the <i>.vmx</i> file to the following:
</p>
<pre>ethernet0.virtualDev = "vmxnet3"
</pre>
<p>After changing network adapters, the network and <a href="..//Usage/Configuration/D/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> settings will need to be updated to use the new adapter name and MAC address.
</p>
<pre># dhcpcd <i>new_interface_name</i>
# systemctl enable dhcpcd@<i>new_interface_name</i>.service
</pre>
<p>The new interface name can be obtained by running <code>ip link</code>.
</p>
<h4><span class="mw-headline" id="Virtual_Machine_Settings">Virtual Machine Settings</span></h4>
<p>These settings could help improve the responsiveness of the virtual machine by reducing disk I/O, at the expense of using more host memory.  <a rel="nofollow"  href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1008885">Vmware's KB1008885</a> provides the following optimizations:
</p>
<pre>mainMem.useNamedFile = "FALSE"
MemTrimRate = "0"
prefvmx.useRecommendedLockedMemSize = "TRUE"
MemAllowAutoScaleDown = "FALSE"
sched.mem.pshare.enable = "FALSE"
</pre>
<ul>
<li>
<b>mainMem.useNamedFile</b>: This will only work for Windows hosts and this parameter can be used if high disk activity is experienced upon shutting down the virtual machine. This will prevent VMware from creating a <i>.vmem</i> file. Use <i>mainmem.backing = "swap"</i> on Linux hosts instead.</li>
<li>
<b>MemTrimRate</b>: This setting prevents that memory which was released by the guest is released on the host also.</li>
<li>
<b>prefvmx.useRecommendedLockedMemSize</b>: Unfortunately there does not seem to exist a proper explanation for this setting; it seems to prevent the host system from swapping parts of the guest memory.</li>
<li>
<b>MemAllowAutoScaleDown</b>: Prevents VMware from adjusting the memory size of the virtual machine if it cannot allocate enough memory.</li>
<li>
<b>sched.mem.pshare.enable</b>: If several virtual machines are running simultaneously, VMware will try to locate identical pages and share these between the virtual machines. This can be very I/O intensive.</li>
</ul>
<p>The following settings can also be set in the configuration dialog of VMware Workstation(<i>Edit -&gt; Preferences... -&gt; Memory/Priority</i>).
</p>
<pre>prefvmx.minVmMemPct = "100"
mainMem.partialLazySave = "FALSE"
mainMem.partialLazyRestore = "FALSE"
</pre>
<ul>
<li>
<b>prefvmx.minVmMemPct</b>: Sets amount of RAM in percent which should be reserved by the virtual machine on the host system. If this is set to a lower value it is possible to assign the virtual machine more memory than is available in the host system. Be careful though, as in this case it will most likely lead to excessive hard drive usage. If enough RAM is on the host system, this value should be left at 100.</li>
<li>
<b>mainMem.partialLazySave</b> and <b>mainMem.partialLazyRestore</b>: These two parameters will prevent the virtual machine from creating partial snapshots for suspends. When these parameters are used, virtual machine suspension will take slightly longer, but there should be less hard disk activity from VMware trying to store this information.</li>
</ul>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Network_slow_on_guest">Network slow on guest</span></h3>
<p>TOS Linux, as well as other Linux guests, may have slow network speeds while using NAT. To resolve this, switch the network type to <b>Bridged mode</b> in the guest settings on the host, changing the configuration file for the network on the guest where necessary. For more information on configuration, see <a href="..//Usage/Configuration/N/Network_configuration.html" title="Network configuration">Network configuration</a>. If on a Windows host and it is not connecting properly despite correct guest configuration, open the <b>Virtual Network Editor</b> on the host as <b>Administrator</b> and press the <b>Restore defaults</b> button at the bottom left.
</p>
<h3><span class="mw-headline" id="File_share_problems_with_legacy_vmhgfs_module_and_newer_kernels">File share problems with legacy vmhgfs module and newer kernels</span></h3>
<p>As the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/open-vm-tools-dkms/">open-vm-tools-dkms</a></span><sup><small>AUR</small></sup> package is no longer being updated, newer kernels are not patched correctly using it to be compatible with a host-guest file share. The <a rel="nofollow"  href="https://github.com/davispuh/open-vm-tools-dkms">Github repository</a> has some patch files that can be manually applied to restore functionality.
</p>
<p>It is also recommended that the AUR comment section be checked for this package.
</p>
<h3><span class="mw-headline" id="Sound_problems">Sound problems</span></h3>
<p>If unacceptably loud or annoying sounds occur, then it may be related to the <a href="..//Usage/Configuration/P/PC_speaker.html" title="PC speaker">PC speaker</a>. The issue may be resolved by disabling the PC speaker within the guest image:
</p>
<pre> # echo "blacklist pcspkr" &gt; /etc/modprobe.d/nobeep.conf
</pre>
<h3><span class="mw-headline" id="Mouse_problems">Mouse problems</span></h3>
<p>The following problems may occur with the mouse:
</p>
<ul>
<li>The automatic grab/ungrab feature does not automatically grab input when the cursor enters the window</li>
<li>Missing buttons</li>
<li>Input lag</li>
<li>Clicks are not registered in some applications</li>
<li>Mouse cursor jumps when entering/leaving virtual machine</li>
<li>Mouse position jumps to where it left the guest VM</li>
</ul>
<p>These may be fixed by <a href="..//Usage/Configuration/P/Pacman.html#Removing_packages" class="mw-redirect" title="Uninstall">uninstalling</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-input-vmmouse">xf86-input-vmmouse</a></span> package. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-input-vmmouse">xf86-input-vmmouse</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-input-libinput">xf86-input-libinput</a></span> should be sufficient for handling mouse and keyboard inputs.
</p>
<p>Adding settings to the <code>.vmx</code> configuration file may help (<a rel="nofollow"  href="https://forums.mageia.org/wiki/viewtopic.php?f=7&amp;t=7977">Mouse position jumps to where it left the guest VM</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/vmware/<i>&lt;Virtual Machine name&gt;</i>/<i>&lt;Virtual Machine name&gt;</i>.vmx</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">mouse.vusb.enable = "TRUE"
mouse.vusb.useBasicMouse = "FALSE"</pre>
<p>VMware also attempts to automatically optimize the mouse for gaming. If problems are experienced, disabling the optimization is recommended: <i>Edit &gt; Preferences &gt; Input &gt; Optimize mouse for games: Never</i>
</p>
<p>Alternatively, attempting to <a rel="nofollow"  href="http://www.spinics.net/lists/xorg/msg53932.html">disable</a> the <code>catchall</code> event in <code>60-libinput.conf</code> may be required:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/X11/xorg.conf.d/60-libinput.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#Section "InputClass"
#        Identifier "libinput pointer catchall"
#        MatchIsPointer "on"
#        MatchDevicePath "/dev/input/event*"
#        Driver "libinput"
#EndSection
</pre>
<h3><span class="mw-headline" id="Boot_problems">Boot problems</span></h3>
<h4><span class="mw-headline" id="Slow_boot_time">Slow boot time</span></h4>
<p>The following errors may be displayed if VMWare's memory hot-add feature is enabled:
</p>
<ul>
<li>add_memory failed</li>
<li>acpi_memory_enable_device() error</li>
</ul>
<p>Disable the memory hot-add feature by setting <code>mem.hotadd = "FALSE"</code> to the <code>.vmx</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/vmware/<i>&lt;Virtual Machine name&gt;</i>/<i>&lt;Virtual Machine name&gt;</i>.vmx</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">mem.hotadd = "FALSE"</pre>
<h4>
<span id="Shutdown.2FReboot_hangs"></span><span class="mw-headline" id="Shutdown/Reboot_hangs">Shutdown/Reboot hangs</span>
</h4>
<p>Adjust the timeout for the vmtoolsd service (defaults to 90 seconds).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/vmtoolsd.service.d/timeout.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
TimeoutStopSec=1</pre>
<h3><span class="mw-headline" id="Window_resolution_autofit_problems">Window resolution autofit problems</span></h3>
<p>"Autofit" means that when the VMWare window's size is adjusted in the host, TOSLinux in the guest should automatically follow and readjust its resolution to fit the new size of the host window.
</p>
<h4><span class="mw-headline" id="Potential_solution_1">Potential solution 1</span></h4>
<p>Ensure autofit is enabled. For VMware Workstation the setting can be found in: <i>View -&gt; Autosize -&gt; Autofit Guest</i>
</p>
<h4><span class="mw-headline" id="Potential_solution_2">Potential solution 2</span></h4>
<p>For some reason, autofit requires the packages <b>gtkmm</b> and <b>gtk2</b>, so ensure they are installed. If X windows is not installed or a nonâ€“GTK-based desktop environment (such as KDE) is being used, the might have to be installed independently.
</p>
<h4><span class="mw-headline" id="Potential_solution_3">Potential solution 3</span></h4>
<p>The relevant modules may have to be added to mkinitcpio.conf:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES=(vsock vmw_vsock_vmci_transport vmw_balloon vmw_vmci vmwgfx)</pre>
<p>Do not forget to <a href="..//Usage/Configuration/M/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h4><span class="mw-headline" id="Potential_solution_4">Potential solution 4</span></h4>
<p><a href="..//Usage/Configuration/S/Systemd.html#Using_units" class="mw-redirect" title="Enable">Enable</a> <code>vmtoolsd.service</code>.
</p>
<p>If this doesn't work, ensure the <code>vmtoolsd.service</code> is <a href="..//Usage/Configuration/S/Systemd.html#Using_units" class="mw-redirect" title="Restart">restarted</a>.
</p>
<h4><span class="mw-headline" id="Potential_solution_5">Potential solution 5</span></h4>
<p>If <a href="..//Usage/Configuration/G/GNOME.html" title="GNOME">GNOME</a> is running on <a href="..//Usage/Configuration/W/Wayland.html" title="Wayland">Wayland</a>, <a href="..//Usage/Configuration/H/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-video-vmware">xf86-video-vmware</a></span> (<a rel="nofollow"  href="https://bugs.archlinux.org/task/57473">FS#57473</a>).
</p>
<p>See <a rel="nofollow"  href="https://github.com/vmware/open-vm-tools/issues/22#issuecomment-362705505">[1]</a>.
</p>
<h3>
<span id="Drag_and_drop.2C_copy.2Fpaste"></span><span class="mw-headline" id="Drag_and_drop,_copy/paste">Drag and drop, copy/paste</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> There is an unspecified relationship between these features and <i>gtkmm3</i> that causes them to silently fail. This is documented in <a rel="nofollow"  href="https://bugs.archlinux.org/task/43159">FS#43159</a>.</div>
<p>The drag-and-drop (copy/paste) feature requires both <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=open-vm-tools">open-vm-tools</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=gtkmm3">gtkmm3</a></span> packages to be installed.
</p>
<p>Make the command <code>vmware-user</code> run after <a href="..//Usage/Configuration/X/Xorg.html" class="mw-redirect" title="X11">X11</a> by either:
</p>
<ul><li>Ensuring <code>etc/xdg/autostart/vmware-user.desktop</code> exists, and if not, running:</li></ul>
<pre># cp /etc/vmware-tools/vmware-user.desktop /etc/xdg/autostart/vmware-user.desktop
</pre>
<p>OR
</p>
<ul><li>Add <code>vmware-user</code> to <a href="..//Usage/Configuration/X/Xinit.html#xinitrc" class="mw-redirect" title="Xinitrc">Xinitrc</a>.</li></ul>
<h3><span class="mw-headline" id="Problems_when_running_as_a_shared_VM_on_Workstation_11">Problems when running as a shared VM on Workstation 11</span></h3>
<p>Workstation 11 has a bug where vmware-hostd crashes if an TOS guest is running as a shared VM and vmtoolsd is running in the guest.  A patch to open-vm-tools to work around the bug is <a rel="nofollow"  href="https://github.com/vmware/open-vm-tools/issues/31">here</a>.
</p>
<h3><span class="mw-headline" id="Shared_folder_not_mounted_after_system_upgrade">Shared folder not mounted after system upgrade</span></h3>
<p>Most likely, this should only happen to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=open-vm-tools">open-vm-tools</a></span>. Since the <code>vmhgfs</code> module belongs to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/open-vm-tools-dkms/">open-vm-tools-dkms</a></span><sup><small>AUR</small></sup>, the legacy filesystem driver would not be upgraded by using the command <code>pacman -Syu</code>. Therefore, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/open-vm-tools-dkms/">open-vm-tools-dkms</a></span><sup><small>AUR</small></sup> should be manually upgraded before the official repositories. 
</p>
<p>If a shared folder is not mounted after a system upgrade, then remove the shared filesystem automount, upgrade <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/open-vm-tools-dkms/">open-vm-tools-dkms</a></span><sup><small>AUR</small></sup>, run <code>pacman -Syu</code>, and finally <a href="..//Usage/Configuration/M/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>. Don't forget to restore the filesystem automount.
</p>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="..//Usage/Configuration/C/Category:Installation_process.html" title="Category:Installation process">Installation process</a></li>
<li><a href="..//Usage/Configuration/C/Category:Hypervisors.html" title="Category:Hypervisors">Hypervisors</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="..//Usage/Configuration/C/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=VMware/Install_TOS_Linux_as_a_guest&amp;oldid=612087">https://wiki.archlinux.org/index.php?title=VMware/Install_TOS_Linux_as_a_guest&amp;oldid=612087</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 10 May 2020, at 09:13.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="..//Usage/Configuration/T/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="..//Usage/Configuration/T/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="..//Usage/Configuration/T/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



