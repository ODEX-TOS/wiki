<!--
    title: Visual_Studio_Code
    description: Migration of Visual_Studio_Code from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-29T19:25:31.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">Visual Studio Code</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<p><a rel="nofollow"  href="https://code.visualstudio.com/">Visual Studio Code</a> is a cross-platform, free and open-source (licensed under the MIT License) text editor developed by Microsoft and written in JavaScript and TypeScript. It is built on the Electron framework and is extensible using extensions, which can be browsed <a rel="nofollow"  href="https://marketplace.visualstudio.com/VSCode">on the web</a> or from within the text editor itself. While the project is open-source, a proprietary build (licensed under an End-User License Agreement) is also provided by Microsoft. For an explanation of the mixed licensing, see <a rel="nofollow"  href="https://github.com/Microsoft/vscode/issues/60#issuecomment-161792005">this GitHub comment</a>.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span >1</span> <span >Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Usage"><span >2</span> <span >Usage</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#Configuration"><span >3</span> <span >Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Integrated_Terminal"><span >3.1</span> <span >Integrated Terminal</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#External_terminal"><span >3.2</span> <span >External terminal</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6">
<a href="#Troubleshooting"><span >4</span> <span >Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Global_menu_not_working_in_KDE/Plasma"><span >4.1</span> <span >Global menu not working in KDE/Plasma</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Unable_to_move_items_to_trash"><span >4.2</span> <span >Unable to move items to trash</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Unable_to_debug_C#"><span >4.3</span> <span >Unable to debug C#</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Unable_to_open_.csproj_with_OmniSharp_server,_invalid_Microsoft.Common.props_location"><span >4.4</span> <span >Unable to open .csproj with OmniSharp server, invalid Microsoft.Common.props location</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Error_from_OmniSharp_that_MSBuild_cannot_be_located"><span >4.5</span> <span >Error from OmniSharp that MSBuild cannot be located</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Saving_with_%22Retry_as_Sudo%22_does_not_work"><span >4.6</span> <span >Saving with "Retry as Sudo" does not work</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Keyboard_variants_or_keymappings_do_not_map"><span >4.7</span> <span >Keyboard variants or keymappings do not map</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Command_'remote-containers.openFolder'_not_found"><span >4.8</span> <span >Command 'remote-containers.openFolder' not found</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The following packages provide VSCode:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=code">code</a></span> (open-source release)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/visual-studio-code-bin/">visual-studio-code-bin</a></span><sup><small>AUR</small></sup> (Microsoft-branded release)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/visual-studio-code-insiders/">visual-studio-code-insiders</a></span><sup><small>AUR</small></sup> (Microsoft-branded release, updated daily)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/code-git/">code-git</a></span><sup><small>AUR</small></sup> (in-development open-source version)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/vscodium-bin/">vscodium-bin</a></span><sup><small>AUR</small></sup> (another open-source version with a community-driven default configuration)</li>
</ul>
<p>The Microsoft <a rel="nofollow"  href="https://github.com/microsoft/ptvsd">ptvsd</a> (Python Tools for Visual Studio Debug) server/module is available at <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/python-ptvsd/">python-ptvsd</a></span><sup><small>AUR</small></sup>.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Run <code>code</code> to start the application (or <code>code-git</code> when using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/code-git/">code-git</a></span><sup><small>AUR</small></sup>).
</p>
<p>If for any reason you wish to launch multiple instances of Visual Studio Code, the <code>-n</code> flag can be used.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=code">code</a></span> stores settings in <code>~/.config/Code - OSS/User/settings.json</code>.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/visual-studio-code-bin/">visual-studio-code-bin</a></span><sup><small>AUR</small></sup> stores settings in <code>~/.config/Code/User/settings.json</code>.
</p>
<h3><span class="mw-headline" id="Integrated_Terminal">Integrated Terminal</span></h3>
<p><i>View &gt; Integrated Terminal</i> or <code>Ctrl + `</code> opens up an integrated terminal.
By default, <a href="/Usage/Configuration/V/Bash.html" title="Bash">Bash</a> is used with no additional arguments, although this can be changed.
<code>terminal.integrated.shell.linux</code> sets the default shell to be used and
<code>terminal.integrated.shellArgs.linux</code> sets the arguments to be passed to the shell.
</p>
<p>Example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/Code/User/settings.json</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">"terminal.integrated.shell.linux": "/usr/bin/fish",
"terminal.integrated.shellArgs.linux": ["-l","-d 3"]
</pre>
<p>You might face weird prompts after setting the integrated shell arguments with external terminal, remove the line to solve the problem or use an external terminal.
</p>
<h3><span class="mw-headline" id="External_terminal">External terminal</span></h3>
<p>If you are using <a href="/Usage/Configuration/V/Terminator.html" title="Terminator">Terminator</a> as default terminal for TOS and you have an error on Visual Studio Code: <code>Unable to launch debugger worker process (vsdbg) through the terminal. spawn truecolor ENOENT</code>, you can change the terminal that will be used by Visual Studio to another terminal (e.g. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=gnome-terminal">gnome-terminal</a></span>).
</p>
<p><code>"terminal.external.linuxExec": "Your alternative terminal"</code> sets the default terminal to be used for exec debug.
</p>
<p>Example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/Code/User/settings.json</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">"terminal.external.linuxExec": "gnome-terminal"
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id="Global_menu_not_working_in_KDE.2FPlasma"></span><span class="mw-headline" id="Global_menu_not_working_in_KDE/Plasma">Global menu not working in KDE/Plasma</span>
</h3>
<p>Visual Studio Code uses DBus to pass the menu to Plasma, try installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libdbusmenu-glib">libdbusmenu-glib</a></span>
</p>
<h3><span class="mw-headline" id="Unable_to_move_items_to_trash">Unable to move items to trash</span></h3>
<p>By default, <a rel="nofollow"  href="https://electron.atom.io/">Electron</a> apps use <code>gio</code> to delete files. Different trash implementations can be used by setting the <code>ELECTRON_TRASH</code> <a href="/Usage/Configuration/V/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a>.
</p>
<p>For example, for deleting files under <a href="/Usage/Configuration/V/KDE.html#Plasma" class="mw-redirect" title="Plasma">Plasma</a>:
</p>
<pre>$ ELECTRON_TRASH=kioclient5 code
</pre>
<p>At the time of writing, Electron supports <code>kioclient5</code>, <code>kioclient</code>, <code>trash-cli</code>, <code>gio</code> (default) and <code>gvfs-trash</code> (deprecated). More info is available at this <a rel="nofollow"  href="https://github.com/electron/electron/blob/master/docs/api/environment-variables.md#electron_trash-linux">documentation page</a>.
</p>
<h3>
<span id="Unable_to_debug_C.23"></span><span class="mw-headline" id="Unable_to_debug_C#">Unable to debug C#</span>
</h3>
<p>If you want to debug C#<a href="/Usage/Configuration/V/.NET_Core.html" title=".NET Core">.NET</a> (using the <a rel="nofollow"  href="http://www.omnisharp.net">OmniSharp extension</a>) then you need to install the Microsoft branded release (from the AUR).  This is apparently because the .NET Core debugger is only licensed to be used with official Microsoft products - see <a rel="nofollow"  href="https://github.com/OmniSharp/omnisharp-vscode/issues/1431#issuecomment-297578930">https://github.com/OmniSharp/omnisharp-vscode/issues/1431#issuecomment-297578930</a>
</p>
<p>Using the the open-source package, debugging fails fairly quietly.  The debug console will just show the initial message and nothing more:
</p>
<pre>You may only use the Microsoft .NET Core Debugger (vsdbg) with
Visual Studio Code, Visual Studio or Visual Studio for Mac software
to help you develop and test your applications.</pre>
<p>But in another way, you can use <a rel="nofollow"  href="https://github.com/Samsung/netcoredbg">netcoredbg</a>,<span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/netcoredbg/">netcoredbg</a></span><sup><small>AUR</small></sup>
</p>
<h3>
<span id="Unable_to_open_.csproj_with_OmniSharp_server.2C_invalid_Microsoft.Common.props_location"></span><span class="mw-headline" id="Unable_to_open_.csproj_with_OmniSharp_server,_invalid_Microsoft.Common.props_location">Unable to open .csproj with OmniSharp server, invalid Microsoft.Common.props location</span>
</h3>
<p>You have to switch from mono to proper SDK version props.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/opt/dotnet/sdk/{VERSION}/Sdks/Microsoft.NET.Sdk/Sdk/Sdk.props</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props
</pre>
<p>Modify import to look like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/opt/dotnet/sdk/{VERSION}/Sdks/Microsoft.NET.Sdk/Sdk/Sdk.props</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/opt/dotnet/sdk/{VERSION}/Current/Microsoft.Common.props
</pre>
<h3><span class="mw-headline" id="Error_from_OmniSharp_that_MSBuild_cannot_be_located">Error from OmniSharp that MSBuild cannot be located</span></h3>
<p>It is noted in the <a rel="nofollow"  href="https://github.com/OmniSharp/omnisharp-roslyn#introduction">OmniSharp introduction</a> that TOS Linux users should install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/msbuild-stable/">msbuild-stable</a></span><sup><small>AUR</small></sup> package.  Without it, you might get an error like:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">OmniSharp Log</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[info]: OmniSharp.MSBuild.Discovery.MSBuildLocator
        Registered MSBuild instance: StandAlone 15.0 - "~/.vscode/extensions/ms-vscode.csharp-1.18.0/.omnisharp/1.32.11/omnisharp/msbuild/15.0/Bin"
            MSBuildExtensionsPath = /usr/lib/mono/xbuild
            BypassFrameworkInstallChecks = true
            CscToolPath = ~/.vscode/extensions/ms-vscode.csharp-1.18.0/.omnisharp/1.32.11/omnisharp/msbuild/15.0/Bin/Roslyn
            CscToolExe = csc.exe
            MSBuildToolsPath = ~/.vscode/extensions/ms-vscode.csharp-1.18.0/.omnisharp/1.32.11/omnisharp/msbuild/15.0/Bin
            TargetFrameworkRootPath = /usr/lib/mono/xbuild-frameworks
System.TypeLoadException: Could not load type of field 'OmniSharp.MSBuild.ProjectManager:_queue' (13) due to: Could not load file or assembly 'System.Threading.Tasks.Dataflow, Version=4.5.24.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies.
...</pre>
<p>You might be able to build anyway (possibly depending whether you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=mono">mono</a></span> installed too)
</p>
<h3>
<span id="Saving_with_.22Retry_as_Sudo.22_does_not_work"></span><span class="mw-headline" id='Saving_with_"Retry_as_Sudo"_does_not_work'>Saving with "Retry as Sudo" does not work</span>
</h3>
<p>This feature does not work in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=code">code</a></span> package, because Microsoft does not support the way the TOS package is packaged (native instead of bundled Electron). See <a rel="nofollow"  href="https://bugs.archlinux.org/task/61516">FS#61516</a> and the <a rel="nofollow"  href="https://github.com/Microsoft/vscode/issues/70403">upstream bug report</a> for more information.
</p>
<p>The binary release <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/visual-studio-code-bin/">visual-studio-code-bin</a></span><sup><small>AUR</small></sup> does not have this issue, and the feature works there.
</p>
<h3><span class="mw-headline" id="Keyboard_variants_or_keymappings_do_not_map">Keyboard variants or keymappings do not map</span></h3>
<p>As per the <a rel="nofollow"  href="https://github.com/Microsoft/vscode/wiki/Keybinding-Issues#troubleshoot-linux-keybindings">wiki on github</a>:
</p>
<dl><dd>Switching keyboard layouts under some Linux window managers does not result in a change in the low level X window APIs VS Code uses to read the current keyboard layout. This means that VS Code ends up sometimes reading one of the other configured keyboard layouts and not the current active one. PR welcome...</dd></dl>
<p>Per the wiki, there are two possible solutions:
</p>
<ol>
<li>make sure setxkbmap -query returns as the first keyboard layout the one you want to work with in VS Code.</li>
<li>use "keyboard.dispatch": "keyCode" in your settings and restart VS Code. This will prevent VS Code from trying to determine your keyboard layout whatsoever.</li>
</ol>
<h3>
<span id="Command_.27remote-containers.openFolder.27_not_found"></span><span class="mw-headline" id="Command_'remote-containers.openFolder'_not_found">Command 'remote-containers.openFolder' not found</span>
</h3>
<p>Open VS Code enabling remote-containers API as commented in <a rel="nofollow"  href="https://bugs.archlinux.org/task/63374">Bugs</a>
</p>
<pre>$ code-oss --enable-proposed-api ms-vscode-remote.remote-containers</pre>
</div></div>
		
		<div id="catlinks"  data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="/Usage/Configuration/V/Category:Text_editors.html" title="Category:Text editors">Text editors</a></li></ul>
</div></div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Visual_Studio_Code&amp;oldid=610422">https://wiki.archlinux.org/index.php?title=Visual_Studio_Code&amp;oldid=610422</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 4 May 2020, at 02:23.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="/Usage/Configuration/V/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="/Usage/Configuration/V/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="/Usage/Configuration/V/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



