<!--
    title: Virtual_environment
    description: Migration of Virtual_environment from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-29T19:25:31.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">Python/Virtual environment</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"><span >&lt; <a href="..//Usage/Configuration/V/Python.html" title="Python">Python</a></span></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<p><br>
<i>virtualenv</i> is a tool used to create an isolated workspace for a <a href="..//Usage/Configuration/V/Python.html" title="Python">Python</a> application. It has various advantages such as the ability to install modules locally, export a working environment, and execute a <a href="..//Usage/Configuration/V/Python.html" title="Python">Python</a> program in that environment.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span >1</span> <span >Overview</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Installation"><span >2</span> <span >Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Packages"><span >2.1</span> <span >Packages</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4">
<a href="#Usage"><span >3</span> <span >Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-5">
<a href="#Creation"><span >3.1</span> <span >Creation</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#venv"><span >3.1.1</span> <span >venv</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#virtualenv"><span >3.1.2</span> <span >virtualenv</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#Activation"><span >3.2</span> <span >Activation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Python_versions"><span >4</span> <span >Python versions</span></a></li>
<li class="toclevel-1 tocsection-10">
<a href="#virtualenvwrapper"><span >5</span> <span >virtualenvwrapper</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Installation_2"><span >5.1</span> <span >Installation</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Basic_usage"><span >5.2</span> <span >Basic usage</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13">
<a href="#Pipenv"><span >6</span> <span >Pipenv</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Installation_3"><span >6.1</span> <span >Installation</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Basic_usage_2"><span >6.2</span> <span >Basic usage</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#See_also"><span >7</span> <span >See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p>A virtual environment is a directory into which some binaries and shell scripts are installed. The binaries include <i>python</i> for executing scripts and <i>pip</i> for installing other modules within the environment. There are also shell scripts (one for <a href="..//Usage/Configuration/V/Bash.html" title="Bash">bash</a>, csh, and <a href="..//Usage/Configuration/V/Fish.html" title="Fish">fish</a>) to activate the environment. Essentially, a virtual environment mimics a full system install of <a href="..//Usage/Configuration/V/Python.html" title="Python">Python</a> and all of the desired modules without interfering with any system on which the application might run.
</p>
<p>In 2017, <a rel="nofollow"  href="https://pipenv.readthedocs.io/">Pipenv</a> was published which manages all the above tools - managing virtual environments of python interpreters, package dependencies, their activation and reproducible locking of versions in Pipfiles.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="..//Usage/Configuration/V/Python.html" title="Python">Python</a> 3.3+ comes with a module called <i>venv</i>. For applications that require an older version of Python, <i>virtualenv</i> must be used.
</p>
<h3><span class="mw-headline" id="Packages">Packages</span></h3>
<p><a href="..//Usage/Configuration/V/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> one of these packages from the <a href="..//Usage/Configuration/V/Official_repositories.html" title="Official repositories">official repositories</a> to use a Python virtual environment.
</p>
<ul>
<li>Python 3.3+: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python">python</a></span>
</li>
<li>Python 3: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python-virtualenv">python-virtualenv</a></span>
</li>
<li>Python 2: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python2-virtualenv">python2-virtualenv</a></span>
</li>
</ul>
<p>For Pipenv:
</p>
<ul><li>Python 3: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python-pipenv">python-pipenv</a></span>
</li></ul>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>All three tools use a similar workflow.
</p>
<h3><span class="mw-headline" id="Creation">Creation</span></h3>
<p>Use <i>venv</i> or <i>virtualenv</i> to create the virtual environment within your project directory. Be sure to exclude the venv directory from version control--a copy of <code>pip freeze</code> will be enough to rebuild it.
</p>
<h4><span class="mw-headline" id="venv">venv</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This method replaces the <i>pyvenv</i> script, which is removed in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python">python</a></span> 3.8.</div>
<p>This tool is provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python">python</a></span> (3.3+):
</p>
<pre>$ python -m venv envname
</pre>
<h4><span class="mw-headline" id="virtualenv">virtualenv</span></h4>
<p>Use <i>virtualenv</i> for Python 3, available in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python-virtualenv">python-virtualenv</a></span>.
</p>
<pre>$ virtualenv envname
</pre>
<p>And <i>virtualenv2</i> for Python 2, available in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python2-virtualenv">python2-virtualenv</a></span>.
</p>
<pre>$ virtualenv2 envname
</pre>
<h3><span class="mw-headline" id="Activation">Activation</span></h3>
<p>Use one of the provided shell scripts to activate and deactivate the environment. This example assumes bash is used.
</p>
<pre>$ source envname/bin/activate
(envname) $
</pre>
<p>Once inside the virtual environment, modules can be installed with <i>pip</i> and scripts can be run as normal.
</p>
<p>To exit the virtual environment, run the function provided by <code>bin/activate</code>:
</p>
<pre>(envname) $ deactivate
</pre>
<h2><span class="mw-headline" id="Python_versions">Python versions</span></h2>
<p>The binary versions depend on which virtual environment tool was used. For instance, the <i>python</i> command used in the Python 2 example points to <code>bin/python2.7</code>, while the one in the <i>venv</i> example points to <code>bin/python3.7</code>.
</p>
<p>One major difference between <i>venv</i> and <i>virtualenv</i> is that the former uses the system's Python binary by default:
</p>
<pre>$ ls -l venv/bin/python3.7
lrwxrwxrwx 1 foo foo 7 Jun  3 19:57 venv/bin/python3.7 -&gt; /usr/bin/python3
</pre>
<p>The <i>virtualenv</i> tool uses a separate Python binary in the environment directory:
</p>
<pre>$ ls -l virtualenv/bin/python3.7
lrwxrwxrwx 1 foo foo 7 Jun  3 19:58 virtualenv/bin/python3.7 -&gt; python3
</pre>
<h2><span class="mw-headline" id="virtualenvwrapper">virtualenvwrapper</span></h2>
<p><i>virtualenvwrapper</i> allows more natural command line interaction with your virtual environments by exposing several useful commands to create, activate and remove virtual environments. This package is a wrapper for both <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python-virtualenv">python-virtualenv</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python2-virtualenv">python2-virtualenv</a></span>.
</p>
<h3><span class="mw-headline" id="Installation_2">Installation</span></h3>
<p><a href="..//Usage/Configuration/V/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python-virtualenvwrapper">python-virtualenvwrapper</a></span> package from the <a href="..//Usage/Configuration/V/Official_repositories.html" title="Official repositories">official repositories</a>.
</p>
<p>Now add the following lines to your <code>~/.bashrc</code>:
</p>
<pre>export WORKON_HOME=~/.virtualenvs
source /usr/bin/virtualenvwrapper.sh
</pre>
<p>The line <code>source /usr/bin/virtualenvwrapper.sh</code> can cause some slowdown when starting a new shell. To fix this try using <code>source /usr/bin/virtualenvwrapper_lazy.sh</code>, which will load virtualenvwrapper the first time a virtualenvwrapper function is called.
</p>
<p>Re-open your console and create the <code>WORKON_HOME</code> folder:
</p>
<pre>$ mkdir $WORKON_HOME
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This seems to happen now automatically after re-open the console for the first time.</div>
<h3><span class="mw-headline" id="Basic_usage">Basic usage</span></h3>
<p>The main information source on virtualenvwrapper usage (and extension capability) is Doug Hellmann's <a rel="nofollow"  href="http://www.doughellmann.com/docs/virtualenvwrapper/">page</a>.
</p>
<p>Create the virtual environment:
</p>
<pre>$ mkvirtualenv -p /usr/bin/python2.7 my_env
</pre>
<p>Activate the virtual environment:
</p>
<pre>$ workon my_env
</pre>
<p>Install some package inside the virtual environment (say, Django):
</p>
<pre>(my_env) $ pip install django
</pre>
<p>After you have done your things, leave the virtual environment:
</p>
<pre>(my_env) $ deactivate
</pre>
<p><br>
</p>
<h2><span class="mw-headline" id="Pipenv">Pipenv</span></h2>
<p><i>pipenv</i> allows better managed CLI interactions by providing a single program that does all the functions of the above tools.
</p>
<h3><span class="mw-headline" id="Installation_3">Installation</span></h3>
<p><a href="..//Usage/Configuration/V/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=python-pipenv">python-pipenv</a></span> package from the <a href="..//Usage/Configuration/V/Official_repositories.html" title="Official repositories">official repositories</a>.
</p>
<h3><span class="mw-headline" id="Basic_usage_2">Basic usage</span></h3>
<p>All commands can be executed in the project folder, and pipenv will recognize the specific situation - whether a virtualenv exists in the directory, locating it, and running on the specific virtual interpreter when pipenv is executed.
</p>
<p>More information at <a rel="nofollow"  href="https://pipenv.readthedocs.io/wiki/latest/">[1]</a>, <a rel="nofollow"  href="https://realpython.com/pipenv-guide/">[2]</a>, <a rel="nofollow"  href="https://docs.python-guide.org/dev/virtualenvs/#pipenv-virtual-environments">[3]</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow"  href="https://docs.python.org/3/library/venv.html">Python venv</a></li>
<li><a rel="nofollow"  href="https://pypi.org/project/virtualenv/">virtualenv PyPI page</a></li>
<li><a rel="nofollow"  href="http://www.doughellmann.com/docs/virtualenvwrapper/">virtualenvwrapper page at Doug Hellmann's</a></li>
</ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="..//Usage/Configuration/V/Category:Programming_languages.html" title="Category:Programming languages">Programming languages</a></li></ul>
</div></div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Python/Virtual_environment&amp;oldid=590904">https://wiki.archlinux.org/index.php?title=Python/Virtual_environment&amp;oldid=590904</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 4 December 2019, at 05:21.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="..//Usage/Configuration/V/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="..//Usage/Configuration/V/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="..//Usage/Configuration/V/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



