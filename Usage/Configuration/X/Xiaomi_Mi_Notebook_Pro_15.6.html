<!--
    title: Xiaomi_Mi_Notebook_Pro_15.6
    description: Migration of Xiaomi_Mi_Notebook_Pro_15.6 from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-28T17:58:55.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">Xiaomi Mi Notebook Pro 15.6</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table  style="float: right;">
<tbody>
<tr>
<td><b>Device</b></td>
<td><b>Status</b></td>
<td>
<b>Modules</b>
</td>
</tr>
<tr>
<td>Video</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>i915
</td>
</tr>
<tr>
<td>Wireless</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>iwlwifi
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>btusb
</td>
</tr>
<tr>
<td>Audio</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>snd_hda_intel
</td>
</tr>
<tr>
<td>Touchpad</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>?
</td>
</tr>
<tr>
<td>Webcam</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>uvcvideo
</td>
</tr>
<tr>
<td>USB-C / Thunderbolt 3</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>?
</td>
</tr>
<tr>
<td>Function/Multimedia Keys</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working</td>
<td>xiaomi_wmi
</td>
</tr>
</tbody>
</table>
<p>The Mi Notebook Air 15.6 is an aluminium notebook. It is a product by the Chinese Company Xiaomi.
</p>
<p>The installation should be going without any problems if you follow the following steps.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Pre-Installation_System_Settings"><span >1</span> <span >Pre-Installation System Settings</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Graphics_Card_Configuration"><span >2</span> <span >Graphics Card Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Intel_Only"><span >2.1</span> <span >Intel Only</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Intel/NVIDIA_Hybrid_Configuration"><span >2.2</span> <span >Intel/NVIDIA Hybrid Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5">
<a href="#Input"><span >3</span> <span >Input</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Touchpad"><span >3.1</span> <span >Touchpad</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Fn-Keys"><span >3.2</span> <span >Fn-Keys</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Display_Calibration"><span >4</span> <span >Display Calibration</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Hardware_information"><span >5</span> <span >Hardware information</span></a></li>
<li class="toclevel-1 tocsection-10">
<a href="#Troubleshoothing"><span >6</span> <span >Troubleshoothing</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Backlight"><span >6.1</span> <span >Backlight</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Pre-Installation_System_Settings">Pre-Installation System Settings</span></h2>
<p>It is actually very easy getting the TOS Installation Medium to boot properly. Prior to booting the TOS installation ISO enter the UEFI menu by pressing F2 during Boot.
</p>
<ul>
<li>Security -&gt; set password</li>
<li>Security -&gt; Disable Secure Boot</li>
<li>reset the password by setting the password again but letting the "New Password" fields blank</li>
</ul>
<p>Installation of TOS can proceed normally. Refer to the <a href="../wiki/Installation_guide.html" title="Installation guide">Installation guide</a> for more info.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Remember that your SSD is called <code>nvme0n1</code>, not <code>sda</code>.</div>
<h2><span class="mw-headline" id="Graphics_Card_Configuration">Graphics Card Configuration</span></h2>
<p>The Mi Book has an Intel, as well as an NVIDIA GPU.
</p>
<h3><span class="mw-headline" id="Intel_Only">Intel Only</span></h3>
<p>If you want to completely disable the NVIDIA GPU (which might save batterlife), do the following:
</p>
<ul>
<li>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> package</li>
<li>Blacklist the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=nvidia">nvidia</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-video-nouveau">xf86-video-nouveau</a></span> kernel modules <a href="../wiki/Kernel_module.html#Blacklisting" class="mw-redirect" title="Kernel modules">Kernel modules#Blacklisting</a>
</li>
</ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/nouveau.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">blacklist nouveau
blacklist nvidia</pre>
<ul><li>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=bbswitch">bbswitch</a></span> to <a href="../wiki/Bumblebee.html#Power_management" title="Bumblebee">turn off the card</a>
</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/bbswitch.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options bbswitch load_state=0 unload_state=0</pre>
<h3>
<span id="Intel.2FNVIDIA_Hybrid_Configuration"></span><span class="mw-headline" id="Intel/NVIDIA_Hybrid_Configuration">Intel/NVIDIA Hybrid Configuration</span>
</h3>
<p>You can enable hybrid GPUs by either using <a href="../wiki/Bumblebee.html" title="Bumblebee">Bumblebee</a> or <a href="../wiki/NVIDIA_Optimus.html" title="NVIDIA Optimus">NVIDIA Optimus</a>. Bumblebee is generally better for battery-life and compatibility but not officially supported by NVIDIA.
</p>
<p>Refer to the respective articles.
</p>
<p>Note that included MX150 GPU does not properly work with VDPAU. It also does not work with NVDECODE and NVENCODE. Thus, video playback works faster and better with Intel's chip with VAAPI on this particular notebook. Even though it supports specifications, this particular GPUs hardware acceleration APIs do not work with the proprietary NVIDIA driver (nouveau needs to be tested). The only benefit of NVIDIA GPU is better performance on high-resolution screens and CUDA/gaming.
</p>
<p>While video playback performance is best with Intel VAAPI, battery life is best when relying on CPU for video decoding (as VDPAU/NCDECODE/NVENCODE does not work).
</p>
<h2><span class="mw-headline" id="Input">Input</span></h2>
<h3><span class="mw-headline" id="Touchpad">Touchpad</span></h3>
<p>To use the touchpad like a normal one, you have to use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-input-libinput">xf86-input-libinput</a></span>. If you use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-input-evdev">xf86-input-evdev</a></span>, your touchpad acts like a touchscreen (e.g it maps your movements directly to your screen). But if you are using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span> (although you really should not, because it is deprecated (see <a href="../wiki/Touchpad_Synaptics.html" class="mw-redirect" title="Synaptics">Synaptics</a>)) things are only working sporadically. This configuration of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=libinput">libinput</a></span> using XOrg configuration files enables two-finger gestures, tap-to-click and 2-and 3-finger clicks (for right- and middle-click respectively).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-touchpad.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
        Identifier "libinput touchpad"
        Driver "libinput"
        MatchIsTouchpad "on"
        MatchDevicePath "/dev/input/event*"
        Option "Tapping" "on"
        Option "ClickMethod" "clickfinger"
        Option "NaturalScrolling" "true"
EndSection</pre>
<h3><span class="mw-headline" id="Fn-Keys">Fn-Keys</span></h3>
<p>On this notebook, the Fn-keys are enabled as default (e.g. pressing F1 mutes the sound). If pressing the keys does nothing you are most likely using a <a href="../wiki/Window_manager.html" title="Window manager">Window manager</a> and not a <a href="../wiki/Desktop_environment.html" title="Desktop environment">Desktop environment</a>. Use the respective configuration files to bind the keys to their use. For example <a href="../wiki/Xbindkeys.html" title="Xbindkeys">Xbindkeys</a> or <a href="../wiki/I3.html" title="I3">i3</a>'s <code>bindsym</code>.
</p>
<p>Most Fn-keys return the correct keycodes. Here is a table containing that information:
</p>
<table >
<tbody>
<tr>
<th>Fn-F-Key
</th>
<th>Keycode
</th>
</tr>
<tr>
<td>
<code>F1</code>
</td>
<td>
<code>XF86AudioMute</code>
</td>
</tr>
<tr>
<td>
<code>F2</code>
</td>
<td>
<code>XF86AudioLowerVolume</code>
</td>
</tr>
<tr>
<td>
<code>F3</code>
</td>
<td>
<code>XF86AudioRaiseVolume</code>
</td>
</tr>
<tr>
<td>
<code>F4</code>
</td>
<td>
<code>XF86MonBrightnessDown</code>
</td>
</tr>
<tr>
<td>
<code>F5</code>
</td>
<td>
<code>XF86MonBrightnessUp</code>
</td>
</tr>
<tr>
<td>
<code>F6</code>
</td>
<td>
<code>Super_L + P</code>
</td>
</tr>
<tr>
<td>
<code>F7</code>
</td>
<td>
<code>Nothing</code>
</td>
</tr>
<tr>
<td>
<code>F8</code>
</td>
<td>
<code>Super_L + Tab</code>
</td>
</tr>
<tr>
<td>
<code>F9</code>
</td>
<td>
<code>Nothing</code>
</td>
</tr>
<tr>
<td>
<code>F10</code>
</td>
<td>
<code>Turns Keyboard backlight on/off</code>
</td>
</tr>
<tr>
<td>
<code>F11</code>
</td>
<td>
<code>Print</code>
</td>
</tr>
<tr>
<td>
<code>F12</code>
</td>
<td>
<code>Insert</code>
</td>
</tr>
</tbody>
</table>
<h2><span class="mw-headline" id="Display_Calibration">Display Calibration</span></h2>
<p>Factory display calibration is poor. Check the panel model:
</p>
<pre>$ edid-decode &lt; /sys/class/drm/card0-eDP-1/edid | grep Alphanumeric
</pre>
<p>If it's NV156FHM-N61, try the <a href="../wiki/ICC_profiles.html" title="ICC profiles">ICC profiles</a> at <a rel="nofollow"  href="https://www.notebookcheck.net/uploads/tx_nbc2/NV156FHM_N61.icm">[1]</a>.
</p>
<h2><span class="mw-headline" id="Hardware_information">Hardware information</span></h2>
<p>The output of <i>lspci</i> is
</p>
<pre>00:00.0 Host bridge: Intel Corporation Xeon E3-1200 v6/7th Gen Core Processor Host Bridge/DRAM Registers (rev 08)
00:02.0 VGA compatible controller: Intel Corporation UHD Graphics 620 (rev 07)
00:08.0 System peripheral: Intel Corporation Xeon E3-1200 v5/v6 / E3-1500 v5 / 6th/7th Gen Core Processor Gaussian Mixture Model
00:14.0 USB controller: Intel Corporation Sunrise Point-LP USB 3.0 xHCI Controller (rev 21)
00:14.2 Signal processing controller: Intel Corporation Sunrise Point-LP Thermal subsystem (rev 21)
00:15.0 Signal processing controller: Intel Corporation Sunrise Point-LP Serial IO I2C Controller #0 (rev 21)
00:15.1 Signal processing controller: Intel Corporation Sunrise Point-LP Serial IO I2C Controller #1 (rev 21)
00:16.0 Communication controller: Intel Corporation Sunrise Point-LP CSME HECI #1 (rev 21)
00:1c.0 PCI bridge: Intel Corporation Sunrise Point-LP PCI Express Root Port #1 (rev f1)
00:1c.4 PCI bridge: Intel Corporation Sunrise Point-LP PCI Express Root Port #5 (rev f1)
00:1c.7 PCI bridge: Intel Corporation Sunrise Point-LP PCI Express Root Port #8 (rev f1)
00:1d.0 PCI bridge: Intel Corporation Sunrise Point-LP PCI Express Root Port #9 (rev f1)
00:1f.0 ISA bridge: Intel Corporation Sunrise Point LPC Controller/eSPI Controller (rev 21)
00:1f.2 Memory controller: Intel Corporation Sunrise Point-LP PMC (rev 21)
00:1f.3 Audio device: Intel Corporation Sunrise Point-LP HD Audio (rev 21)
00:1f.4 SMBus: Intel Corporation Sunrise Point-LP SMBus (rev 21)
01:00.0 3D controller: NVIDIA Corporation GP108M [GeForce MX150] (rev a1)
03:00.0 Network controller: Intel Corporation Wireless 8265 / 8275 (rev 78)
04:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961
</pre>
<p>The output of <i>lsusb</i> is
</p>
<pre>Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 005: ID 04f3:0c1a Elan Microelectronics Corp. ELAN:Fingerprint
Bus 001 Device 004: ID 0bda:0129 Realtek Semiconductor Corp. RTS5129 Card Reader Controller
Bus 001 Device 003: ID 05c8:03b7 Cheng Uei Precision Industry Co., Ltd (Foxlink) XiaoMi USB 2.0 Webcam
Bus 001 Device 002: ID 8087:0a2b Intel Corp. 
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</pre>
<h2><span class="mw-headline" id="Troubleshoothing">Troubleshoothing</span></h2>
<h3><span class="mw-headline" id="Backlight">Backlight</span></h3>
<p>You can adjust brightness directly (works even with <code>modesetting</code> driver):
</p>
<pre># echo 7500 &gt; /sys/class/backlight/intel_backlight/brightness
</pre>
<p><br>
However, if you use a tool like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xorg-xbacklight">xorg-xbacklight</a></span> in its default configuration, nothing happens, because the path to the backlighting variable is not standard. To fix this issue, you have to setup Intel driver and add Backlight option to respective X-Org configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/10-backlight.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device" 
        Identifier "Card0" 
        Driver     "intel" 
        Option     "Backlight"  "intel_backlight" 
        BusID      "PCI:0:2:0" 
EndSection</pre>
</div></div>
		
		<div id="catlinks"  data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../wiki/Category:Xiaomi.html" title="Category:Xiaomi">Xiaomi</a></li></ul>
</div></div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Xiaomi_Mi_Notebook_Pro_15.6&amp;oldid=603838">https://wiki.archlinux.org/index.php?title=Xiaomi_Mi_Notebook_Pro_15.6&amp;oldid=603838</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 3 April 2020, at 09:22.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../wiki/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../wiki/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../wiki/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



