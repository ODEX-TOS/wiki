<!--
    title: TOSboot
    description: Migration of TOSboot from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-29T19:40:39.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">TOSboot</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="/Usage/Configuration/T/TOSiso.html" title="TOSiso">TOSiso</a></li>
</ul>
</div>
<p><b>TOSboot</b> is an unofficial set of scripts to generate bootable media for CD/USB/PXE, designed for installation or rescue operation.
</p>
<p>It only runs in RAM, without any special filesystems like squashfs, thus it is limited to the RAM which is installed in your system.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installation"><span >1</span> <span >Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#The_difference_to_the_archiso_install_media"><span >2</span> <span >The difference to the archiso install media</span></a></li>
<li class="toclevel-1 tocsection-3">
<a href="#TOSboot_ISO_Releases"><span >3</span> <span >TOSboot ISO Releases</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Burning_Release"><span >3.1</span> <span >Burning Release</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#PXE_booting_/_Rescue_system"><span >3.2</span> <span >PXE booting / Rescue system</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Supported_boot_modes_of_TOSboot_media"><span >3.3</span> <span >Supported boot modes of TOSboot media</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#How_to_do_a_remote_installation_with_ssh?"><span >3.4</span> <span >How to do a remote installation with ssh?</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Interactive_setup_features"><span >3.5</span> <span >Interactive setup features</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#FAQ,_Known_Issues_and_limitations"><span >3.6</span> <span >FAQ, Known Issues and limitations</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#History"><span >3.7</span> <span >History</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Bugs"><span >3.8</span> <span >Bugs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#TOSboot_BETA_ISO_Release"><span >4</span> <span >TOSboot BETA ISO Release</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Links"><span >5</span> <span >Links</span></a></li>
<li class="toclevel-1 tocsection-14">
<a href="#Howto:_Create_image_files"><span >6</span> <span >Howto: Create image files</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Requirements"><span >6.1</span> <span >Requirements</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Create_archboot_chroots"><span >6.2</span> <span >Create archboot chroots</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Install_archboot_and_update_to_latest_packages"><span >6.3</span> <span >Install archboot and update to latest packages</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Generate_images"><span >6.4</span> <span >Generate images</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="/Usage/Configuration/H/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=archboot">archboot</a></span> package.
</p>
<h2><span class="mw-headline" id="The_difference_to_the_archiso_install_media">The difference to the archiso install media</span></h2>
<ul>
<li>It provides an additional interactive setup and quickinst script.</li>
<li>It contains [core] repository on media.</li>
<li>It runs a modified TOS Linux system in initramfs.</li>
<li>It is restricted to RAM usage, everything which is not necessary like</li>
</ul>
<dl><dd>man or info pages etc. is not provided.</dd></dl>
<ul>
<li>It doesn't mount anything during boot process.</li>
<li>It supports remote installation through ssh.</li>
</ul>
<h2><span class="mw-headline" id="TOSboot_ISO_Releases">TOSboot ISO Releases</span></h2>
<ul><li>Hybrid image files and torrents are provided, which include x86_64 and [core] repository,</li></ul>
<dl><dd>network labeled images don't include [core] repository.</dd></dl>
<ul>
<li>Please check md5sum before using it.</li>
<li>
<a rel="nofollow"  href="https://downloads.archlinux.de/iso/archboot/2018.06">Download 2018.06 „2k18-R1“</a> / <a rel="nofollow"  href="ftp://ftp.archlinux.org/iso/archboot/Changelog-2018.06-1.txt">Changelog</a> / <a rel="nofollow"  href="https://bbs.archlinux.org/viewtopic.php?id=182439">Forum thread</a>
</li>
</ul>
<dl>
<dd>kernel: 4.17.2-1</dd>
<dd>pacman: 5.1.0-2</dd>
<dd>systemd: 238.133-1</dd>
<dd>RAM recommendations: 1500 MB</dd>
</dl>
<h3><span class="mw-headline" id="Burning_Release">Burning Release</span></h3>
<p>Hybrid image file is a standard CD-burnable image and also a raw disk image. 
</p>
<ul>
<li>Can be burned to CD(RW) media using most CD-burning utilities.</li>
<li>Can be raw-written to a drive using 'dd' or similar utilities. This method is intended for use with USB thumb drives.</li>
</ul>
<pre>'dd if=&lt;imagefile&gt; of=/dev/&lt;yourdevice&gt; bs=1M'</pre>
<h3>
<span id="PXE_booting_.2F_Rescue_system"></span><span class="mw-headline" id="PXE_booting_/_Rescue_system">PXE booting / Rescue system</span>
</h3>
<p><a rel="nofollow"  href="https://downloads.archlinux.de/iso/archboot/2018.06/boot">Download 2018.12 „2k18-R1“</a> needed files from the directory.
</p>
<ul>
<li>vmlinuz_x86_64 +  initramfs_x86_64.img(x86_64)</li>
<li>intel-ucode.img (x86_64)</li>
<li>For PXE booting add the kernel and initrd to your tftp setup and you will get a running installation/rescue system.</li>
<li>For Rescue booting add an entry to your bootloader pointing to the kernel and initrd.</li>
</ul>
<h3><span class="mw-headline" id="Supported_boot_modes_of_TOSboot_media">Supported boot modes of TOSboot media</span></h3>
<ul>
<li>It supports BIOS booting with syslinux.</li>
<li>It supports UEFI/UEFI_CD booting with <a href="/Usage/Configuration/S/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> and <a href="/Usage/Configuration/E/EFISTUB.html" title="EFISTUB">EFISTUB</a>.</li>
<li>It support UEFI_MIX_MODE booting with grub.</li>
<li>It supports Secure Boot with prebootloader.</li>
<li>It supports grub(2)'s iso loopback support.</li>
</ul>
<dl>
<dd>variables used (below for example):</dd>
<dd>iso_loop_dev=PARTUUID=XXXX</dd>
<dd>iso_loop_path=/blah/archboot.iso</dd>
</dl>
<pre>menuentry "TOSboot" --class iso {
loopback loop (hdX,X)/&lt;archboot.iso&gt;
linux-tos(loop)/boot/vmlinuz_x86_64 iso_loop_dev=/dev/sdXX iso_loop_path=/&lt;archboot.iso&gt;
initrd (loop)/boot/initramfs_x86_64.img
}</pre>
<ul><li>It supports booting using syslinux's memdisk (only in BIOS mode).</li></ul>
<pre>menuentry "TOSboot Memdisk" {
   linux16 /memdisk iso
   initrd16 hd(X,X)/&lt;archboot.iso&gt;
}</pre>
<h3>
<span id="How_to_do_a_remote_installation_with_ssh.3F"></span><span class="mw-headline" id="How_to_do_a_remote_installation_with_ssh?">How to do a remote installation with ssh?</span>
</h3>
<ul>
<li>During boot all network interfaces will try to obtain an IP address through dhcp.</li>
<li>root password is not set by default! If you need privacy during installation set a password.</li>
</ul>
<pre>'ssh root@&lt;yourip&gt;'</pre>
<h3><span class="mw-headline" id="Interactive_setup_features">Interactive setup features</span></h3>
<ul>
<li>Media and Network installation mode</li>
<li>Changing keymap and consolefont</li>
<li>Changing time and date</li>
<li>Setup network with netctl</li>
<li>Preparing storage disk, like auto-prepare, partitioning, GUID (gpt) support, 4k sector drive support etc.</li>
<li>Creation of software raid/raid partitions, lvm2 devices and luks encrypted devices</li>
<li>Supports standard linux,raid/raid_partitions,dmraid/fakeraid,lvm2 and encrypted devices</li>
<li>Filesystem support: ext2/3/4, btrfs, f2fs, nilfs2, reiserfs,xfs,jfs,ntfs-3g,vfat</li>
<li>Name scheme support: PARTUUID, PARTLABEL, FSUUID, FSLABEL and KERNEL</li>
<li>Mount support of grub(2) loopback and memdisk installation media</li>
<li>Package selection support</li>
<li>hwdetect script is used for preconfiguration</li>
<li>Auto/Preconfiguration of fstab, kms mode, ssd, mkinitcpio.conf, systemd, crypttab and mdadm.conf</li>
<li>Configuration of basic system files</li>
<li>Setting root password</li>
<li>grub(2) (BIOS and UEFI), refind-efi, systemd-boot, syslinux-tos(BIOS and UEFI) bootloader support</li>
</ul>
<h3>
<span id="FAQ.2C_Known_Issues_and_limitations"></span><span class="mw-headline" id="FAQ,_Known_Issues_and_limitations">FAQ, Known Issues and limitations</span>
</h3>
<ul>
<li>Release specific known issues and workarounds are posted in changelog files.</li>
<li>Check also the forum threads for posted fixes and workarounds.</li>
<li>Why screen stays blank or other weird screen issues happen?</li>
</ul>
<dl><dd><dl><dd>Some hardware doesn't like the KMS activation, use radeon.modeset=0, i915.modeset=0 or nouveau.modeset=0 on boot prompt.</dd></dl></dd></dl>
<ul><li>dmraid/fakeraid might be broken on some boards, support is not perfect here.</li></ul>
<dl><dd><dl>
<dd>The reason is there are so many different hardware components out there. At the moment 1.0.0rc16 is included, with latest fedora patchset, development has been stopped.</dd>
<dd>mdadm supports some isw and ddf fakeraid chipsets, but assembling during boot is deactivated in /etc/mdadm.conf!</dd>
</dl></dd></dl>
<ul><li>grub2 cannot detect correct bios boot order:</li></ul>
<dl><dd><dl>
<dd>It may happen that hd(x,x) entries are not correct, thus first reboot may not work.</dd>
<dd>Reason: grub cannot detect bios boot order.</dd>
<dd>Fix: Either change bios boot order or change menu.lst to correct entries after successful boot. This cannot be fixed it is a restriction in grub2!</dd>
</dl></dd></dl>
<ul><li>Why is parted used in setup routine, instead of cfdisk in msdos partitiontable mode?</li></ul>
<dl><dd><dl>
<dd>parted is the only linux-tospartition program that can handle all type of things the setup routine offers.</dd>
<dd>cfdisk cannot handle GPT/GUID nor it can allign partitions correct with 1MB spaces for 4k sector disks.</dd>
<dd>cfdisk is a nice tool but is too limited to be the standard partitioner anymore.</dd>
<dd>cfdisk is still included but has to be run in another terminal.</dd>
</dl></dd></dl>
<h3><span class="mw-headline" id="History">History</span></h3>
<p>History of old releases can be found <a rel="nofollow"  href="ftp://ftp.archlinux.org/iso/archboot/history">here</a>.
</p>
<h3><span class="mw-headline" id="Bugs">Bugs</span></h3>
<p><a rel="nofollow"  href="https://bugs.archlinux.org">TOS Linux Bugtracker</a>
</p>
<h2><span class="mw-headline" id="TOSboot_BETA_ISO_Release">TOSboot BETA ISO Release</span></h2>
<ul>
<li>Hybrid image file is provided, which only supports network installation.</li>
<li>Please read the according Changelog files for RAM limitations.</li>
<li>Please check md5sum before using it.</li>
<li>No beta ISO available at the moment.</li>
</ul>
<h2><span class="mw-headline" id="Links">Links</span></h2>
<ul><li><a rel="nofollow"  href="https://projects.archlinux.org/archboot.git/">GIT repository</a></li></ul>
<h2><span class="mw-headline" id="Howto:_Create_image_files">Howto: Create image files</span></h2>
<p>(Quick regeneration of installation media with latest available core packages)
</p>
<h3><span class="mw-headline" id="Requirements">Requirements</span></h3>
<ul>
<li>x86_64 architecture</li>
<li>~ 3GB free space on disk</li>
</ul>
<h3><span class="mw-headline" id="Create_archboot_chroots">Create archboot chroots</span></h3>
<ul><li>Install archboot:</li></ul>
<pre># mkdir -p <i>x86_64_chroot</i>/var/lib/pacman
# pacman --root "<i>x86_64_chroot</i>" -Sy base --noconfirm --noprogressbar
</pre>
<ul><li>Enter archboot x86_64 container:</li></ul>
<pre># systemd-nspawn --capability=CAP_MKNOD --register=no -M $(uname -m) -D <i>x86_64_chroot</i>
</pre>
<h3><span class="mw-headline" id="Install_archboot_and_update_to_latest_packages">Install archboot and update to latest packages</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=archboot">archboot</a></span> in chroot and <a href="/Usage/Configuration/P/Pacman.html#Upgrading_packages" title="Pacman">update</a> to latest available packages.
</p>
<h3><span class="mw-headline" id="Generate_images">Generate images</span></h3>
<pre># run in both chroots (needs quite some time ...)
archboot-allinone.sh -t
# put the generated tarballs in one directory and run (needs quite some time ...)
archboot-allinone.sh -g
</pre>
<ul><li>Finished you get a bunch of images.</li></ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="/Usage/Configuration/C/Category:System_recovery.html" title="Category:System recovery">System recovery</a></li>
<li><a href="/Usage/Configuration/C/Category:Installation_process.html" title="Category:Installation process">Installation process</a></li>
<li><a href="/Usage/Configuration/C/Category:Live_TOS_systems.html" title="Category:Live TOS systems">Live TOS systems</a></li>
<li><a href="/Usage/Configuration/C/Category:TOS_projects.html" title="Category:TOS projects">TOS projects</a></li>
</ul>
</div></div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=TOSboot&amp;oldid=611448">https://wiki.archlinux.org/index.php?title=TOSboot&amp;oldid=611448</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 8 May 2020, at 04:26.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="/Usage/Configuration/T/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="/Usage/Configuration/T/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="/Usage/Configuration/T/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



