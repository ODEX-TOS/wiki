<!--
    title: UX530
    description: Migration of UX530 from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-28T17:58:55.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">ASUS Zenbook UX430/UX530</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"><span >&lt; <a href="../../wiki/ASUS_Zenbook_UX430/UX530.html" class="mw-redirect" title="ASUS Zenbook UX430">ASUS Zenbook UX430</a></span></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table  style="float: right;">
<tbody>
<tr>
<td><b>Device</b></td>
<td>
<b>Status</b>
</td>
</tr>
<tr>
<td>Intel</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Nvidia</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>HDMI (USB cable)</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Ethernet (USB cable)</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Wireless</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Audio</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Touchpad</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Camera</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Card Reader</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Function keys</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
<tr>
<td>Fingerprint Sensor</td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Partially working
</td>
</tr>
<tr>
<td>Ambient Light Sensor</td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Partially working
</td>
</tr>
<tr>
<td>Battery charge threshold</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Working
</td>
</tr>
</tbody>
</table>
<p>ASUS <a rel="nofollow"  href="https://www.asus.com/News/q0npwWGXCqpxoVf8">announced</a> UX430 and UX530 models. Since these models share almost the same hardware (the only difference is screen size and discrete NVidia GPU), this article covers hardware specific configuration for all UX430UA, UX430UQ, UX530UQ and UX530UX models.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Configuration"><span >1</span> <span >Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Secure_Boot_(option)"><span >1.1</span> <span >Secure Boot (option)</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Video"><span >1.2</span> <span >Video</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Audio"><span >1.3</span> <span >Audio</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Touchpad"><span >1.4</span> <span >Touchpad</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Fingerprint_sensor"><span >1.5</span> <span >Fingerprint sensor</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Ambient_Light_Sensor"><span >1.6</span> <span >Ambient Light Sensor</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Battery_charge_threshold"><span >1.7</span> <span >Battery charge threshold</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9">
<a href="#Troubleshooting"><span >2</span> <span >Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Headphones_audio_is_too_low"><span >2.1</span> <span >Headphones audio is too low</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Microcode"><span >2.2</span> <span >Microcode</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Nvidia_issues_with_Bumblebee"><span >2.3</span> <span >Nvidia issues with Bumblebee</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Headset_Microphone"><span >2.4</span> <span >Headset Microphone</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#No_sound_(after_Windows)"><span >2.5</span> <span >No sound (after Windows)</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Suspend"><span >2.6</span> <span >Suspend</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Fan_always_active"><span >2.7</span> <span >Fan always active</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17">
<a href="#Tips_and_tricks"><span >3</span> <span >Tips and tricks</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Power_saving_and_performance"><span >3.1</span> <span >Power saving and performance</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Extract_Windows_10_license_key"><span >3.2</span> <span >Extract Windows 10 license key</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Configuration">Configuration</span></h1>
<h2>
<span id="Secure_Boot_.28option.29"></span><span class="mw-headline" id="Secure_Boot_(option)">Secure Boot (option)</span>
</h2>
<p>In order to boot any Linux operating system, navigate to BIOS, then hit F7 or click on "Advanced Menu", then the "Security" tab and set "Secure Boot" to <code>Off</code>.
</p>
<p>If the aforementioned "Secure Boot" option is a menu rather than an on-or-off option, click on "Secure Boot", "Key Management", then "Reset to Setup Mode" and confirm in the dialog.
</p>
<h2><span class="mw-headline" id="Video">Video</span></h2>
<p>See <a href="../../wiki/Intel_graphics.html#Installation" title="Intel graphics">Intel Graphics</a> and <a href="../../wiki/Hardware_video_acceleration.html" title="Hardware video acceleration">Hardware Acceleration</a>. For models with discrete Nvidia graphics card, also see <a href="../../wiki/NVIDIA_Optimus.html" title="NVIDIA Optimus">NVIDIA Optimus</a>.
</p>
<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p>See <a href="../../wiki/PulseAudio.html" title="PulseAudio">PulseAudio</a>.
</p>
<h2><span class="mw-headline" id="Touchpad">Touchpad</span></h2>
<p>See <a href="../../wiki/Libinput.html" title="Libinput">Libinput</a>.
</p>
<h2><span class="mw-headline" id="Fingerprint_sensor">Fingerprint sensor</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This is likely not going to work at all. See <a href="../../wiki/Talk:ASUS_Zenbook_UX430/UX530.html#Fingerprint_Reader" title="Talk:ASUS Zenbook UX430/UX530">Talk:ASUS Zenbook UX430/UX530#Fingerprint Reader</a>.</div>
<p>The fingerprint sensor is supported since <a href="../../wiki/Fprint.html" title="Fprint">Fprint</a> v0.99.0, even through it is supported it doesn't work reliably. This is due to the fingerprint small sensor<a rel="nofollow"  href="https://github.com/iafilatov/libfprint/tree/e459992e76ab322d9f92e1885215f2da7c1d0a59#common-problems">[1]</a>.
</p>
<h2><span class="mw-headline" id="Ambient_Light_Sensor">Ambient Light Sensor</span></h2>
<p>The Ambient Light Sensor should work on UX430UQ<a rel="nofollow"  href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=db2582afa7444a0ce6bb1ebf1431715969a10b06">[2]</a> and a patch for UX430UNR is available<a rel="nofollow"  href="https://www.spinics.net/lists/platform-driver-x86/msg19357.html">[3]</a>.
</p>
<h2><span class="mw-headline" id="Battery_charge_threshold">Battery charge threshold</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-view-refresh-red.png" ><img alt="Tango-view-refresh-red.png" src="../../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../../File:Tango-view-refresh-red.png" ><img alt="Tango-view-refresh-red.png" src="../../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Kernel 5.4 added the ability to <a rel="nofollow"  href="https://github.com/torvalds/linux/commit/7973353e92ee1e7ca3b2eb361a4b7cb66c92abee#diff-a746f90c9503689310ee8f3bdc77bc4eR429-R437">set the battery charge threshold through the sysfs interface</a>. See <a href="../../wiki/ASUS_Zenbook_UX534.html#Battery_charge_threshold" title="ASUS Zenbook UX534">ASUS_Zenbook_UX534#Battery_charge_threshold</a>. (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:ASUS_Zenbook_UX430/UX530">Talk:ASUS Zenbook UX430/UX530#</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The following has been tested on a Zenbook UX430UNR with BIOS version 308.</div>
<p>Most newer Zenbooks supports specifying a charge stop threshold (see <a rel="nofollow"  href="https://www.asus.com/us/support/FAQ/1032726/">ASUS Battery Health Charging</a> for more information).
</p>
<p>The battery charge stop threshold can be set by modifying the EC registers, which can be done with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=acpi_call">acpi_call</a></span>. Finding the correct EC register to modify, is the tricky part.
</p>
<p>You can check the current threshold and battery percent, with the following commands:
</p>
<pre>$ read () { echo "${1}" &gt; /proc/acpi/call; printf "%d\n" $(sed 's/\x0.*//g' /proc/acpi/call); }
$ read "\_SB.PCI0.LPCB.EC0.RRAM 0x3af"
100 # Percent at which the battery will stop charging (default is 100)
$ read "\_SB.PCI0.LPCB.EC0.RRAM 0x3b0"
80 # current battery percent, should match: cat /sys/class/power_supply/BAT0/capacity</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Do not proceed if the commands don't return the expected values!</div> 
<p>The threshold can be changed with the following command (the threshold is reset when the computer is power cycled):
</p>
<pre>$ echo "\_SB.PCI0.LPCB.EC0.WRAM 0x3af &lt;battery percent in hex, ex: 0x50 for 80%&gt;" &gt; /proc/acpi/call</pre>
<p>The hex value can be found with <code>printf "0x%x\n" 80</code>.
</p>
<p>To change the threshold at boot it is possible to use <a href="../../wiki/Systemd.html#Temporary_files" title="Systemd">systemd-tmpfiles</a>. 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tmpfiles.d/battery.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">w /proc/acpi/call - - - - \\_SB.PCI0.LPCB.EC0.WRAM 0x3af 0x50 # 80%</pre>
<h1><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h1>
<h2><span class="mw-headline" id="Headphones_audio_is_too_low">Headphones audio is too low</span></h2>
<p>Linux kernel version 4.14 and earlier has a bug, where you may notice that the audio through the headphones is too low (<a rel="nofollow"  href="https://bugs.launchpad.net/ubuntu/+source/alsa-driver/+bug/1648183">upstream bug</a>). In kernel version 4.15 you have to pull out and plug in back your headset after resume in order to fix the low audio.
</p>
<p>In order to fix it, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=alsa-tools">alsa-tools</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/hda-verb/">hda-verb</a></span><sup><small>AUR</small></sup> and create the file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/fix_headphones_audio.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
while true; do
	DEVICE=`ls /dev/snd/hwC[[:print:]]*D0 | head -n 1`
	if [ ! -z "$DEVICE" ]; then
		hda-verb "$DEVICE" 0x20 SET_COEF_INDEX 0x67
		hda-verb "$DEVICE" 0x20 SET_PROC_COEF 0x3000
		break
	fi
	sleep 1
done
</pre>
<p>Then create a <a href="../../wiki/Systemd.html" title="Systemd">systemd</a> script with the following content:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/fix_headphones_audio.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Fix headphones audio after boot &amp; resume.
After=multi-user.target suspend.target hibernate.target

[Service]
Type=oneshot
ExecStart=/bin/sh '/usr/local/bin/fix_headphones_audio.sh'

[Install]
WantedBy=multi-user.target suspend.target hibernate.target
</pre>
<p>And finally, <a href="../../wiki/Systemd.html#Using_units" title="Systemd">start and enable</a> <code>fix_headphones_audio.service</code>.
</p>
<h2><span class="mw-headline" id="Microcode">Microcode</span></h2>
<p>During boot you might get the message <code>[Firmware Bug]: TSC_DEADLINE disabled due to Errata; please update microcode to version: 0x52 (or later)</code>. See <a href="../../wiki/Microcode.html" title="Microcode">Microcode</a> to resolve it.
</p>
<h2><span class="mw-headline" id="Nvidia_issues_with_Bumblebee">Nvidia issues with Bumblebee</span></h2>
<p>It is likely that it's one of these issues:
</p>
<ul>
<li>You used a power management application (especially <a href="../../wiki/Powertop.html" title="Powertop">Powertop</a>). See <a href="../../wiki/Bumblebee.html#Broken_power_management_with_kernel_4.8" title="Bumblebee">bumblebee#Broken power management with kernel 4.8</a> for more information.</li>
<li>You suspended your laptop and resumed, and are now unable to start your GPU, see <a href="../../wiki/Bumblebee.html#Failed_to_initialize_the_NVIDIA_GPU_at_PCI:1:0:0_(Bumblebee_daemon_reported:_error:_%5BXORG%5D_(EE)_NVIDIA(GPU-0))" title="Bumblebee">Bumblebee#Failed to initialize the NVIDIA GPU at PCI:1:0:0 (Bumblebee daemon reported: error: [XORG] (EE) NVIDIA(GPU-0))</a>.</li>
</ul>
<h2><span class="mw-headline" id="Headset_Microphone">Headset Microphone</span></h2>
<p>You may encounter an issue where your headset microphone is not being detected. To fix this, create this file and restart your system:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/fix_headset_microphone.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Fix an issue where your headset microphone is not being detected:
options snd-hda-intel model=dell-headset-multi
</pre>
<h2>
<span id="No_sound_.28after_Windows.29"></span><span class="mw-headline" id="No_sound_(after_Windows)">No sound (after Windows)</span>
</h2>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Someone please check and confirm if <a href="../../wiki/ASUS_N550JV.html#Dual_boot" title="ASUS N550JV">this is working alternative solution</a>. (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:ASUS_Zenbook_UX430/UX530">Talk:ASUS Zenbook UX430/UX530#</a>)</div>
</div>
<p>There seems to be a bug in the firmware that prevents the embedded sound card from working in TOS after Windows has been restarted. A complete shutdown of the laptop is required to get the sound card working again.
</p>
<h2><span class="mw-headline" id="Suspend">Suspend</span></h2>
<p>Linux (4.17 at least) default to <a rel="nofollow"  href="https://www.kernel.org/doc/html/v4.18/admin-guide/pm/sleep-states.html#suspend-to-idle">suspend-to-idle</a> which isn't very power effective. This is probably due to this change in <a rel="nofollow"  href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=e870c6c87cf9484090d28f2a68aa29e008960c93">4.14-rc1</a>. For better power effective you can use <a rel="nofollow"  href="https://www.kernel.org/doc/html/v4.18/admin-guide/pm/sleep-states.html#suspend-to-ram">suspend-to-ram</a> by adding <code>mem_sleep_default=deep</code> to the kernel cmdline.
</p>
<h2><span class="mw-headline" id="Fan_always_active">Fan always active</span></h2>
<p>See <a href="../../wiki/Fan_speed_control.html#NBFC" title="Fan speed control">Fan speed control#NBFC</a>.
</p>
<h1><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h1>
<h2><span class="mw-headline" id="Power_saving_and_performance">Power saving and performance</span></h2>
<p>As advertised by ASUS, both laptops are capable to last up to 9 hours on battery. In order to achieve this, see:
</p>
<ul><li>BIOS update - It is generally recommended to update BIOS, as it usually brings performance, power-saving and security features.</li></ul>
<ul><li>
<a href="../../wiki/Power_management.html" class="mw-redirect" title="Power Saving">Power Saving</a> - List of general recommendations to increase battery life.</li></ul>
<ul><li>
<a href="../../wiki/Improving_performance.html" title="Improving performance">Improving performance</a> - List of general recommendations to increase performance.</li></ul>
<ul><li>
<a href="../../wiki/Solid_state_drive.html" class="mw-redirect" title="SSD">SSD</a> - Tips and tricks for Solid State Drives. Both laptops ship M.2 SSD by default.</li></ul>
<ul><li>
<a href="../../wiki/Undervolting_CPU.html" title="Undervolting CPU">Undervolting CPU</a> - Decrease voltage for Intel CPU (reduce battery drain, reduce heat and therefore - reduce fan speed)</li></ul>
<h2><span class="mw-headline" id="Extract_Windows_10_license_key">Extract Windows 10 license key</span></h2>
<p>The laptop comes with Windows 10 preinstalled and the activation key is hardcoded into the firmware. If you replace Windows with Linux, then hardcoded activation key is useless. You might want to extract it and use somewhere else (e.g. virtualized Windows 10):
</p>
<pre># grep -aPo '[\w]{5}-[\w]{5}-[\w]{5}-[\w]{5}-[\w]{5}' /sys/firmware/acpi/tables/MSDM
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Microsoft online support confirmed that the code is valid, but because you are unable to activate it (Windows fails to activate and asks for another code), they offered 2 options - replace activation code with another one for 40$ or contact OEM (ASUS) about this issue.
ASUS confirmed, that in order to "use" this activation key, you need to bring this laptop to repair service so they can "restore" system using ASUS OEM Windows 10 image. They do not provide this image for download.</div>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../wiki/Category:ASUS.html" title="Category:ASUS">ASUS</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../../wiki/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../../wiki/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=ASUS_Zenbook_UX430/UX530&amp;oldid=608403">https://wiki.archlinux.org/index.php?title=ASUS_Zenbook_UX430/UX530&amp;oldid=608403</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 26 April 2020, at 18:25.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../../wiki/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../../wiki/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../../wiki/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



