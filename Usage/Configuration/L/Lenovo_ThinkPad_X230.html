<!--
    title: Lenovo_ThinkPad_X230
    description: Migration of Lenovo_ThinkPad_X230 from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-29T19:40:39.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">Lenovo ThinkPad X230</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p>Related articles</p>
<ul>
<li><a href="/Usage/Configuration/L/Laptop.html" title="Laptop">Laptop</a></li>
<li><a href="/Usage/Configuration/T/ThinkPad_docks.html" title="ThinkPad docks">ThinkPad docks</a></li>
<li><a href="/Usage/Configuration/H/HiDPI.html" title="HiDPI">HiDPI</a></li>
</ul>
</div>
<p>Lenovo ThinkPad X230 <a rel="nofollow"  href="https://pcsupport.lenovo.com/wiki/en/products/laptops-and-netbooks/thinkpad-x-series-laptops/thinkpad-x230">official page</a>, <a rel="nofollow"  href="https://psref.lenovo.com/syspool/Sys/PDF/withdrawnbook/ThinkPad_X230.pdf">datasheet</a>, <a rel="nofollow"  href="https://us.download.lenovo.com/ibmdl/pub/pc/pccbbs/mobiles_pdf/x230_x230i_hmm_en_0b48666_01.pdf">hardware maintenance manual</a>, <a rel="nofollow"  href="https://www.thinkwiki.org/wiki/Category:X230">ThinkWiki</a>. <a rel="nofollow"  href="https://forum.thinkpads.com/viewtopic.php?t=121522">PCB schematic</a> has been leaked too.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Configuration"><span >1</span> <span >Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Kernel"><span >1.1</span> <span >Kernel</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Screen"><span >1.2</span> <span >Screen</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Brightness"><span >1.3</span> <span >Brightness</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Suspend_to_ram"><span >1.4</span> <span >Suspend to ram</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#UMTS_Modem"><span >1.5</span> <span >UMTS Modem</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7">
<a href="#Input_devices"><span >2</span> <span >Input devices</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#TrackPoint"><span >2.1</span> <span >TrackPoint</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Touchpad"><span >2.2</span> <span >Touchpad</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Keyboard_backlight_control_keys"><span >2.3</span> <span >Keyboard backlight control keys</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Sound_control_buttons"><span >2.4</span> <span >Sound control buttons</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Fingerprint_reader"><span >2.5</span> <span >Fingerprint reader</span></a></li>
<li class="toclevel-2 tocsection-13">
<a href="#X230T_(tablet_version)"><span >2.6</span> <span >X230T (tablet version)</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Wacom_tablet_input"><span >2.6.1</span> <span >Wacom tablet input</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Multitouch_screen_for_the_X230t"><span >2.6.2</span> <span >Multitouch screen for the X230t</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#OpenCL"><span >3</span> <span >OpenCL</span></a></li>
<li class="toclevel-1 tocsection-17">
<a href="#Power_Saving"><span >4</span> <span >Power Saving</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#TLP"><span >4.1</span> <span >TLP</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Charge_thresholds"><span >4.2</span> <span >Charge thresholds</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Fan_control"><span >4.3</span> <span >Fan control</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21">
<a href="#UEFI"><span >5</span> <span >UEFI</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#Boot_configuration"><span >5.1</span> <span >Boot configuration</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#USB_UEFI_update"><span >5.2</span> <span >USB UEFI update</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Trusted_Platform_Module"><span >5.3</span> <span >Trusted Platform Module</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25"><a href="#Known_issues"><span >6</span> <span >Known issues</span></a></li>
<li class="toclevel-1 tocsection-26"><a href="#See_also"><span >7</span> <span >See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="Kernel">Kernel</span></h3>
<p>Enable Intel <a href="/Usage/Configuration/K/Kernel_mode_setting.html" title="Kernel mode setting">kernel mode setting</a> driver:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES="i915"
</pre>
<p>After saving the above files, make sure to regenerate your initram image by the command <code>mkinitcpio -p linux</code>, and follow the steps in <a href="/Usage/Configuration/K/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<h3><span class="mw-headline" id="Screen">Screen</span></h3>
<p>X230 has IPS or TN screen with 125.37 DPI. Refer to <a href="/Usage/Configuration/H/HiDPI.html" title="HiDPI">HiDPI</a> page for more information. It can be set with command <code>xrandr --dpi 125.37</code> using <code><a href="/Usage/Configuration/X/Xinit.html#xinitrc" class="mw-redirect" title=".xinitrc">.xinitrc</a></code>, <code><a href="/Usage/Configuration/D/Display_manager.html#Session_configuration" class="mw-redirect" title="Xsession">.xsession</a></code> or other autostarts.
</p>
<h3><span class="mw-headline" id="Brightness">Brightness</span></h3>
<p>If you experience that your brightness setting is not restored on resume from suspend, then create config:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
Identifier "card0"
Driver "intel"
Option "Backlight" "intel_backlight"
BusID "PCI:0:2:0"
EndSection
</pre>
<h3><span class="mw-headline" id="Suspend_to_ram">Suspend to ram</span></h3>
<p>There is an issue with system shutdown with power saving tools that cannot distinguish sys devices. You will need to add to the systemd shutdown trigger on this machine or else you'll get a system reboot when you shutdown the machine. Put this in /etc/rc.local.shutdown and update and enable its service, if not already.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/rc.local.shutdown</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
# /etc/rc.local.shutdown: Local shutdown script.
# A script to act as a workaround for the bug in the runtime power management module, which causes thinkpad laptops to restart after shutting down. 
# Bus list for the runtime power management module.
buslist="pci i2c usb"
for bus in $buslist; do                                                             
  for i in /sys/bus/$bus/devices/*/power/control; do                              
    echo on &gt; $i
  done
done
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system/rc-local-shutdown.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=/etc/rc.local.shutdown Compatibility
ConditionFileIsExecutable=/etc/rc.local.shutdown
DefaultDependencies=no
After=rc-local.service basic.target
Before=shutdown.target

[Service]
Type=oneshot
ExecStart=/etc/rc.local.shutdown
StandardInput=tty
RemainAfterExit=yes

[Install]
WantedBy=shutdown.target
</pre>
<h3><span class="mw-headline" id="UMTS_Modem">UMTS Modem</span></h3>
<dl><dd><dl><dd><i>Main article: <a href="/Usage/Configuration/T/ThinkPad_mobile_Internet.html" title="ThinkPad mobile Internet">ThinkPad mobile Internet</a></i></dd></dl></dd></dl>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Official UEFI comes with whitelist of PCI boards (e.g. Wi-Fi and UMTS miniPCI cards). After installing unapproved PCI device boot will be interrupted with error: <code>1802: Unauthorized network card is plugged in - Power off and remove the miniPCI network card (0AF0/7201). System is halted.</code>
</div>
<p>Some models come with an integrated USB UMTS modem.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsusb -d 0bdb:1926</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Bus 003 Device 004: ID 0bdb:1926 Ericsson Business Mobile Networks BV H5321 gw Mobile Broadband Driver</pre>
<p>In order for it to work with <a href="/Usage/Configuration/N/NetworkManager.html" title="NetworkManager">NetworkManager</a>, you will need to install <a rel="nofollow"  href="https://www.archlinux.org/packages/?name=modemmanager">ModemManager</a> from the official repositories.
</p>
<p>For it to be recognized by ModemManager, you also need to set the kernel module option to:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/umts-modem.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options cdc_ncm prefer_mbim=N</pre>
<h2><span class="mw-headline" id="Input_devices">Input devices</span></h2>
<h3><span class="mw-headline" id="TrackPoint">TrackPoint</span></h3>
<dl><dd><dl><dd><i>Main article: <a href="/Usage/Configuration/T/TrackPoint.html" title="TrackPoint">TrackPoint</a></i></dd></dl></dd></dl>
<p>Laptop equipped with combined pointing device called <a rel="nofollow"  href="https://thinkwiki.org/wiki/UltraNav">UltraNav™</a>. It incorporates small touchpad, three hardware buttons and TrackPoint.
</p>
<h3><span class="mw-headline" id="Touchpad">Touchpad</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a href="/Usage/Configuration/T/Touchpad_Synaptics.html" title="Touchpad Synaptics">Touchpad Synaptics</a> superseded by <a href="/Usage/Configuration/L/Libinput.html" title="Libinput">libinput</a>.</div>
<p>The original configuration renders the touchpad quite useless, as it behaves very jumpily. <a rel="nofollow"  href="https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-input-synaptics/+bug/1042069/comments/5">Ubuntu Bugtracker</a> offers a solution for this issue. Add the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/50-synaptics.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
        Identifier "touchpad"
        MatchProduct "SynPS/2 Synaptics TouchPad"
        # MatchTag "lenovo_x230_all"
        Driver "synaptics"
        # fix touchpad resolution
        Option "VertResolution" "100"
        Option "HorizResolution" "65"
        # disable synaptics driver pointer acceleration
        Option "MinSpeed" "1"
        Option "MaxSpeed" "1"
        # tweak the X-server pointer acceleration
        Option "AccelerationProfile" "2"
        Option "AdaptiveDeceleration" "16"
        Option "ConstantDeceleration" "16"
        Option "VelocityScale" "20"
        Option "AccelerationNumerator" "30"
        Option "AccelerationDenominator" "10"
        Option "AccelerationThreshold" "10"
	# Disable two fingers right mouse click
	Option "TapButton2" "0"
        Option "HorizHysteresis" "100"
        Option "VertHysteresis" "100"
        # fix touchpad scroll speed
        Option "VertScrollDelta" "500"
        Option "HorizScrollDelta" "500"
EndSection
</pre>
<p>Setting e.g. the motion-acceleration value in <i>dconf</i> to 2.8 works nicely.
</p>
<h3><span class="mw-headline" id="Keyboard_backlight_control_keys">Keyboard backlight control keys</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" ><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Working out of the box now? (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:Lenovo_ThinkPad_X230">Talk:Lenovo ThinkPad X230#</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  On most X230 models, backlight works by default without any issues. Use below only in case of any problems.</div>
<p>Due to an issue with the firmware of several ThinkPads the backlight control keys (<code>Fn</code> + <code>F8/F9</code> on the X230) sometimes don't work correctly. Setting the brightness via e.g. the GNOME power control panel or altering the brightness value in <i>sysfs</i> is possible. The issue can be temporarily and partially fixed in adding the <code>acpi_osi="!Windows 2012"</code> <a href="/Usage/Configuration/K/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>. The fix is partial in that only 8 steps are accessible via the keys. See <a rel="nofollow"  href="https://bugzilla.kernel.org/show_bug.cgi?id=51231">[1]</a> for details.
</p>
<p>Power saving <a href="/Usage/Configuration/K/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> in addition to graphics card power saving, are shown below. <code>acpi_backlight=vendor</code> loads the vendor specific <a href="/Usage/Configuration/B/Backlight.html#ACPI" title="Backlight">Backlight#ACPI</a> driver (i.e. thinkpad_acpi) so the brightness keys (Fn + F8 and Fn + F9) work correctly.
</p>
<p>Note that the <code>acpi_backlight=vendor</code> kernel option also works with the standard TOS kernel (currently 3.7.10-1) and has the additional bonus that (<code>Fn+Space</code>) controls the keyboard lighting.
</p>
<h3><span class="mw-headline" id="Sound_control_buttons">Sound control buttons</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Laptop has single TRRS CTIA/Apple 3.5 mm audio jack (sleeve for a microphone).</div>
<p>Red LED mute indicators light up automatically, if corresponding channel <i>muted</i> in <code><a href="/Usage/Configuration/A/Advanced_Linux_Sound_TOSitecture.html" title="Advanced Linux Sound TOSitecture">alsamixer</a></code>. Easiest way to make buttons work is to install <a href="/Usage/Configuration/P/PulseAudio.html" title="PulseAudio">PulseAudio</a> and it's plugin for your <a href="/Usage/Configuration/D/Desktop_environment.html" title="Desktop environment">desktop environment</a>.
</p>
<ul>
<li>
<a href="/Usage/Configuration/G/GNOME.html" title="GNOME">GNOME</a> - works out of the box</li>
<li>
<a href="/Usage/Configuration/X/Xfce.html" title="Xfce">Xfce</a> - install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=pulseaudio">pulseaudio</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xfce4-pulseaudio-plugin">xfce4-pulseaudio-plugin</a></span>, add plugin to panel and reboot. Additionally  <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xfce4-pulseaudio-plugin">xfce4-pulseaudio-plugin</a></span> uses <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> as mixer and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xfce4-notifyd">xfce4-notifyd</a></span> for sound level popups</li>
<li>Handle ACPI events with <a href="/Usage/Configuration/A/Acpid.html" title="Acpid">acpid</a> the <a rel="nofollow"  href="https://makandracards.com/makandra/47162-how-to-enable-the-thinkpad-microphone-mute-key-on-ubuntu-16-04">hard way</a>. Some functions like <code>thinkpad-mutemic</code> implemented in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/thinkpad-scripts/">thinkpad-scripts</a></span><sup><small>AUR</small></sup>
</li>
<li>See also <a href="/Usage/Configuration/T/ThinkPad:_Mute_button.html" title="ThinkPad: Mute button">ThinkPad: Mute button</a>
</li>
</ul>
<h3><span class="mw-headline" id="Fingerprint_reader">Fingerprint reader</span></h3>
<p>Supported by <a href="/Usage/Configuration/F/Fprint.html" title="Fprint">fprint</a> out of the box. Used with <a href="/Usage/Configuration/P/PAM.html" title="PAM">PAM</a> for authentication, eliminating necessity of password input (logon, sudo). Though it's impossible to turn laptop on and boot TOS right into a <a href="/Usage/Configuration/D/Desktop_environment.html" title="Desktop environment">desktop environment</a> by just one finger swipe.
</p>
<h3>
<span id="X230T_.28tablet_version.29"></span><span class="mw-headline" id="X230T_(tablet_version)">X230T (tablet version)</span>
</h3>
<h4><span class="mw-headline" id="Wacom_tablet_input">Wacom tablet input</span></h4>
<p>Works out of the box with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-input-wacom">xf86-input-wacom</a></span>. See <a href="/Usage/Configuration/W/Wacom_tablet.html" title="Wacom tablet">Wacom tablet</a>.
</p>
<h4><span class="mw-headline" id="Multitouch_screen_for_the_X230t">Multitouch screen for the X230t</span></h4>
<p>Some X230t models have a multitouch screen in addition to the Wacom tablet. Works out of the box with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=xf86-input-libinput">xf86-input-libinput</a></span>.
</p>
<h2><span class="mw-headline" id="OpenCL">OpenCL</span></h2>
<p>Thinkpad X230 based on Intel <a href="https://en.wikipedia.org/wiki/Ivy_Bridge_(microarchitecture)"  title="wikipedia:Ivy Bridge (microarchitecture)">Ivy Bridge</a> (3rd generation) platform which meets <a href="/Usage/Configuration/G/GPGPU.html" class="mw-redirect" title="OpenCL">OpenCL</a> 1.2 specification. Unfortunately GPU support in Linux is broken, so <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=beignet">beignet</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/intel-opencl/">intel-opencl</a></span><sup><small>AUR</small></sup> won't work. Use CPU-only <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/intel-opencl-runtime/">intel-opencl-runtime</a></span><sup><small>AUR</small></sup> instead.
</p>
<p>OpenCL computation performance differ between CPU and GPU, depending on task. In many cases GPU is preferable. For <i>Core(TM) i5-3210M</i> CPU, which incorporates <i>HD Graphics 4000</i> GPU:
</p>
<ul>
<li>GPU <code><a href="/Usage/Configuration/H/Hashcat.html" title="Hashcat">hashcat</a> -m2500 -b -D 2 --force</code> reports 3095 H/s (checked in Windows)</li>
<li>CPU <code><a href="/Usage/Configuration/H/Hashcat.html" title="Hashcat">hashcat</a> -m2500 -b -D 1</code> reports only 2660 H/s, which is the same as no-OpenCL <code>aircrack-ng -S</code>
</li>
</ul>
<p>In this example OpenCL don't give any advantage and better look for other options like <a href="/Usage/Configuration/M/Makepkg.html#Building_optimized_binaries" title="Makepkg">building native binary</a> for your system.
</p>
<h2><span class="mw-headline" id="Power_Saving">Power Saving</span></h2>
<dl><dd><dl><dd><i>Main article: <a href="/Usage/Configuration/P/Power_management.html" class="mw-redirect" title="Power saving">Power saving</a></i></dd></dl></dd></dl>
<h3><span class="mw-headline" id="TLP">TLP</span></h3>
<p>Users of <a href="/Usage/Configuration/T/TLP.html" title="TLP">TLP</a> need to pay attention to a hardware bug according to which it is recommended to only use either the upper or lower charging threshold. The following configuration is recommended by the developer of TLP.<a rel="nofollow"  href="http://thinkpad-forum.de/threads/184510-elementary-OS-Thinkpad-X230-einrichten?p=1865345&amp;viewfull=1#post1865345">[2]</a>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/default/tlp</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">START_CHARGE_THRESH_BAT0=67
STOP_CHARGE_THRESH_BAT0=100
</pre>
<h3><span class="mw-headline" id="Charge_thresholds">Charge thresholds</span></h3>
<p>In order to prolong battery lifespan, especially if laptop always connected to AC power supply, it's possible to keep battery charge between 40-80 %. You can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=tpacpi-bat">tpacpi-bat</a></span> (written in Perl) for <a href="/Usage/Configuration/T/Tp_smapi.html#2nd_option,_tpacpi-bat" title="Tp smapi">setting charge thresholds</a>. This tool was superseded by <code><a rel="nofollow"  href="https://linrunner.de/wiki/tlp/docs/tlp-faq.html">natacpi</a></code>, which included in kernel 4.17 and supported by <a href="/Usage/Configuration/T/TLP.html" title="TLP">TLP</a>. Though it's possible to change thresholds directly. Values will be stored in battery microcontroller and will survive reboot, but reset if you remove the battery.
</p>
<pre># echo 40 &gt; /sys/class/power_supply/BAT0/charge_start_threshold
# echo 80 &gt; /sys/class/power_supply/BAT0/charge_stop_threshold
</pre>
<h3><span class="mw-headline" id="Fan_control">Fan control</span></h3>
<p>To optimize fan control, install and setup <a href="/Usage/Configuration/F/Fan_speed_control.html#ThinkPad_laptops" title="Fan speed control">thinkfan</a>. Then use the following configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/thinkfan.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">tp_fan /proc/acpi/ibm/fan
hwmon /sys/class/thermal/thermal_zone0/temp

(0, 0,  60)
(1, 53, 65)
(2, 55, 66)
(3, 57, 68)
(4, 61, 70)
(5, 64, 71)
(7, 68, 32767)</pre>
<h2><span class="mw-headline" id="UEFI">UEFI</span></h2>
<p>Laptop incorporates InsydeH2O® UEFI BIOS with classic text interface. It supports <a href="/Usage/Configuration/U/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a> with <a href="/Usage/Configuration/U/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a>, UEFI-CSM and Legacy BIOS modes.
</p>
<h3><span class="mw-headline" id="Boot_configuration">Boot configuration</span></h3>
<p>UEFI boot options can be safely (no bricking) set with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=efibootmgr">efibootmgr</a></span> or <a href="/Usage/Configuration/U/Unified_Extensible_Firmware_Interface.html#UEFI_Shell" title="Unified Extensible Firmware Interface">UEFI Shell</a> v2 (checked with <i>BIOS 2.77 (G2ETB7WW) EC 1.15</i>). Though you can delete <i>any</i> boot variable, so be careful!
</p>
<p>X230 in UEFI-non-CSM mode installed with <a href="/Usage/Configuration/E/EFISTUB.html" title="EFISTUB">EFISTUB</a> on <a href="/Usage/Configuration/S/Solid_state_drive.html" title="Solid state drive">SSD disk</a> boots into <a href="/Usage/Configuration/D/Display_manager.html" title="Display manager">display manager</a> in less than 25 seconds. Small <a href="/Usage/Configuration/E/EFI_system_partition.html" class="mw-redirect" title="ESP">ESP</a> (100 MiB fat32) also supported.
</p>
<h3><span class="mw-headline" id="USB_UEFI_update">USB UEFI update</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> There are unofficial firmware available, such as <a rel="nofollow"  href="https://doc.coreboot.org/mainboard/lenovo/xx30_series.html">Coreboot</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot"  title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-03-29 ⓘ]</sup> or Heads in order to remove hardware whitelists and provide trusted boot.</div>
<p>All official updates, including Windows utility, Bootable CD and documentation can be found <a rel="nofollow"  href="https://pcsupport.lenovo.com/gb/wiki/downloads/ds029187">here</a>. You can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/geteltorito/">geteltorito</a></span><sup><small>AUR</small></sup> to create bootable USB images from the Bootable CD:
</p>
<pre>$ geteltorito.pl g2uj24us.iso &gt; update.img 
# dd bs=512K if=update.img of=/dev/sdX
</pre>
<p>Insert USB stick, reboot and press <code>F12</code>, choose your USB. Follow the instructions.
</p>
<h3><span class="mw-headline" id="Trusted_Platform_Module">Trusted Platform Module</span></h3>
<p>Laptop has dedicated <a href="/Usage/Configuration/T/Trusted_Platform_Module.html" class="mw-redirect" title="TPM">TPM</a> 1.2 chip onboard<a rel="nofollow"  href="https://www.st.com/wiki/secure-mcus/st33tpm12lpc.html">[3]</a><a rel="nofollow"  href="https://trustedcomputinggroup.org/membership/certification/tpm-certified-products/">[4]</a>. It doesn't looks like it can be upgraded to TPM 2.0. Chip itself disabled by default sometimes, also owner clearing won't appear without <i>Supervisor password</i> set:
</p>
<ol>
<li>Enter Thinkpad UEFI Setup by pressing <code>F1</code>
</li>
<li>Set <i>Security &gt; Password</i> &gt; <i>Supervisor password</i>
</li>
<li>Set <i>Security &gt; Security Chip &gt; Security Chip [Active]</i>
</li>
<li>Save settings by pressing F10 and reboot</li>
<li>
<b>Turn laptop off</b>, turn on and UEFI option <i>Security &gt; Security Chip &gt; Clear Security Chip</i> eventually will appear.</li>
</ol>
<p>Process described in "ThinkPad X230 and X230i User Guide", <i>Chapter 4. Security &gt; Setting the security chip</i>.
</p>
<h2><span class="mw-headline" id="Known_issues">Known issues</span></h2>
<ul>
<li>There is a BIOS bug that gets in the way of the boot process with <a href="/Usage/Configuration/D/Dm-crypt.html" class="mw-redirect" title="LUKS">LUKS</a> and full-disk encryption. The user is stuck at the "Loading initial ramdisk" step, and does not see a password prompt to unlock the encrypted device. You can actually enter your password at this step, and boot-up will continue. However, updating the BIOS will resolve this completely.</li>
<li>UEFI option to clear <a href="/Usage/Configuration/T/Trusted_Platform_Module.html" class="mw-redirect" title="TPM">TPM</a> not working. STM chip datasheet describes physical presence pin, which, probably, can be used as workaround.</li>
</ul>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow"  href="https://gist.github.com/bassu/8478346">A Hacker's Ongoing Review for Lenovo ThinkPad X230</a></li>
<li><a rel="nofollow"  href="http://osresearch.net/Installing-Heads.html">Installing "Heads" and using TPM</a></li>
</ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="/Usage/Configuration/C/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="/Usage/Configuration/C/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="/Usage/Configuration/C/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_X230&amp;oldid=603169">https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_X230&amp;oldid=603169</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 30 March 2020, at 06:59.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="/Usage/Configuration/T/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="/Usage/Configuration/T/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="/Usage/Configuration/T/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



