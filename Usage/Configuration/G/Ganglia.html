<!--
    title: Ganglia
    description: Migration of Ganglia from the arch Wiki to the TOS Wiki
    published: true
    date: 2020-05-28T17:58:55.000Z
    tags: 
    -->>

<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading"  lang="en">Ganglia</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" >From TOS Wiki</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<p><a rel="nofollow"  href="http://ganglia.sourceforge.net/">Ganglia</a> is a scalable distributed system monitor tool for high-performance computing systems such as clusters and grids. It allows the user to remotely view live or historical statistics (such as CPU load averages or network utilization) for all machines that are being monitored.
</p>
<p>Ganglia is available as the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ganglia/">ganglia</a></span><sup><small>AUR</small></sup> package on the <a href="../wiki/TOS_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>, along with the web frontend <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ganglia-web/">ganglia-web</a></span><sup><small>AUR</small></sup>.  There is also a reduced-dependency version named <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ganglia-minimal/">ganglia-minimal</a></span><sup><small>AUR</small></sup>, which would be appropriate on boxes where you don't require <code>gmetad</code> and want to avoid pulling in <code>rrdtool</code> as a dependency, which would in turn pull in Cairo and Mesa.
</p>
<p>The <a rel="nofollow"  href="https://github.com/ganglia/monitor-core/wiki">Ganglia Wiki</a> contains all the information you need to get started with Ganglia.
</p>
<div id="toc" >
<input type="checkbox" role="button" id="toctogglecheckbox"  style="display:none"><div  lang="en" dir="ltr">
<h2>Contents</h2>
<span ><label  for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1">
<a href="#Ganglia_Web_Interface"><span >1</span> <span >Ganglia Web Interface</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Nginx_with_php-fpm"><span >1.1</span> <span >Nginx with php-fpm</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3">
<a href="#Troubleshooting"><span >2</span> <span >Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Issues_with_IP-address_binding_or_undesirable_hostnames"><span >2.1</span> <span >Issues with IP-address binding or undesirable hostnames</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#References"><span >3</span> <span >References</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Ganglia_Web_Interface">Ganglia Web Interface</span></h2>
<p>The ganglia web frontend is available as the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://aur.archlinux.org/packages/ganglia-web/">ganglia-web</a></span><sup><small>AUR</small></sup> package on the AUR.
</p>
<p>You will also need a <a href="../wiki/List_of_applications/Internet.html#Web_servers" class="mw-redirect" title="Web server">web server</a> with a working <a href="../wiki/PHP.html" title="PHP">PHP</a> setup. The following sections include some example setups.
</p>
<p>Make sure that the <code>open_basedir</code> setting in your <code>/etc/php/php.ini</code> includes <code>/tmp</code>, <code>/usr/share/webapps</code> and <code>/var/lib/ganglia</code>.
</p>
<h3><span class="mw-headline" id="Nginx_with_php-fpm">Nginx with php-fpm</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" ><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../wiki/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" ><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> See <a href="../wiki/Help:Style.html#Package_management_instructions" title="Help:Style">Help:Style#Package management instructions</a> and <a href="../wiki/Help:Style.html#systemd_units_operations" title="Help:Style">Help:Style#systemd units operations</a>. (Discuss in <a rel="nofollow"  href="https://wiki.archlinux.org/index.php/Talk:Ganglia">Talk:Ganglia#</a>)</div>
</div>
<p>Firstly, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=nginx">nginx</a></span> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow"  href="https://www.archlinux.org/packages/?name=php-fpm">php-fpm</a></span> packages:
</p>
<p>Secondly, read the <a href="../wiki/Nginx.html" title="Nginx">Nginx</a> article. Note its <a href="../wiki/Nginx.html#FastCGI" title="Nginx">Nginx#FastCGI</a> and subsequent php-fpm sections. <a href="../wiki/Nginx.html#Adding_to_main_configuration" title="Nginx">Nginx#Adding to main configuration</a><sup>[<a href="../wiki/TOS Wiki:Requests.html#Broken_section_links" class="mw-redirect" title="TOS Wiki:Requests">broken link</a>: invalid section]</sup> details a minimum <code>nginx.conf</code> to use. 
</p>
<p>An older minimal configuration for nginx would be something like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nginx/nginx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">events {
  worker_connections  1024;
}

http {
  include mime.types;
  default_type application/octet-stream;

  upstream php {
    server unix:/run/php-fpm/php-fpm.sock;
  }

  server {
    listen 80 default_server;

    root /usr/share/webapps;
    index index.php;

    location ~ \.php$ {
      fastcgi_pass php;
      include fastcgi.conf;
    }
  }
}
</pre>
<p>Then start all required services:
</p>
<pre>systemctl start gmetad gmond php-fpm nginx
</pre>
<p>Go to <a rel="nofollow"  href="http://localhost/ganglia">http://localhost/ganglia</a> and check that your setup is working.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Issues_with_IP-address_binding_or_undesirable_hostnames">Issues with IP-address binding or undesirable hostnames</span></h3>
<p>If <code>bind_hostname = yes</code> in the <code>udp_send_channel</code> section of <code>gmond.conf</code>, the <code>gmond</code> daemon will determine which <b>IP</b> to bind to (and report in the XML data) by determining the IP address of the default hostname.  You should be able to replicate this behaviour with one of these commands:
</p>
<pre>$ hostname -i
$ host $(hostname)
</pre>
<p>The <b>hostname</b> to report is determined by asking the system to look up a hostname for the chosen IP address, in order to ensure the hostname is that by which other machines on the network identify the monitored machine:
</p>
<pre>$ host &lt;ip-address&gt;
</pre>
<p>The hostname listed at the top of the list is the one that will be reported by <code>gmond</code>, and will appear in the web UI.  You can influence the returned hostname by modifying your <code>/etc/hosts</code> or <code>/etc/nsswitch.conf</code> files.  In particular, watch out for placing <code>myhostname</code> before <code>dns</code> on the <code>hosts</code> line in <code>/etc/nsswitch.conf</code>.  This will cause <code>gmond</code> to attempt to bind to a UDP port on 127.0.0.1, and it will fail to load.
</p>
<p>If you're not able to achieve the desired behaviour, the hostname can be overridden in the <code>gmond.conf</code> file by adding the following lines to the <code>globals</code> section:
</p>
<pre>globals {
  ...
  override_hostname = myhostname.mydomain
  override_ip = 127.0.0.2
}</pre>
<h2><span class="mw-headline" id="References">References</span></h2>
<ul><li>E-mail exchange explaining IP and Hostname lookup: <a rel="nofollow"  href="http://www.mail-archive.com/ganglia-general@lists.sourceforge.net/msg01885.html">http://www.mail-archive.com/ganglia-general@lists.sourceforge.net/msg01885.html</a>
</li></ul>
</div></div>
		
		<div id="catlinks"  data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../wiki/Category:System_monitors.html" title="Category:System monitors">System monitors</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../wiki/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../wiki/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li>
</ul>
</div>
</div>
		<div ></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Ganglia&amp;oldid=606988">https://wiki.archlinux.org/index.php?title=Ganglia&amp;oldid=606988</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 21 April 2020, at 05:26.</li>
								<li id="footer-info-copyright">Content is available under <a  rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../wiki/TOS Wiki:Privacy_policy.html" title="TOS Wiki:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../wiki/TOS Wiki:About.html" title="TOS Wiki:About">About TOS Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../wiki/TOS Wiki:General_disclaimer.html" title="TOS Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
										<ul id="footer-icons" >
										<li id="footer-copyrightico">
											</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		



